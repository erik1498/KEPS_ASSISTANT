import{j as a,r as c,b as C,y as P,bu as S,f as R,bg as p,s as T}from"./index-BHalgDnS.js";import{W as w}from"./Wrap-v0GlUqt9.js";import{P as E}from"./PageTitle-B404o4Ml.js";import{p as g}from"./number.helper-efe0YCx6.js";import{F as L}from"./FormSelectWithLabel-BeoqgiqW.js";import"./FormInput-rJTe_TRK.js";const j=({item:o,checkedKey:u,updateCheckBox:l=()=>{}})=>a.jsx(a.Fragment,{children:a.jsx("input",{type:"checkbox",checked:o[u],className:"checkbox checkbox-sm",onChange:l})}),$=()=>{const[o,u]=c.useState(!1),[l,b]=c.useState({check:!1}),[i,m]=c.useState([]),[N,f]=c.useState([]),[n,x]=c.useState([]),[t,h]=c.useState({label:null,value:null}),_=()=>{h(e=>null),p.custom("","GET").then(e=>{f(e.data.entry),e.data.entry.length>0&&h(s=>({label:e.data.entry[0].nomor_faktur_penjualan_barang,value:e.data.entry[0].uuid}))}).catch(e=>T(e))},k=()=>{p.custom(`/rincian_pesanan_penjualan_barang_by_faktur/${t==null?void 0:t.value}`,"GET").then(e=>{x(s=>{var r;return(r=e==null?void 0:e.data)==null?void 0:r.map(d=>(d.check=l==null?void 0:l.check,d))})})},v=()=>{m(e=>[]),p.custom(`/rincian_pengiriman_barang_by_faktur/${t==null?void 0:t.value}`,"POST",null,{data:{rincian_pesanan_penjualan_barang_list:n.filter(e=>e.check==!0).map(e=>e.uuid)}}).then(e=>{m(s=>e.data)})},y=e=>{const s=n==null?void 0:n.findIndex(r=>r.uuid==e.uuid);x(r=>r=r.map((d,B)=>(B==s&&(d.check=!d.check),d)))},F=()=>{b(e=>e=!e)};return c.useEffect(()=>{x(e=>e=e.map(s=>(s.check=!l,s)))},[l]),c.useEffect(()=>{_()},[]),a.jsx(w,{isLoading:o,children:a.jsxs("div",{children:[a.jsx(E,{title:"Laporan Pengiriman Barang"}),a.jsxs("div",{className:"grid grid-cols-12",children:[a.jsx("div",{className:"col-span-12",children:a.jsx("div",{className:"bg-white py-6 px-6 rounded-t-md",children:a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(L,{label:"Faktur Penjualan Barang",optionsDataList:N,optionsLabel:"nomor_faktur_penjualan_barang",optionsValue:"uuid",disabled:(n==null?void 0:n.length)>0,selectValue:t,onchange:e=>{h(e)},selectName:"fakturPenjualanBarang"}),(n==null?void 0:n.length)>0?a.jsx(a.Fragment,{children:a.jsxs("button",{className:"btn mt-3 btn-sm bg-red-800 text-white",onClick:()=>{x(e=>[]),m(e=>[])},children:[a.jsx(C,{})," Reset Faktur"]})}):a.jsx(a.Fragment,{children:a.jsxs("button",{className:"btn mt-3 btn-sm bg-green-800 text-white",onClick:()=>k(),children:[a.jsx(P,{})," Pilih Faktur"]})})]})})}),a.jsx("div",{className:"col-span-12 h-[80vh] overflow-y-scroll no-scrollbar",children:a.jsxs("div",{className:"bg-white rounded-b-md px-7 py-3",children:[a.jsxs("div",{className:"flex justify-between pb-5",children:[a.jsx("h1",{className:"font-bold text-sm",children:"Pilih Barang Pesanan"}),a.jsxs("button",{className:"btn btn-sm bg-blue-800 text-white",onClick:()=>v(),children:[a.jsx(S,{})," Lihat Riwayat Pengiriman"]})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 py-3 border-b-2",children:[a.jsx("div",{className:"col-span-1 flex justify-center",children:a.jsx("p",{className:"text-xs font-bold",children:a.jsx(j,{item:l,checkedKey:"check",updateCheckBox:()=>F()})})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs font-bold",children:"Nama / Kode Barang"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs font-bold",children:"Satuan Barang"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs font-bold",children:"Gudang"})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{className:"text-xs font-bold",children:"Jumlah Barang"})})]}),n.map(e=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 py-2 items-center",children:[a.jsx("div",{className:"col-span-1 flex justify-center",children:a.jsx(j,{item:e,checkedKey:"check",updateCheckBox:()=>{y(e)}})}),a.jsxs("div",{className:"col-span-3",children:[a.jsx("p",{className:"text-xs",children:e.daftar_barang_name}),a.jsx("p",{className:"text-xs",children:e.kategori_harga_barang_kode_barang})]}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs",children:e.satuan_barang_name})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs",children:e.daftar_gudang_name})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{className:"text-xs",children:g(e.jumlah)})})]}),(i==null?void 0:i.filter(s=>s.rincian_pesanan_penjualan_barang==e.uuid).length)>0?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 gap-x-2 border-y-2 py-1 border-gray-200 items-center",children:[a.jsx("div",{className:"col-span-1 flex justify-center"}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs font-bold",children:"Tanggal Pengiriman"})}),a.jsx("div",{className:"col-span-6",children:a.jsx("p",{className:"text-xs font-bold",children:"Nomor Surat Jalan"})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{className:"text-xs font-bold",children:"Dikirim"})})]})}):a.jsx(a.Fragment,{}),i==null?void 0:i.filter(s=>s.rincian_pesanan_penjualan_barang==e.uuid).map(s=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"grid grid-cols-12 bg-gray-100 gap-x-2 py-2 items-center",children:[a.jsx("div",{className:"col-span-1 flex justify-center"}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs",children:R(s.tanggal)})}),a.jsx("div",{className:"col-span-6",children:a.jsx("p",{className:"text-xs",children:s.nomor_surat_jalan})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{className:"text-xs",children:g(s.pengiriman)})})]})}))]}))]})})]})]})})};export{$ as default};
