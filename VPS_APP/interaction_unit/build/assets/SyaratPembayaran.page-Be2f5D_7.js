import{r as n,j as e,b as L,h as $,k as U,Z as k,n as v,s as S,R as W,u as A,o as I,e as V,p as G,i as O,a as Y,F as q,Y as M,q as Z}from"./index-DZCXWm7f.js";import{P as J}from"./PageTitle-CmhTXHkp.js";import{W as Q}from"./Wrap-DcwCOsCB.js";import{P as X}from"./Pagination-CKy31gga.js";import{F as y}from"./FormInputWithLabel-CJ6pr1p6.js";import{F as E}from"./FormSelectWithLabel-BRttMTTK.js";import{a as C}from"./actionEvent.helper-BujKUZ7B.js";import{P as ee,l as ae}from"./PDFHeader-C5EAnyc_.js";import"./react-paginate-DQywGu_z.js";import"./FormInput-BS-RLPlt.js";import"./number.helper-efe0YCx6.js";import"./index-BKNjMPK8.js";const te=({setAddSyaratPembayaranEvent:i=()=>{},syaratPembayaranEdit:a,tipePembayaranList:d=[],getData:c=()=>{}})=>{const[r,f]=n.useState(a!=null&&a.name?a.name:""),[m,p]=n.useState(a!=null&&a.tipe_pembayaran?a.tipe_pembayaran:null),[h,x]=n.useState(a!=null&&a.hari_kadaluarsa?a.hari_kadaluarsa:null),[j,b]=n.useState(a!=null&&a.denda?a.denda:null),N=async()=>{await U()&&k.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{tipe_pembayaran:m.value,name:r,hari_kadaluarsa:h,denda:j}}).then(()=>{a?v("Berhasil","Data berhasil diupdate"):v("Berhasil","Data berhasil disimpan"),i(),c()}).catch(l=>{S(l)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Syarat Pembayaran"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>i(),children:[e.jsx(L,{})," Batalkan Syarat Pembayaran"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(E,{label:"Tipe Pembayaran",optionsDataList:d,optionsLabel:"name",optionsValue:"uuid",selectValue:m,onchange:l=>{p(l)},selectName:"tipe_pembayaran"}),e.jsx(y,{label:"Nama Syarat Pembayaran",type:"text",onchange:l=>{f(l.target.value)},others:{value:r,name:"namaSyaratPembayaran"}}),e.jsx(y,{label:"Hari Kadaluarsa",type:"text",onchange:l=>{C(l),x(l.target.value)},others:{value:h,name:"hariKadaluarsa"}}),e.jsx(y,{label:"Denda",type:"text",onchange:l=>{C(l),b(l.target.value)},others:{value:j,name:"denda"}})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{N()},children:[e.jsx($,{})," Simpan"]})]})})},se=W.forwardRef((i,a)=>{var d;return e.jsxs("div",{ref:a,children:[e.jsx(ee,{bulan:i.bulan,tahun:i.tahun,title:"Syarat Pembayaran"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Tipe Pembayaran"}),e.jsx("th",{children:"Nama Syarat Pembayaran"}),e.jsx("th",{children:"Hari Kadaluarsa"}),e.jsx("th",{children:"Denda"})]})}),e.jsx("tbody",{children:(d=i==null?void 0:i.data)==null?void 0:d.map((c,r)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsx("td",{children:c.tipe_pembayaran_name}),e.jsx("td",{children:c.name}),e.jsx("td",{children:c.hari_kadaluarsa}),e.jsxs("td",{children:[c.denda," %"]})]},r)}))})]})]})}),je=()=>{const i=A(),{data:a}=i,[d,c]=n.useState([]),[r,f]=n.useState([]),[m,p]=n.useState(!1),[h,x]=n.useState(!1),[j,b]=n.useState({name:""}),[N,l]=n.useState(!1),[P,F]=n.useState(""),T=n.useRef(),R=ae.useReactToPrint({content:()=>T.current}),[u,w]=n.useState({page:1,size:10,count:118,lastPage:12}),D=()=>{M.custom("","GET").then(s=>{c(s.data.entry)}).catch(s=>{S(s)})},o=(s="")=>{s==""&&F(s),p(!0),k.custom(`?search=${s}&page=${u.page}&size=${u.size}`,"GET").then(t=>{var g,_;l(s.length<1),f((g=t==null?void 0:t.data)==null?void 0:g.entry),w((_=t==null?void 0:t.data)==null?void 0:_.pagination),p(!1)}).catch(t=>{S(t)})},z=s=>{let t=r[s];b(t),x(!h)},B=async s=>{if(await Z("Hapus","Yakin ingin hapus data ini ?")){let t=r[s];k.custom(`/${t.uuid}`,"DELETE").then(()=>{v("Berhasil","Data berhasil dihapus"),o()}).catch(g=>{S(g)})}},H=({selected:s})=>{let t=u;t.page=s+1,w(t),o()},K=s=>{let t=u;t.size=s,t.page=1,w(t),o()};return n.useEffect(()=>{o(),D()},[]),e.jsx(Q,{isLoading:m,children:e.jsxs("div",{children:[e.jsx(J,{title:"Syarat Pembayaran"}),h?e.jsx(te,{setAddSyaratPembayaranEvent:()=>x(!1),getData:o,syaratPembayaranEdit:j,tipePembayaranList:d}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:P,onChange:s=>F(s.target.value)}),N?e.jsx(I,{onClick:()=>{o(P)},className:"cursor-pointer"}):e.jsx(L,{onClick:()=>o(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{b(null),x(!h)},children:[e.jsx(V,{})," Tambah Syarat Pembayaran"]}),e.jsx("div",{className:"hidden",children:e.jsx(se,{data:r,ref:T,bulan:G(new Date().getMonth()),tahun:a.tahun})}),e.jsxs("button",{onClick:R,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(O,{})," Cetak Syarat Pembayaran"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Tipe Pembayaran"}),e.jsx("th",{children:"Nama Syarat Pembayaran"}),e.jsx("th",{children:"Hari Kadaluarsa"}),e.jsx("th",{children:"Denda"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:r==null?void 0:r.map((s,t)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[t+1,"."]}),e.jsx("td",{children:s.tipe_pembayaran_name}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.hari_kadaluarsa}),e.jsxs("td",{children:[s.denda," %"]}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(Y,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{z(t)}}),e.jsx(q,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{B(t)}})]})]},t)}))})]})}),e.jsx(X,{paginateUpdatePage:H,paginate:u,setSize:K})]})]})})};export{je as default};
