import{r as i,j as e,b as C,h as R,ae as z,n as j,af as B,k as J,a5 as k,s as v,R as $,u as U,o as V,e as O,p as W,i as A,a as I,F as H,q}from"./index-CBiC-3z3.js";import{P as M}from"./PageTitle-B0c32fKm.js";import{e as G,W as Y}from"./Wrap-BkENrgtl.js";import{P as Q}from"./Pagination-Bor55BAY.js";import{F as X}from"./FormInputWithLabel-CG72YFWb.js";import{F as _}from"./FormSelectWithLabel-BwIvOt7G.js";import{P as Z,l as E}from"./PDFHeader-LWmUPkCD.js";import"./FormInput-CmrfS47c.js";import"./index-BKNjMPK8.js";const ee=({setAddDaftarGudangEvent:r=()=>{},daftarGudangEdit:t,getData:l=()=>{}})=>{const[c,h]=i.useState(t!=null&&t.name?t.name:""),[g,o]=i.useState(t!=null&&t.kategori_gudang?t.kategori_gudang:""),[d,x]=i.useState(t!=null&&t.jenis_gudang?t.jenis_gudang:""),[b,N]=i.useState([]),[w,p]=i.useState([]),f=()=>{z.custom("","GET").then(a=>{if(N(a.data.entry),a.data.entry.length>0){if(t){G({editObject:t.kategori_gudang,dataList:a.data.entry,setState:o,labelKey:"name",valueKey:"uuid"});return}o({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{j(a)})},y=()=>{B.custom("","GET").then(a=>{if(p(a.data.entry),a.data.entry.length>0){if(t){G({editObject:t.jenis_gudang,dataList:a.data.entry,setState:x,labelKey:"name",valueKey:"uuid"});return}x({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{j(a)})};i.useEffect(()=>{f(),y()},[]);const S=async a=>{a.preventDefault(),await J(a.target)&&k.custom(`${t!=null&&t.uuid?`/${t.uuid}`:""}`,t?"PUT":"POST",null,{data:{name:c,kategori_gudang:g.value,jenis_gudang:d.value}}).then(()=>{t?j("Berhasil","Data berhasil diupdate"):j("Berhasil","Data berhasil disimpan"),r(),l()}).catch(m=>{v(m)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[t?"Edit":"Tambahkan"," Daftar Gudang"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>r(),children:[e.jsx(C,{})," Batalkan Daftar Gudang"]})]}),e.jsxs("form",{onSubmit:a=>S(a),children:[e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(X,{label:"Nama Daftar Gudang",type:"text",onchange:a=>{h(a.target.value)},others:{value:c,name:"namaDaftarGudang"}}),e.jsx(_,{label:"Kategori Gudang",optionsDataList:b,optionsLabel:"name",optionsValue:"uuid",selectValue:g,onchange:a=>{o(a)},selectName:"kategoriDaftarGudang"}),e.jsx(_,{label:"Jenis Gudang",optionsDataList:w,optionsLabel:"name",optionsValue:"uuid",selectValue:d,onchange:a=>{x(a)},selectName:"jenisDaftarGudang"})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[e.jsx(R,{})," Simpan"]})]})]})})},ae=$.forwardRef((r,t)=>{var l;return e.jsxs("div",{ref:t,children:[e.jsx(Z,{bulan:r.bulan,tahun:r.tahun,title:"Daftar Gudang"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Daftar Gudang"}),e.jsx("th",{children:"Kode Daftar Gudang"})]})}),e.jsx("tbody",{children:(l=r==null?void 0:r.data)==null?void 0:l.map((c,h)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsx("td",{children:c.name}),e.jsx("td",{children:c.code})]},h)}))})]})]})}),he=()=>{const r=U(),{data:t}=r,[l,c]=i.useState([]),[h,g]=i.useState(!1),[o,d]=i.useState(!1),[x,b]=i.useState({name:""}),[N,w]=i.useState(!1),[p,f]=i.useState(""),y=i.useRef(),S=E.useReactToPrint({content:()=>y.current}),[a,m]=i.useState({page:1,size:10,count:118,lastPage:12}),u=(n="")=>{n==""&&f(n),g(!0),k.custom(`?search=${n}&page=${a.page}&size=${a.size}`,"GET").then(s=>{var D,F;w(n.length<1),c((D=s==null?void 0:s.data)==null?void 0:D.entry),m((F=s==null?void 0:s.data)==null?void 0:F.pagination),g(!1)}).catch(s=>{v(s)})},P=n=>{let s=l[n];b(s),d(!o)},L=async n=>{if(await q("Hapus","Yakin ingin hapus data ini ?")){let s=l[n];k.custom(`/${s.uuid}`,"DELETE").then(()=>{j("Berhasil","Data berhasil dihapus"),u()}).catch(D=>{v(D)})}},T=({selected:n})=>{let s=a;s.page=n+1,m(s),u()},K=n=>{let s=a;s.size=n,s.page=1,m(s),u()};return i.useEffect(()=>{u()},[]),e.jsx(Y,{isLoading:h,children:e.jsxs("div",{children:[e.jsx(M,{title:"Daftar Gudang"}),o?e.jsx(ee,{setAddDaftarGudangEvent:()=>d(!1),getData:u,daftarGudangEdit:x}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:p,onChange:n=>f(n.target.value)}),N?e.jsx(V,{onClick:()=>{u(p)},className:"cursor-pointer"}):e.jsx(C,{onClick:()=>u(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{b(null),d(!o)},children:[e.jsx(O,{})," Tambah Daftar Gudang"]}),e.jsx("div",{className:"hidden",children:e.jsx(ae,{data:l,ref:y,bulan:W(new Date().getMonth()),tahun:t.tahun})}),e.jsxs("button",{onClick:S,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(A,{})," Cetak Daftar Gudang"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Daftar Gudang"}),e.jsx("th",{children:"Kategori Gudang"}),e.jsx("th",{children:"Jenis Gudang"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((n,s)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[s+1,"."]}),e.jsx("td",{children:n.name}),e.jsx("td",{children:n.kategori_gudang_name}),e.jsx("td",{children:n.jenis_gudang_name}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(I,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{P(s)}}),e.jsx(H,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{L(s)}})]})]},s)}))})]})}),e.jsx(Q,{paginateUpdatePage:T,paginate:a,setSize:K})]})]})})};export{he as default};
