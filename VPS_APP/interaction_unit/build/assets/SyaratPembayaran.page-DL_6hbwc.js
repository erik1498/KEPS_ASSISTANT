import{r as n,j as e,d as D,Q as $,m as U,o as W,ak as v,v as k,t as S,R as A,w as I,W as V,x as G,y as O,l as M,z as Q,n as Y,b as q,F as J,aj as X,D as Z}from"./index-w4WRH1zx.js";import{P as E}from"./Pagination-hXZ8aV_7.js";import{F as y}from"./FormInputWithLabel-KhAr-6m5.js";import{a as F}from"./actionEvent.helper-DeauyOY9.js";import{P as ee,l as ae}from"./PDFHeader-jGZBZNfE.js";import"./react-paginate-DlRX8p9z.js";import"./index-BKNjMPK8.js";const te=({setAddSyaratPembayaranEvent:i=()=>{},syaratPembayaranEdit:a,tipePembayaranList:h=[],getData:c=()=>{}})=>{const[r,f]=n.useState(a!=null&&a.name?a.name:""),[m,p]=n.useState(a!=null&&a.tipe_pembayaran?a.tipe_pembayaran:null),[o,x]=n.useState(a!=null&&a.hari_kadaluarsa?a.hari_kadaluarsa:null),[j,b]=n.useState(a!=null&&a.denda?a.denda:null),N=async()=>{await W()&&v.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{tipe_pembayaran:m.value,name:r,hari_kadaluarsa:o,denda:j}}).then(()=>{a?k("Berhasil","Data berhasil diupdate"):k("Berhasil","Data berhasil disimpan"),i(),c()}).catch(l=>{S(l)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Syarat Pembayaran"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>i(),children:[e.jsx(D,{})," Batalkan Syarat Pembayaran"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx($,{label:"Tipe Pembayaran",optionsDataList:h,optionsLabel:"name",optionsValue:"uuid",selectValue:m,onchange:l=>{p(l)},selectName:"tipe_pembayaran"}),e.jsx(y,{label:"Nama Syarat Pembayaran",type:"text",onchange:l=>{f(l.target.value)},others:{value:r,name:"namaSyaratPembayaran"}}),e.jsx(y,{label:"Hari Kadaluarsa",type:"text",onchange:l=>{F(l),x(l.target.value)},others:{value:o,name:"hariKadaluarsa"}}),e.jsx(y,{label:"Denda",type:"text",onchange:l=>{F(l),b(l.target.value)},others:{value:j,name:"denda"}})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{N()},children:[e.jsx(U,{})," Simpan"]})]})})},se=A.forwardRef((i,a)=>{var h;return e.jsxs("div",{ref:a,children:[e.jsx(ee,{bulan:i.bulan,tahun:i.tahun,title:"Syarat Pembayaran"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Tipe Pembayaran"}),e.jsx("th",{children:"Nama Syarat Pembayaran"}),e.jsx("th",{children:"Hari Kadaluarsa"}),e.jsx("th",{children:"Denda"})]})}),e.jsx("tbody",{children:(h=i==null?void 0:i.data)==null?void 0:h.map((c,r)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsx("td",{children:c.tipe_pembayaran_name}),e.jsx("td",{children:c.name}),e.jsx("td",{children:c.hari_kadaluarsa}),e.jsxs("td",{children:[c.denda," %"]})]},r)}))})]})]})}),oe=()=>{const i=I(),{data:a}=i,[h,c]=n.useState([]),[r,f]=n.useState([]),[m,p]=n.useState(!1),[o,x]=n.useState(!1),[j,b]=n.useState({name:""}),[N,l]=n.useState(!1),[P,T]=n.useState(""),_=n.useRef(),L=ae.useReactToPrint({content:()=>_.current}),[u,w]=n.useState({page:1,size:10,count:118,lastPage:12}),R=()=>{X.custom("","GET").then(s=>{c(s.data.entry)}).catch(s=>{S(s)})},d=(s="")=>{s==""&&T(s),p(!0),v.custom(`?search=${s}&page=${u.page}&size=${u.size}`,"GET").then(t=>{var g,C;l(s.length<1),f((g=t==null?void 0:t.data)==null?void 0:g.entry),w((C=t==null?void 0:t.data)==null?void 0:C.pagination),p(!1)}).catch(t=>{S(t)})},z=s=>{let t=r[s];b(t),x(!o)},B=async s=>{if(await Z("Hapus","Yakin ingin hapus data ini ?")){let t=r[s];v.custom(`/${t.uuid}`,"DELETE").then(()=>{k("Berhasil","Data berhasil dihapus"),d()}).catch(g=>{S(g)})}},H=({selected:s})=>{let t=u;t.page=s+1,w(t),d()},K=s=>{let t=u;t.size=s,t.page=1,w(t),d()};return n.useEffect(()=>{d(),R()},[]),e.jsx(V,{isLoading:m,children:e.jsxs("div",{children:[e.jsx(G,{title:"Syarat Pembayaran"}),o?e.jsx(te,{setAddSyaratPembayaranEvent:()=>x(!1),getData:d,syaratPembayaranEdit:j,tipePembayaranList:h}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:P,onChange:s=>T(s.target.value)}),N?e.jsx(O,{onClick:()=>{d(P)},className:"cursor-pointer"}):e.jsx(D,{onClick:()=>d(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{b(null),x(!o)},children:[e.jsx(M,{})," Tambah Syarat Pembayaran"]}),e.jsx("div",{className:"hidden",children:e.jsx(se,{data:r,ref:_,bulan:Q(new Date().getMonth()),tahun:a.tahun})}),e.jsxs("button",{onClick:L,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(Y,{})," Cetak Syarat Pembayaran"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Tipe Pembayaran"}),e.jsx("th",{children:"Nama Syarat Pembayaran"}),e.jsx("th",{children:"Hari Kadaluarsa"}),e.jsx("th",{children:"Denda"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:r==null?void 0:r.map((s,t)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[t+1,"."]}),e.jsx("td",{children:s.tipe_pembayaran_name}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.hari_kadaluarsa}),e.jsxs("td",{children:[s.denda," %"]}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(q,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{z(t)}}),e.jsx(J,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{B(t)}})]})]},t)}))})]})}),e.jsx(E,{paginateUpdatePage:H,paginate:u,setSize:K})]})]})})};export{oe as default};
