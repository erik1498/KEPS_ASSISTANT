import{r as i,j as e,d as T,m as $,o as L,ak as j,v as b,t as p,R as _,w as A,W as D,x as I,y as U,l as W,z as H,n as G,b as M,F as O,D as V}from"./index-pVJ0F13P.js";import{P as Y}from"./Pagination-_WRiUqix.js";import{F as q}from"./FormInputWithLabel-Bj7wavFM.js";import{P as J,l as K}from"./PDFHeader-CE1vnOr4.js";import"./react-paginate-DlL79j9L.js";import"./index-BKNjMPK8.js";const Q=({setAddStatusTanggunganEvent:l=()=>{},statusTanggunganEdit:s,getData:n=()=>{}})=>{const[o,d]=i.useState(s!=null&&s.name?s.name:""),u=async()=>{await L()&&j.custom(`${s!=null&&s.uuid?`/${s.uuid}`:""}`,s?"PUT":"POST",null,{data:{name:o}}).then(()=>{s?b("Berhasil","Data berhasil diupdate"):b("Berhasil","Data berhasil disimpan"),l(),n()}).catch(r=>{p(r)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[s?"Edit":"Tambahkan"," Syarat Pembayaran"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>l(),children:[e.jsx(T,{})," Batalkan Status Tanggungan"]})]}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(q,{label:"Nama Status Tanggungan",type:"text",onchange:r=>{d(r.target.value)},others:{value:o,name:"namaStatusTanggungan"}})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{u()},children:[e.jsx($,{})," Simpan"]})]})})},X=_.forwardRef((l,s)=>{var n;return e.jsxs("div",{ref:s,children:[e.jsx(J,{bulan:l.bulan,tahun:l.tahun,title:"Status Tanggungan"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Status Tanggungan"})]})}),e.jsx("tbody",{children:(n=l==null?void 0:l.data)==null?void 0:n.map((o,d)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:d+1}),e.jsx("td",{children:o.name})]},d)}))})]})]})}),ne=()=>{const l=A(),{data:s}=l,[n,o]=i.useState([]),[d,u]=i.useState(!1),[r,g]=i.useState(!1),[v,S]=i.useState({name:""}),[k,C]=i.useState(!1),[f,N]=i.useState(""),w=i.useRef(),F=K.useReactToPrint({content:()=>w.current}),[h,m]=i.useState({page:1,size:10,count:118,lastPage:12}),c=(t="")=>{t==""&&N(t),u(!0),j.custom(`?search=${t}&page=${h.page}&size=${h.size}`,"GET").then(a=>{var x,y;C(t.length<1),o((x=a==null?void 0:a.data)==null?void 0:x.entry),m((y=a==null?void 0:a.data)==null?void 0:y.pagination),u(!1)}).catch(a=>{p(a)})},P=t=>{let a=n[t];S(a),g(!r)},z=async t=>{if(await V("Hapus","Yakin ingin hapus data ini ?")){let a=n[t];j.custom(`/${a.uuid}`,"DELETE").then(()=>{b("Berhasil","Data berhasil dihapus"),c()}).catch(x=>{p(x)})}},R=({selected:t})=>{let a=h;a.page=t+1,m(a),c()},B=t=>{let a=h;a.size=t,a.page=1,m(a),c()};return i.useEffect(()=>{c()},[]),e.jsx(D,{isLoading:d,children:e.jsxs("div",{children:[e.jsx(I,{title:"Status Tanggungan"}),r?e.jsx(Q,{setAddStatusTanggunganEvent:()=>g(!1),getData:c,statusTanggunganEdit:v}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:f,onChange:t=>N(t.target.value)}),k?e.jsx(U,{onClick:()=>{c(f)},className:"cursor-pointer"}):e.jsx(T,{onClick:()=>c(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{S(null),g(!r)},children:[e.jsx(W,{})," Tambah Status Tanggungan"]}),e.jsx("div",{className:"hidden",children:e.jsx(X,{data:n,ref:w,bulan:H(new Date().getMonth()),tahun:s.tahun})}),e.jsxs("button",{onClick:F,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(G,{})," Cetak Status Tanggungan"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Status Tanggungan"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:n==null?void 0:n.map((t,a)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[a+1,"."]}),e.jsx("td",{children:t.name}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(M,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{P(a)}}),e.jsx(O,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{z(a)}})]})]},a)}))})]})}),e.jsx(Y,{paginateUpdatePage:R,paginate:h,setSize:B})]})]})})};export{ne as default};
