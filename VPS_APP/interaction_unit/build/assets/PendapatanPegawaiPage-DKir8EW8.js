import{u as A,r as t,O as F,j as a,h as ua,F as ca,k as xa,aN as na,n as J,s as K,aO as la,b as da,c as ia,a as Ba,aP as ra,aQ as oa,aR as _a,y as Ca,K as Ea,A as La,e as Ha}from"./index-BHalgDnS.js";import{P as Ja}from"./PageTitle-B404o4Ml.js";import{B as ha,J as ya,l as Ta,m as Pa,n as Sa,o as Na,p as $a,q as Fa,W as Ua}from"./Wrap-v0GlUqt9.js";import{F as X}from"./FormSelectWithLabel-BeoqgiqW.js";import{F as c}from"./FormInputWithLabel-BP5eQqei.js";import{i as G}from"./actionEvent.helper-BujKUZ7B.js";import{p as m,a as C}from"./number.helper-efe0YCx6.js";import{T as Ka}from"./ToggleBox-BL2Q2QSN.js";import{B as Ia}from"./BulanSelectedListCard-BiCMzcYf.js";import{P as Ma}from"./PendapatanRowData-CQALL4DA.js";import{b as Ga}from"./jurnalUmum.helper-CxKZ06YE.js";import{D as Ra}from"./DebetKreditStatusCard-Cjnbe8wI.js";import"./FormInput-rJTe_TRK.js";import"./PendapatanRowUraian-yykwjZu8.js";const za=({idPegawai:o,gaji:d,gajiUpdated:x,setGajiDeleted:_=()=>{},periode:i,kodeAkunList:r=[]})=>{const{data:T}=A(),[g,j]=t.useState("0"),[b,w]=t.useState("0"),[k,p]=t.useState("0"),[u,P]=t.useState(r.length>0?{label:`${r[0].code} - ${r[0].name}`,value:r[0].uuid}:null),[y,v]=t.useState(F()),[S,f]=t.useState(),[N,$]=t.useState("0"),[l,s]=t.useState("0"),[h,B]=t.useState("0"),[Y,R]=t.useState("0"),[Z,D]=t.useState("0"),[aa,z]=t.useState("0"),[U,V]=t.useState("0"),[O,W]=t.useState("0"),[n,E]=t.useState(),I=async(e,H=!0)=>{let Q=!1;H&&e.preventDefault(),Q=H?await xa(e.target):!0,Q&&na.custom(n?`/${n.uuid}`:"",n?"PUT":"POST",null,{data:{pegawai:o,periode:i,gaji:d.uuid,kode_akun_perkiraan:u==null?void 0:u.value,tanggal:y,bukti_transaksi:S,bonus:`${g}`,insentif:`${b}`,thr:`${k}`,bpjs_kesehatan:N,bpjs_kesehatan_persentase:ha,jkk:l,jkk_persentase:ya,jkm:h,jkm_persentase:Ta,jht:Y,jht_persentase:Pa,jp:Z,jp_persentase:Sa,bpjs_karyawan:aa,bpjs_karyawan_persentase:Na,jp_karyawan:U,jp_karyawan_persentase:$a,jht_karyawan:O,jht_karyawan_persentase:Fa}}).then(M=>{_(sa=>!1),n||E(sa=>M.data),H&&J("Berhasil","Data Tunjangan Uang Berhasil Disimpan")}).catch(M=>K(M))},q=()=>{na.custom(`/${n.uuid}`,"DELETE").then(()=>{v(F()),f(e=>""),j(e=>0),w(e=>0),p(e=>0),P(r.length>0?{label:`${r[0].code} - ${r[0].name}`,value:r[0].uuid}:null),E(null),z(0),V(0),W(0),J("Berhasil","Data Tunjangan Uang Berhasil DiHapus"),_(e=>!0)}).catch(e=>K(e))},ea=()=>{na.custom(`/${o}/${i}/${T.tahun}`,"GET").then(e=>{var Q,M,sa,ma,ga,pa,ba,ja,ka,fa,wa;j(L=>0),(Q=e==null?void 0:e.data)!=null&&Q.bonus&&j(m((M=e==null?void 0:e.data)==null?void 0:M.bonus)),w(L=>0),(sa=e==null?void 0:e.data)!=null&&sa.insentif&&w(m((ma=e==null?void 0:e.data)==null?void 0:ma.insentif)),p(L=>0),(ga=e==null?void 0:e.data)!=null&&ga.thr&&p(m((pa=e==null?void 0:e.data)==null?void 0:pa.thr)),f(L=>""),(ba=e==null?void 0:e.data)!=null&&ba.bukti_transaksi&&f((ja=e==null?void 0:e.data)==null?void 0:ja.bukti_transaksi),v(L=>F()),(ka=e==null?void 0:e.data)!=null&&ka.tanggal&&v((fa=e==null?void 0:e.data)==null?void 0:fa.tanggal),E(L=>e==null?void 0:e.data);const H=r.filter(L=>{var va;return L.uuid==((va=e==null?void 0:e.data)==null?void 0:va.kode_akun_perkiraan)});H.length>0&&P(L=>({label:`${H[0].code} - ${H[0].name}`,value:H[0].uuid})),e!=null&&e.data&&(console.log(e.data),_(L=>!1)),((wa=e==null?void 0:e.data)==null?void 0:wa.bpjs_karyawan)!=(C(d==null?void 0:d.nilai)*ha).toFixed(0)&&I(null,!1)})},ta=()=>{$(e=>0),s(e=>0),B(e=>0),R(e=>0),D(e=>0),z(e=>0),V(e=>0),W(e=>0),d&&($(e=>(C(d.nilai)*ha).toFixed(0)),s(e=>(C(d.nilai)*ya).toFixed(0)),B(e=>(C(d.nilai)*Ta).toFixed(0)),R(e=>(C(d.nilai)*Pa).toFixed(0)),D(e=>(C(d.nilai)*Sa).toFixed(0)),z(e=>(C(d.nilai)*Na).toFixed(0)),V(e=>(C(d.nilai)*$a).toFixed(0)),W(e=>(C(d.nilai)*Fa).toFixed(0)),ea())};return t.useEffect(()=>{d&&ta()},[x,d]),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"my-5 bg-white py-5 px-6 rounded-md",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Tunjangan Uang Pegawai"}),a.jsxs("form",{onSubmit:e=>I(e),children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(X,{label:"Sumber Dana",optionsDataList:r,optionsLabel:["code","name"],optionsValue:"uuid",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:u,onchange:e=>{P(e)},selectName:"periode"}),a.jsx(c,{label:"Tanggal",type:"datetime-local",onchange:e=>{v(e.target.value)},others:{value:y,name:"tanggal"}}),a.jsx(c,{label:"Bukti Transaksi",type:"text",onchange:e=>{f(e.target.value)},others:{value:S,name:"buktiTransaksi"}})]}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(c,{label:"Bonus",type:"text",onchange:e=>{G(e),j(e.target.value)},others:{value:g,name:"bonus"}}),a.jsx(c,{label:"Insentif",type:"text",onchange:e=>{G(e),w(e.target.value)},others:{value:b,name:"insentif"}}),a.jsx(c,{label:"THR",type:"text",onchange:e=>{G(e),p(e.target.value)},others:{value:k,name:"thr"}})]}),a.jsxs("div",{className:"mt-5 grid grid-cols-10 gap-x-2",children:[a.jsx(c,{label:"BPJS Kesehatan",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(N),name:"bpjsKesehatan"}}),a.jsx(c,{label:"JKK",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(l),name:"jkk"}}),a.jsx(c,{label:"JKM",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(h),name:"jkm"}}),a.jsx(c,{label:"JHT",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(Y),name:"jht"}}),a.jsx(c,{label:"JP",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(Z),name:"jp"}})]}),a.jsxs("div",{className:"mt-5 grid grid-cols-10 gap-x-2",children:[a.jsx(c,{label:"BPJS Karyawan",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(aa),name:"bpjsKaryawan"}}),a.jsx(c,{label:"JP Karyawan",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(U),name:"jpKaryawan"}}),a.jsx(c,{label:"JHT Karyawan",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(O),name:"jhtKaryawan"}})]}),a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(ua,{})," Simpan"]}),n?a.jsx(a.Fragment,{children:a.jsxs("button",{type:"button",onClick:()=>q(),className:"btn btn-sm bg-red-800 mt-4 text-white",children:[a.jsx(ca,{})," Hapus Data"]})}):a.jsx(a.Fragment,{})]})]})})},Va=({idPegawai:o,periode:d,kodeAkunList:x=[]})=>{const{data:_}=A(),[i,r]=t.useState(!1),[T,g]=t.useState(!1),[j,b]=t.useState("0"),[w,k]=t.useState(x.length>0?{label:`${x[0].code} - ${x[0].name}`,value:x[0].uuid}:null),[p,u]=t.useState(null),[P,y]=t.useState(F()),[v,S]=t.useState(),f=async l=>{l.preventDefault(),g(s=>!1),await xa(l.target)&&la.custom(p?`/${p.uuid}`:"",p?"PUT":"POST",null,{data:{pegawai:o,periode:d,kode_akun_perkiraan:w.value,tanggal:P,bukti_transaksi:v,nilai:j}}).then(s=>{if(!p)u(h=>s.data);else{const h=p;h.nilai=j,u(B=>h)}J("Berhasil","Data Gaji Berhasil Disimpan"),r(h=>!0),g(h=>!0)}).catch(s=>K(s))},N=()=>{la.custom(`/${p.uuid}`,"DELETE").then(()=>{u(l=>null),r(l=>!1),S(l=>""),b(l=>0),J("Berhasil","Data Gaji Berhasil DiHapus")}).catch(l=>{K(l)})},$=()=>{la.custom(`/${o}/${d}/${_.tahun}`,"GET").then(l=>{var s;if((s=l.data)!=null&&s.nilai){b(m(l.data.nilai)),S(l.data.bukti_transaksi),y(l.data.tanggal),u(l.data);const h=x.filter(B=>B.uuid==l.data.kode_akun_perkiraan);h&&k(B=>({label:`${h[0].code} - ${h[0].name}`,value:h[0].uuid})),r(B=>!0)}})};return t.useEffect(()=>{$()},[o]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"my-5 bg-white py-5 px-6 rounded-md",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Gaji Pegawai"}),a.jsxs("form",{onSubmit:l=>f(l),children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(X,{label:"Sumber Dana",optionsDataList:x,optionsLabel:["code","name"],optionsValue:"uuid",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:w,onchange:l=>{k(l)},selectName:"periode"}),a.jsx(c,{label:"Tanggal",type:"datetime-local",onchange:l=>{y(l.target.value)},others:{value:P,name:"tanggal"}}),a.jsx(c,{label:"Bukti Transaksi",type:"text",onchange:l=>{S(l.target.value)},others:{value:v,name:"buktiTransaksi"}}),a.jsx(c,{label:"Nilai",type:"text",onchange:l=>{G(l),b(l.target.value)},others:{value:j,name:"nilai"}})]}),i?a.jsx(a.Fragment,{}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(ua,{})," Simpan"]}),a.jsx("p",{className:"text-red-500 font-bold mt-2 text-sm",children:"* Gaji tidak dapat dihapus jika tunjangan uang tidak dihapus."})]}),i?a.jsx(a.Fragment,{children:a.jsxs("button",{type:"button",onClick:()=>N(),className:"btn btn-sm bg-red-800 mt-4 text-white",children:[a.jsx(ca,{})," Hapus Data"]})}):a.jsx(a.Fragment,{})]})]}),a.jsx(za,{idPegawai:o,kodeAkunList:x,periode:d,gaji:p,gajiUpdated:T,setGajiDeleted:r})]})},Oa=({idPegawai:o,periode:d,kodeAkunList:x=[]})=>{const{data:_}=A(),[i,r]=t.useState(null),[T,g]=t.useState(),[j,b]=t.useState(F()),[w,k]=t.useState(),[p,u]=t.useState(),[P,y]=t.useState(),[v,S]=t.useState("0"),[f,N]=t.useState(F()),[$,l]=t.useState(F()),[s,h]=t.useState("0"),[B,Y]=t.useState("0"),[R,Z]=t.useState("0"),[D,aa]=t.useState([]),z=async n=>{n.preventDefault(),await xa(n.target)&&ra.custom(i?`/${i.uuid}`:"",i?"PUT":"POST","",{data:{pegawai:o,periode:d,kode_akun_perkiraan:T.value,tanggal:j,bukti_transaksi:w,deskripsi_kerja:p,keterangan_kerja:P,nilai_lembur_per_menit:v,waktu_mulai:f,waktu_selesai:$,total_jam:`${s}`,total_menit:`${B}`,total_bayaran:`${R}`}}).then(E=>{J("Berhasil","Data Lembur Berhasil Disimpan"),r(I=>null),U()}).catch(E=>K(E))},U=()=>{ra.custom(`/${o}/${d}/${_.tahun}`,"GET").then(n=>{aa(n.data)})},V=n=>{ra.custom(`/${n}`,"DELETE").then(()=>{J("Berhasil","Data Lembur Berhasil Dihapus"),U()}).catch(E=>K(E))},O=()=>{const n=new Date(f),I=(new Date($)-n)/(1e3*60),q=Math.floor(I/60),ea=Math.FORMAT((I/60-q)*60);h(e=>m(q)),Y(e=>m(ea));const ta=C(v);Z(m(ta*ea+ta*(q*60)))},W=n=>{r(n)};return t.useEffect(()=>{i?(g({label:`${i.kode_akun_perkiraan_code} - ${i.kode_akun_perkiraan_name}`,value:i.kode_akun_perkiraan}),b(i.tanggal),k(i.bukti_transaksi),u(i.deskripsi_kerja),y(i.keterangan_kerja),S(i.nilai_lembur_per_menit),N(i.waktu_mulai),l(i.waktu_selesai)):(g({label:`${x[0].code} - ${x[0].name}`,value:x[0].uuid}),b(F()),k(""),u(""),y(""),S(0),N(F()),l(F()))},[i]),t.useEffect(()=>{O()},[v,f]),t.useEffect(()=>{$<f&&l(n=>f),O()},[$]),t.useEffect(()=>{U()},[o]),a.jsxs("div",{className:"my-5 bg-white py-5 px-6 rounded-md",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Lembur Pegawai"}),a.jsxs("form",{onSubmit:n=>z(n),children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(X,{label:"Sumber Dana",optionsDataList:x,optionsLabel:["code","name"],optionsValue:"uuid",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:T,onchange:n=>{g(n)},selectName:"periode"}),a.jsx(c,{label:"Tanggal",type:"datetime-local",onchange:n=>{b(n.target.value)},others:{value:j,name:"tanggal"}}),a.jsx(c,{label:"Bukti Transaksi",type:"text",onchange:n=>{k(n.target.value)},others:{value:w,name:"buktiTransaksi"}})]}),a.jsx("div",{className:"mt-5 flex gap-x-2",children:a.jsx(c,{label:"Deskripsi Kerja",type:"text",onchange:n=>{u(n.target.value)},others:{value:p,name:"deskripsiKerja"}})}),a.jsx("div",{className:"mt-5 flex gap-x-2",children:a.jsx(c,{label:"Keterangan",type:"text",onchange:n=>{y(n.target.value)},others:{value:P,name:"keteranganKerja"}})}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(c,{label:"Nilai Lembur Per Menit",type:"text",onchange:n=>{G(n),S(n.target.value)},others:{value:v,name:"nilaiLemburPerMenit"}}),a.jsx(c,{label:"Waktu Mulai",type:"datetime-local",onchange:n=>{N(n.target.value)},others:{value:f,name:"waktuMulai"}}),a.jsx(c,{label:"Waktu Selesai",type:"datetime-local",onchange:n=>{l(n.target.value)},others:{value:$,name:"waktuSelesai"}})]}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(c,{label:"Total Jam",type:"text",addClassInput:"border-none",others:{value:s,name:"totalJam"}}),a.jsx(c,{label:"Total Menit",type:"text",addClassInput:"border-none",others:{value:B,name:"totalMenit"}}),a.jsx(c,{label:"Total Bayaran",type:"text",addClassInput:"border-none",disabled:!0,others:{value:R,name:"totalBayaran"}})]}),a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(ua,{})," Simpan"]}),i?a.jsxs("button",{type:"button",onClick:()=>r(null),className:"btn btn-sm bg-red-800 mt-4 text-white",children:[a.jsx(da,{})," Batal Edit"]}):a.jsx(a.Fragment,{})]}),a.jsx("table",{class:"table table-sm table-zebra my-6",children:a.jsx("tbody",{children:D.map(n=>a.jsxs(a.Fragment,{children:[a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("b",{children:n.deskripsi_kerja})}),a.jsx("td",{colSpan:10,children:a.jsx("p",{children:n.keterangan_kerja})})]}),a.jsxs("tr",{children:[a.jsxs("td",{children:[n.kode_akun_perkiraan_code," - ",n.kode_akun_perkiraan_name]}),a.jsx("td",{children:`${n.tanggal.split("T")[0]} ${ia(n.tanggal.split("T")[1])}`}),a.jsx("td",{children:n.bukti_transaksi}),a.jsx("td",{children:`${n.waktu_mulai.split("T")[0]} ${ia(n.waktu_mulai.split("T")[1])}`}),a.jsx("td",{children:`${n.waktu_selesai.split("T")[0]} ${ia(n.waktu_selesai.split("T")[1])}`}),a.jsx("td",{children:m(n.nilai_lembur_per_menit)}),a.jsx("td",{children:m(n.total_jam)}),a.jsx("td",{children:m(n.total_menit)}),a.jsx("td",{children:m(n.total_bayaran)}),a.jsx("td",{children:a.jsxs("div",{className:"flex gap-x-2",children:[a.jsx(Ba,{onClick:()=>W(n),className:"text-yellow-600 hover:cursor-pointer",size:12}),i?a.jsx(a.Fragment,{}):a.jsx(a.Fragment,{children:a.jsx(ca,{onClick:()=>V(n.uuid),className:"text-red-600 hover:cursor-pointer",size:12})})]})})]})]}))})})]})},Wa=({idPegawai:o,periode:d,kodeAkunList:x=[]})=>{const{data:_}=A(),[i,r]=t.useState(null),[T,g]=t.useState("0"),[j,b]=t.useState(),[w,k]=t.useState(F()),[p,u]=t.useState(),[P,y]=t.useState(),[v,S]=t.useState([]),f=async s=>{s.preventDefault(),await xa(s.target)&&oa.custom(i?`/${i.uuid}`:"",i?"PUT":"POST","",{data:{pegawai:o,periode:d,kode_akun_perkiraan:j.value,tanggal:w,bukti_transaksi:p,hadiah:P,nilai:T}}).then(h=>{J("Berhasil","Data Hadiah Berhasil Disimpan"),N(),r(null)}).catch(h=>K(h))},N=()=>{oa.custom(`/${o}/${d}/${_.tahun}`,"GET").then(s=>{S(s.data)})},$=s=>{oa.custom(`/${s}`,"DELETE").then(()=>{J("Berhasil","Data Hadiah Berhasil Dihapus"),N()}).catch(h=>K(h))},l=s=>{r(s)};return t.useEffect(()=>{i?(y(i.hadiah),b({label:`${i.kode_akun_perkiraan_code} - ${i.kode_akun_perkiraan_name}`,value:i.kode_akun_perkiraan}),u(i.bukti_transaksi),g(m(i.nilai)),k(i.tanggal)):(y(""),b({label:`${x[0].code} - ${x[0].name}`,value:x[0].uuid}),u(""),g(0),k(F()))},[i]),t.useEffect(()=>{N()},[o]),a.jsxs("div",{className:"my-5 bg-white py-5 px-6 rounded-md",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Hadiah Pegawai"}),a.jsxs("form",{onSubmit:s=>f(s),children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(X,{label:"Sumber Dana",optionsDataList:x,optionsLabel:["code","name"],optionsValue:"uuid",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:j,onchange:s=>{b(s)},selectName:"periode"}),a.jsx(c,{label:"Tanggal",type:"datetime-local",onchange:s=>{k(s.target.value)},others:{value:w,name:"tanggal"}}),a.jsx(c,{label:"Bukti Transaksi",type:"text",onchange:s=>{u(s.target.value)},others:{value:p,name:"buktiTransaksi"}}),a.jsx(c,{label:"Hadiah",type:"text",onchange:s=>{y(s.target.value)},others:{value:P,name:"hadiah"}}),a.jsx(c,{label:"Nilai",type:"text",onchange:s=>{G(s),g(s.target.value)},others:{value:T,name:"nilai"}})]}),a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(ua,{})," Simpan"]}),i?a.jsxs("button",{type:"button",onClick:()=>r(null),className:"btn btn-sm bg-red-800 mt-4 text-white",children:[a.jsx(da,{})," Batal Edit"]}):a.jsx(a.Fragment,{})]}),a.jsxs("table",{class:"table table-sm table-zebra my-6",children:[a.jsxs("thead",{className:"font-bold text-md",children:[a.jsx("th",{children:"Sumber Dana"}),a.jsx("th",{children:"Tanggal"}),a.jsx("th",{children:"Bukti Transaksi"}),a.jsx("th",{children:"Hadiah"}),a.jsx("th",{children:"Nilai"}),a.jsx("th",{children:"Aksi"})]}),a.jsx("tbody",{children:v.map(s=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsxs("td",{children:[s.kode_akun_perkiraan_code," - ",s.kode_akun_perkiraan_name]}),a.jsx("td",{children:`${s.tanggal.split("T")[0]} ${ia(s.tanggal.split("T")[1])}`}),a.jsx("td",{children:s.bukti_transaksi}),a.jsx("td",{children:s.hadiah}),a.jsx("td",{children:m(s.nilai)}),a.jsx("td",{children:a.jsxs("div",{className:"flex gap-x-2",children:[a.jsx(Ba,{onClick:()=>l(s),className:"text-yellow-600 hover:cursor-pointer",size:12}),i?a.jsx(a.Fragment,{}):a.jsx(a.Fragment,{children:a.jsx(ca,{onClick:()=>$(s.uuid),className:"text-red-600 hover:cursor-pointer",size:12})})]})})]})}))})]})]})},qa=({setPendapatanPegawaiForm:o=()=>{}})=>{const[d,x]=t.useState(),[_,i]=t.useState([]),[r,T]=t.useState(),[g,j]=t.useState(_a()[new Date().getMonth()].value),[b,w]=t.useState([]),k=()=>{Ea.custom("","GET").then(u=>{i(u.data.entry),u.data.entry.length>0&&x({label:u.data.entry[0].name,value:u.data.entry[0].uuid})}).catch(u=>K(u))},p=()=>{La.custom("/payroll").then(u=>{w(u.data)}).catch(u=>{K(u)})};return t.useEffect(()=>{k(),p()},[]),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-md shadow-2xl h-max overflow-scroll no-scrollbar relative",children:a.jsxs("div",{className:"sticky top-0 py-5 px-6 h-max bg-white w-full z-10",children:[a.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[a.jsx("h1",{className:"uppercase text-gray-600 font-bold",children:"Pendapatan Pegawai"}),a.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>o(),children:[a.jsx(da,{})," Batalkan Transaksi"]})]}),a.jsx("div",{className:"flex items-end gap-x-2",children:a.jsx(X,{label:"Pilih Pegawai",optionsDataList:_,optionsLabel:"name",optionsValue:"uuid",disabled:r,selectValue:d,onchange:u=>{x(u)},selectName:"pegawai"})}),a.jsx("div",{className:"mt-5 flex gap-x-2",children:a.jsx(Ka,{disabled:r,label:"Periode",labelTextSize:"text-sm",toggleBox:g,textSize:"text-xs",setToggleBox:j,toggleBoxList:_a()})}),r?a.jsxs("button",{className:"btn btn-sm bg-red-800 text-white",onClick:()=>T(null),children:[a.jsx(da,{})," Reset Pegawai Dan Periode"]}):a.jsxs("button",{className:"btn btn-sm bg-green-800 text-white",onClick:()=>T(d.value),children:[a.jsx(Ca,{})," Pilih Pegawai Dan Periode"]})]})}),r?a.jsxs(a.Fragment,{children:[a.jsx(Va,{periode:g,idPegawai:r,kodeAkunList:b}),a.jsx(Oa,{idPegawai:r,kodeAkunList:b,periode:g}),a.jsx(Wa,{idPegawai:r,kodeAkunList:b,periode:g})]}):a.jsx(a.Fragment,{})]})},Qa=({item:o,balanceStatus:d=!0,forPrint:x=!1})=>a.jsxs("div",{className:`flex flex-col w-full bg-white text-[13px] px-3 ${x?"":"shadow-md"}`,children:[a.jsx("div",{className:"grid grid-cols-12 sticky top-0 bg-white py-2 border-b-2",children:a.jsxs("div",{className:"p-2 col-span-9 text-black flex items-end",children:[a.jsx("div",{className:"text-[28px] font-bold",children:d?a.jsx("p",{className:`text-[45px] -ml-1 text-white px-2 rounded-md ${o.total.debet==o.total.kredit?"bg-green-900":"bg-red-900"}`,children:o.tanggal<10?`0${o.tanggal}`:o.tanggal}):a.jsx("p",{className:"text-[45px] -ml-1 text-white px-2 rounded-md bg-green-900",children:o.tanggal<10?`0${o.tanggal}`:o.tanggal})}),a.jsx("div",{className:"flex flex-col",children:a.jsxs("div",{className:"flex items-end",children:[a.jsxs("div",{className:"text-gray-900 flex flex-col justify-end px-2",children:[a.jsxs("h1",{children:[o.bulan,".",o.tahun]}),a.jsx("h2",{className:"text-[13px] font-bold",children:o.hari})]}),a.jsxs("div",{className:"flex flex-col px-2 border-l-2 border-gray-600",children:[a.jsx("h1",{className:"font-bold",children:"Total"}),a.jsxs("div",{className:"flex gap-x-4",children:[a.jsx("div",{className:"text-right",children:a.jsx("h1",{className:" text-green-900 font-bold flex flex-row",children:m(o.total.debet)})}),a.jsx("div",{className:"text-right",children:a.jsx("h1",{className:" text-red-900 font-bold",children:m(o.total.kredit)})})]})]})]})})]})}),o.buktiTransaksi.map(_=>a.jsx(a.Fragment,{children:a.jsx(Ma,{forPrint:x,item1:_,balanceStatus:!0})}))]}),de=()=>{const{data:o}=A(),[d,x]=t.useState(!1),[_,i]=t.useState(!1),[r,T]=t.useState(new Date().getMonth()),[g,j]=t.useState("Gaji"),[b,w]=t.useState(["Gaji","Tunjangan Uang","Lembur","Hadiah"]),[k,p]=t.useState([]),[u,P]=t.useState([]),[y,v]=t.useState("0"),[S,f]=t.useState("0"),N=()=>{const l=[{label:"Gaji",api:la},{label:"Tunjangan Uang",api:na},{label:"Lembur",api:ra},{label:"Hadiah",api:oa}];i(!0),l.filter(h=>h.label==g)[0].api.custom(`?bulan=${r+1}&tahun=${o.tahun}`,"GET").then(async h=>{p(B=>h.data),i(!1)}).catch(h=>{K(h)})},$=async()=>{let l=await Ga(k.map(s=>(s.bulan=r+1,s.tahun=o.tahun,s.waktu=s.waktu?s.waktu:s.tanggal.split("T")[1].replace(".000",""),s.tanggal=s.tanggal.length>2?new Date(s.tanggal).getDate():s.tanggal,s)));P(l.returnData),v(l.totalDebet),f(l.totalKredit)};return t.useEffect(()=>{$()},[k]),t.useEffect(()=>{N()},[g,r]),a.jsx(Ua,{isLoading:_,children:a.jsx("div",{children:d?a.jsx(qa,{setPendapatanPegawaiForm:()=>x(!d),setIsLoadingEvent:i}):a.jsxs(a.Fragment,{children:[a.jsx(Ja,{title:"Pendapatan Pegawai"}),a.jsxs("div",{className:"grid grid-cols-6 gap-x-2",children:[a.jsxs("div",{className:"col-span-1",children:[a.jsx(Ia,{bulan:r,setBulan:T}),a.jsx(Ra,{debet:y,kredit:S})]}),a.jsxs("div",{className:"col-span-5",children:[a.jsx("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-end shadow-2xl",children:a.jsx("div",{children:a.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{x(!0)},children:[a.jsx(Ha,{})," Tambah Transaksi"]})})}),a.jsx(Ka,{addClass:"px-4 py-3",label:"Tipe Pendapatan",setToggleBox:j,toggleBox:g,toggleBoxList:b.map(l=>({value:l,label:l}))}),a.jsx("div",{className:"flex flex-col h-full overflow-y-scroll no-scrollbar w-full rounded-md",children:u.map((l,s)=>a.jsx(Qa,{item:l,forPrint:!0},s))})]})]})]})})})};export{de as default};
