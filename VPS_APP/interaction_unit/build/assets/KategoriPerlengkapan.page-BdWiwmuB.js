import{r,j as e,b as v,h as T,A as R,s as b,k as z,az as K,n as P,R as B,u as $,o as D,e as I,p as U,i as W,a as O,F as V,q as G}from"./index-CH4D0Lt-.js";import{P as H}from"./PageTitle-DbvUOkqr.js";import{f as q,W as M}from"./Wrap-5ys34sV1.js";import{P as Y}from"./Pagination-BzIqssJ_.js";import{F as J}from"./FormInputWithLabel-DSO_Zp9u.js";import{F as Q}from"./FormSelectWithLabel-B3WnVhHo.js";import{P as X,l as Z}from"./PDFHeader-nmfnFTDc.js";import"./react-paginate-CJd_j2MB.js";import"./FormInput-S8fN4g0j.js";import"./index-BKNjMPK8.js";const E=({setAddKategoriPerlengkapanEvent:l=()=>{},kategoriPerlengkapanEdit:t,getData:i=()=>{}})=>{const[d,h]=r.useState(t!=null&&t.name?t.name:""),[u,o]=r.useState(t!=null&&t.kode_akun_perkiraan?t.kode_akun_perkiraan:""),[x,j]=r.useState([]),p=()=>{R.custom("","GET").then(n=>{if(j(n.data.entry),n.data.entry.length>0){if(t){q({editObject:t.kode_akun_perkiraan,dataList:n.data.entry,setState:o,labelKey:"name",valueKey:"uuid"});return}o({label:n.data.entry[0].name,value:n.data.entry[0].uuid})}}).catch(n=>{b(n)})},f=async()=>{await z()&&K.custom(`${t!=null&&t.uuid?`/${t.uuid}`:""}`,t?"PUT":"POST",null,{data:{name:d,kode_akun_perkiraan:u.value}}).then(()=>{t?P("Berhasil","Data berhasil diupdate"):P("Berhasil","Data berhasil disimpan"),l(),i()}).catch(n=>{b(n)})};return r.useEffect(()=>{p()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[t?"Edit":"Tambahkan"," Kategori Perlengkapan"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>l(),children:[e.jsx(v,{})," Batalkan Kategori Perlengkapan"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(J,{label:"Nama Kategori Perlengkapan",type:"text",onchange:n=>{h(n.target.value)},others:{value:d,name:"namaKategoriPerlengkapan"}}),e.jsx(Q,{label:"Kode Akun ",optionsDataList:x,optionsLabel:["code","name"],optionsDelimiter:"-",optionsLabelIsArray:!0,optionsValue:"uuid",selectValue:u,onchange:n=>{o(n)},selectName:"kodeAkunPerkiraanDaftarPerlengkapan"})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{f()},children:[e.jsx(T,{})," Simpan"]})]})})},ee=B.forwardRef((l,t)=>{var i;return e.jsxs("div",{ref:t,children:[e.jsx(X,{bulan:l.bulan,tahun:l.tahun,title:"Daftar Kategori Perlengkapan"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Kategori Perlengkapan"})]})}),e.jsx("tbody",{children:(i=l==null?void 0:l.data)==null?void 0:i.map((d,h)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsx("td",{children:d.name})]},h)}))})]})]})}),he=()=>{const l=$(),{data:t}=l,[i,d]=r.useState([]),[h,u]=r.useState(!1),[o,x]=r.useState(!1),[j,p]=r.useState({name:""}),[f,n]=r.useState(!1),[N,y]=r.useState(""),w=r.useRef(),F=Z.useReactToPrint({content:()=>w.current}),[m,k]=r.useState({page:1,size:10,count:118,lastPage:12}),c=(s="")=>{s==""&&y(s),u(!0),K.custom(`?search=${s}&page=${m.page}&size=${m.size}`,"GET").then(a=>{var g,S;n(s.length<1),d((g=a==null?void 0:a.data)==null?void 0:g.entry),k((S=a==null?void 0:a.data)==null?void 0:S.pagination),u(!1)}).catch(a=>{b(a)})},C=s=>{let a=i[s];p(a),x(!o)},_=async s=>{if(await G("Hapus","Yakin ingin hapus data ini ?")){let a=i[s];K.custom(`/${a.uuid}`,"DELETE").then(()=>{P("Berhasil","Data berhasil dihapus"),c()}).catch(g=>{b(g)})}},A=({selected:s})=>{let a=m;a.page=s+1,k(a),c()},L=s=>{let a=m;a.size=s,a.page=1,k(a),c()};return r.useEffect(()=>{c()},[]),e.jsx(M,{isLoading:h,children:e.jsxs("div",{children:[e.jsx(H,{title:"Kategori Perlengkapan"}),o?e.jsx(E,{setAddKategoriPerlengkapanEvent:()=>x(!1),getData:c,kategoriPerlengkapanEdit:j}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:N,onChange:s=>y(s.target.value)}),f?e.jsx(D,{onClick:()=>{c(N)},className:"cursor-pointer"}):e.jsx(v,{onClick:()=>c(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{p(null),x(!o)},children:[e.jsx(I,{})," Tambah Kategori Perlengkapan"]}),e.jsx("div",{className:"hidden",children:e.jsx(ee,{data:i,ref:w,bulan:U(new Date().getMonth()),tahun:t.tahun})}),e.jsxs("button",{onClick:F,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(W,{})," Cetak Kategori Perlengkapan"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Kategori Perlengkapan"}),e.jsx("th",{children:"Kode Akun Perkiraan"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:i==null?void 0:i.map((s,a)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[a+1,"."]}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.kode_akun_perkiraan_name}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(O,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{C(a)}}),e.jsx(V,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{_(a)}})]})]},a)}))})]})}),e.jsx(Y,{paginateUpdatePage:A,paginate:m,setSize:L})]})]})})};export{he as default};
