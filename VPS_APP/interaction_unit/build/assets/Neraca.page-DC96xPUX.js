import{j as a,y as P,b as R,R as E,u as p,r as o,p as C,i as _,z as h,s as j}from"./index-BFtBgOrg.js";import{W as S}from"./Wrap-Dk-wg8kL.js";import{P as F}from"./PageTitle-Hc-YSVDI.js";import{B as A}from"./BulanSelectedListCard-CzSL4UYq.js";import{R as n}from"./RowCard-BJd8l1b7.js";import{p as b,a as m}from"./number.helper-efe0YCx6.js";import{P as K,l as B}from"./PDFHeader-BGA35-Z9.js";import"./index-BKNjMPK8.js";const g=({aktiva:t,pasiva:s,forPrint:d})=>a.jsx(a.Fragment,{children:a.jsxs("div",{children:[a.jsxs("div",{className:`stats py-4 rounded-md rounded-b-none ${d?"stats-horizontal":"shadow-2xl stats-vertical"} bg-white text-gray-900 w-full`,children:[a.jsxs("div",{className:"stat",children:[a.jsx("div",{className:"stat-title text-gray-900 font-bold",children:"Aktiva"}),a.jsxs("div",{className:"stat-value text-sm text-green-900",children:["Rp. ",b(t)]})]}),a.jsxs("div",{className:"stat",children:[a.jsx("div",{className:"stat-title text-gray-900 font-bold",children:"Pasiva"}),a.jsxs("div",{className:"stat-value text-sm text-red-900",children:["Rp. ",b(s)]})]}),a.jsxs("div",{className:"stat pb-0",children:[a.jsx("div",{className:"stat-title text-gray-900 font-bold",children:"Difference"}),a.jsxs("div",{className:"stat-value text-sm text-blue-900",children:["Rp. ",b(Math.abs(m(s)-m(t)))]})]})]}),!d&&a.jsx("div",{className:"mt-3",children:m(t)==m(s)?a.jsxs("div",{className:"text-sm text-white font-bold bg-green-900 py-2 -mt-3 flex items-center justify-center rounded-md rounded-t-none",children:[a.jsx(P,{className:"mr-2"})," Seimbang"]}):a.jsxs("div",{className:"text-sm text-white font-bold bg-red-900 py-2 -mt-3 flex items-center justify-center rounded-md rounded-t-none",children:[a.jsx(R,{className:"mr-2"})," Tidak Seimbang"]})})]})}),V=E.forwardRef((t,s)=>{var d,x,r,i;return a.jsxs("div",{ref:s,children:[a.jsx(K,{bulan:t.bulan,tahun:t.tahun,title:"Neraca"}),a.jsx(g,{aktiva:(x=(d=t==null?void 0:t.data)==null?void 0:d.neraca)==null?void 0:x.aktiva,pasiva:(i=(r=t==null?void 0:t.data)==null?void 0:r.neraca)==null?void 0:i.pasiva,forPrint:!0}),Object.keys(t.data).length>0?a.jsxs(a.Fragment,{children:[a.jsx(n,{dataList:t.data.harta,title:"Aset",totalTitle:"Total Asset",forPrint:!0}),a.jsx(n,{dataList:t.data.utang,title:"Kewajiban",totalTitle:"Total Kewajiban",forPrint:!0}),a.jsx(n,{dataList:t.data.modal,title:"Ekuitas",totalTitle:"Total Ekuitas",forPrint:!0})]}):a.jsx(a.Fragment,{})]})}),W=()=>{const t=p(),{data:s,setData:d}=t,[x,r]=o.useState(!1),[i,T]=o.useState(new Date().getMonth()),[l,N]=o.useState([]),[u,w]=o.useState(!1),v=o.useRef(),L=B.useReactToPrint({content:()=>v.current}),k=()=>{r(!0),h.custom(`/${i+1}/${s.tahun}`,"GET").then(e=>{let c=s;c.dashboard.overview[i].neraca=e==null?void 0:e.data,c.dashboard.overview[i].perubahanModal=null,d(c),N(e==null?void 0:e.data),r(!1)}).catch(e=>{j(e)})},f=()=>{r(!0),h.custom(`/validasi_status/${i+1}/${s.tahun}`,"GET").then(e=>{w(e),r(!1);let c=s;c.dashboard.overview[i].perubahanModal=null,d(c)}).catch(e=>{j(e)})},y=()=>{r(!0),h.custom("/validasi",u.validasi?"DELETE":"POST",null,{data:{bulan:i+1,tahun:s.tahun}}).then(e=>{let c=s;c.dashboard.overview[i].perubahanModal=null,d(c),f()}).catch(e=>{j(e),r(!1)})};return o.useEffect(()=>{k(),f()},[i]),a.jsx(S,{isLoading:x,children:a.jsxs("div",{children:[a.jsx(F,{title:"neraca"}),a.jsxs("div",{className:"grid grid-cols-6",children:[a.jsxs("div",{className:"col-span-1",children:[a.jsx(A,{bulan:i,setBulan:T}),Object.keys(l).length>0?a.jsx(g,{aktiva:l.neraca.aktiva,pasiva:l.neraca.pasiva}):a.jsx(a.Fragment,{}),a.jsxs("div",{className:`${u.validasi?"bg-blue-900":"bg-red-900"} text-white mt-4 rounded-md p-5 shadow-2xl`,children:[a.jsxs("h1",{className:"text-md font-bold",children:["Neraca ",u.validasi?"Telah Di Validasi":"Belum Di Validasi"]}),a.jsx("button",{onClick:y,className:"btn btn-sm mt-2",children:u.validasi?"Batalkan Validasi":"Validasi"})]}),a.jsx("div",{className:"hidden",children:a.jsx(V,{data:l,ref:v,bulan:C(i),tahun:s.tahun})}),a.jsxs("button",{onClick:L,className:"btn btn-sm bg-red-600 hover:bg-red-600 mt-2 text-white border-red-600",children:[a.jsx(_,{})," Cetak Neraca"]})]}),a.jsx("div",{className:"col-span-5",children:a.jsx("div",{className:"h-[65vh] pl-2",children:a.jsx("div",{className:"flex flex-col h-full overflow-y-scroll no-scrollbar w-full rounded-md",children:Object.keys(l).length>0?a.jsxs(a.Fragment,{children:[a.jsx(n,{dataList:l.aset_lancar,title:"Aset Lancar",totalTitle:"Total Aset Lancar"}),a.jsx(n,{dataList:l.aset_tetap,title:"Aset Tetap",totalTitle:"Total Aset Tetap"}),a.jsx(n,{dataList:l.aset_lain_lain,title:"Aset Lain - Lain",totalTitle:"Total Aset Lain - Lain"}),a.jsx(n,{dataList:l.kewajiban_lancar,title:"Kewajiban Lancar",totalTitle:"Total Kewajiban Lancar"}),a.jsx(n,{dataList:l.kewajiban_jangka_panjang,title:"Kewajiban Lancar",totalTitle:"Total Kewajiban Lancar"}),a.jsx(n,{dataList:l.kewajiban_lain_lain,title:"Kewajiban Lain - Lain",totalTitle:"Total Kewajiban Lain - Lain"}),a.jsx(n,{dataList:l.ekuitas,title:"Ekuitas",totalTitle:"Total Ekuitas"})]}):a.jsx(a.Fragment,{})})})})]})]})})};export{W as default};
