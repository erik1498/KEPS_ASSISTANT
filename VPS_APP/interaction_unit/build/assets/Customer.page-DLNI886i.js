import{r as l,j as e,b as R,h as L,k as W,$ as P,n as _,s as F,R as z,u as A,o as B,e as D,p as I,i as U,a as V,F as O,q}from"./index-QngEOzN_.js";import{P as G}from"./PageTitle-ByHsc4p5.js";import{k as M,W as Y}from"./Wrap-BCfnb039.js";import{P as J}from"./Pagination-D3WNYDRv.js";import{F as m}from"./FormInputWithLabel-Bx4cKmcq.js";import{a as T}from"./actionEvent.helper-CSfRBgS8.js";import{F as Q}from"./FormSelectWithLabel-BCV4i4Bv.js";import{P as X,l as Z}from"./PDFHeader-2lYxv13s.js";import"./number.helper-_FlTjox4.js";import"./FormInput-D113t21y.js";import"./index-BKNjMPK8.js";const E=({setAddCustomerEvent:r=()=>{},customerEdit:a,getData:o=()=>{}})=>{const[x,c]=l.useState(a!=null&&a.name?a.name:""),[p,g]=l.useState(a!=null&&a.code?a.code:""),[d,w]=l.useState(a!=null&&a.npwp?a.npwp:""),[j,y]=l.useState(a!=null&&a.alamat_rumah?a.alamat_rumah:""),[C,N]=l.useState(a!=null&&a.alamat_kantor?a.alamat_kantor:""),[b,f]=l.useState(a!=null&&a.no_telp?a.no_telp:""),[v,i]=l.useState(a!=null&&a.no_hp?a.no_hp:""),[u,h]=l.useState(a!=null&&a.kode_harga?{label:`Harga ${a.kode_harga}`,value:a.kode_harga}:""),S=async()=>{await W()&&P.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{name:x,code:p,npwp:d,alamat_rumah:j,alamat_kantor:C,no_telp:b,no_hp:v,kode_harga:`${u.value}`}}).then(()=>{a?_("Berhasil","Data berhasil diupdate"):_("Berhasil","Data berhasil disimpan"),r(),o()}).catch(s=>{F(s)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Customer"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>r(),children:[e.jsx(R,{})," Batalkan Customer"]})]}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(m,{label:"Nama Customer",type:"text",onchange:s=>{c(s.target.value)},others:{value:x,name:"namaCustomer"}})}),e.jsxs("div",{className:"mt-5 flex gap-x-2",children:[e.jsx(m,{label:"Kode Customer",type:"text",onchange:s=>{g(s.target.value)},others:{value:p,name:"kodeCustomer"}}),e.jsx(m,{label:"NPWP Customer",type:"text",onchange:s=>{T(s),w(s.target.value)},others:{value:d,name:"NPWPCustomer"}})]}),e.jsxs("div",{className:"mt-5 flex gap-x-2",children:[e.jsx(m,{label:"Alamat Rumah",type:"text",onchange:s=>{y(s.target.value)},others:{value:j,name:"alamatRumahCustomer"}}),e.jsx(m,{label:"Alamat Kantor",type:"text",onchange:s=>{N(s.target.value)},others:{value:C,name:"alamatKantorCustomer"}}),e.jsx(m,{label:"Nomor Telepon",type:"text",onchange:s=>{T(s),f(s.target.value)},others:{value:b,name:"nomorTeleponCustomer"}}),e.jsx(m,{label:"Nomor Handphone",type:"text",onchange:s=>{i(s.target.value)},others:{value:v,name:"nomorHandphoneCustomer"}})]}),e.jsx("div",{className:"mt-5 flex gap-x-2",children:e.jsx(Q,{label:"Kode Harga",optionsDataList:M,optionsLabel:"label",optionsValue:"value",selectValue:u,onchange:s=>{h(s)},selectName:"kodeHargaCustomer"})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{S()},children:[e.jsx(L,{})," Simpan"]})]})})},ee=z.forwardRef((r,a)=>{var o;return e.jsxs("div",{ref:a,children:[e.jsx(X,{bulan:r.bulan,tahun:r.tahun,title:"Customer"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Customer"})]})}),e.jsx("tbody",{children:(o=r==null?void 0:r.data)==null?void 0:o.map((x,c)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsx("td",{children:x.name})]},c)}))})]})]})}),ce=()=>{const r=A(),{data:a}=r,[o,x]=l.useState([]),[c,p]=l.useState(!1),[g,d]=l.useState(!1),[w,j]=l.useState({name:""}),[y,C]=l.useState(!1),[N,b]=l.useState(""),f=l.useRef(),v=Z.useReactToPrint({content:()=>f.current}),[i,u]=l.useState({page:1,size:10,count:118,lastPage:12}),h=(n="")=>{n==""&&b(n),p(!0),P.custom(`?search=${n}&page=${i.page}&size=${i.size}`,"GET").then(t=>{var k,H;C(n.length<1),x((k=t==null?void 0:t.data)==null?void 0:k.entry),u((H=t==null?void 0:t.data)==null?void 0:H.pagination),p(!1)}).catch(t=>{F(t)})},S=n=>{let t=o[n];j(t),d(!g)},s=async n=>{if(await q("Hapus","Yakin ingin hapus data ini ?")){let t=o[n];P.custom(`/${t.uuid}`,"DELETE").then(()=>{_("Berhasil","Data berhasil dihapus"),h()}).catch(k=>{F(k)})}},K=({selected:n})=>{let t=i;t.page=n+1,u(t),h()},$=n=>{let t=i;t.size=n,t.page=1,u(t),h()};return l.useEffect(()=>{h()},[]),e.jsx(Y,{isLoading:c,children:e.jsxs("div",{children:[e.jsx(G,{title:"Customer"}),g?e.jsx(E,{setAddCustomerEvent:()=>d(!1),getData:h,customerEdit:w}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:N,onChange:n=>b(n.target.value)}),y?e.jsx(B,{onClick:()=>{h(N)},className:"cursor-pointer"}):e.jsx(R,{onClick:()=>h(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{j(null),d(!g)},children:[e.jsx(D,{})," Tambah Customer"]}),e.jsx("div",{className:"hidden",children:e.jsx(ee,{data:o,ref:f,bulan:I(new Date().getMonth()),tahun:a.tahun})}),e.jsxs("button",{onClick:v,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(U,{})," Cetak Customer"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Customer"}),e.jsx("th",{children:"Kode Customer"}),e.jsx("th",{children:"Kode Harga"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:o==null?void 0:o.map((n,t)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[t+1,"."]}),e.jsx("td",{children:n.name}),e.jsx("td",{children:n.code}),e.jsxs("td",{children:["Harga ",n.kode_harga]}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(V,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{S(t)}}),e.jsx(O,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{s(t)}})]})]},t)}))})]})}),e.jsx(J,{paginateUpdatePage:K,paginate:i,setSize:$})]})]})})};export{ce as default};
