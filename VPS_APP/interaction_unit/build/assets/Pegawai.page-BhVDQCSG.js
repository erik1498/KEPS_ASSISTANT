import{r as n,g as ea,ap as D,aq as z,ar as J,j as a,d as G,Q as j,m as ta,o as sa,a3 as H,v as B,t as P,ag as na,as as W,ah as la,ak as oa,R as ra,w as ca,W as ua,x as ia,y as ha,l as ma,z as xa,n as ga,b as ba,F as ja,D as Pa}from"./index-CfwrrJQa.js";import{P as da}from"./Pagination-CnRaeqpv.js";import{F as u}from"./FormInputWithLabel-DbUvyxQO.js";import{a as A}from"./actionEvent.helper-BON31Gzv.js";import{l as va}from"./index-CJm1lXJA.js";import{P as Na}from"./PDFHeader-BhpRjChz.js";import"./react-paginate-Dg6Wnb0G.js";import"./index-BKNjMPK8.js";const ya=({setAddPegawaiEvent:r=()=>{},pegawaiEdit:e,getData:o=()=>{}})=>{const[h,m]=n.useState(e!=null&&e.name?e.name:""),[d,v]=n.useState(e!=null&&e.nip?e.nip:""),[x,C]=n.useState(e!=null&&e.nik?e.nik:""),[N,p]=n.useState(e!=null&&e.npwp?e.npwp:""),[S,f]=n.useState(e!=null&&e.tempat_lahir?e.tempat_lahir:""),[y,L]=n.useState(e!=null&&e.tanggal_lahir?e.tanggal_lahir:ea()),[k,i]=n.useState(e!=null&&e.alamat?e.alamat:""),[g,c]=n.useState(e!=null&&e.no_hp?e.no_hp:""),[_,F]=n.useState(e!=null&&e.jenis_kelamin?{label:e.jenis_kelamin==0?"Perempuan":"Laki - Laki",value:e.jenis_kelamin}:{label:D[0].label,value:D[0].value}),[T,V]=n.useState(e!=null&&e.agama?{label:e.agama,value:e.agama}:{label:z[0].label,value:z[0].value}),[l,s]=n.useState(e!=null&&e.divisi?e.divisi:""),[b,K]=n.useState([]),[O,I]=n.useState(e!=null&&e.jabatan?e.jabatan:""),[w,q]=n.useState([]),[U,R]=n.useState(),[M,Q]=n.useState([]),[$,Y]=n.useState(e!=null&&e.status_kerja?{label:e.status_kerja,value:e.status_kerja}:{label:J[0].label,value:J[0].value}),X=async()=>{await sa()&&H.custom(`${e!=null&&e.uuid?`/${e.uuid}`:""}`,e?"PUT":"POST",null,{data:{name:h,nip:d,nik:x,npwp:N,tempat_lahir:S,tanggal_lahir:y,alamat:k,no_hp:g,jenis_kelamin:_.value,agama:T.value,divisi:l.value,jabatan:O.value,status_tanggungan:U.value,status_kerja:$.value}}).then(()=>{e?B("Berhasil","Data berhasil diupdate"):B("Berhasil","Data berhasil disimpan"),r(),o()}).catch(t=>{P(t)})},Z=()=>{na.custom("","GET").then(t=>{if(K(t.data.entry),e){W({editObject:e.divisi,dataList:t.data.entry,setState:s,labelKey:"name",valueKey:"uuid"});return}t.data.entry.length>0&&s({label:t.data.entry[0].name,value:t.data.entry[0].uuid})}).catch(t=>{P(t)})},E=()=>{la.custom("","GET").then(t=>{if(q(t.data.entry),e){W({editObject:e.jabatan,dataList:t.data.entry,setState:I,labelKey:"name",valueKey:"uuid"});return}t.data.entry.length>0&&I({label:t.data.entry[0].name,value:t.data.entry[0].uuid})}).catch(t=>{P(t)})},aa=()=>{oa.custom("","GET").then(t=>{if(Q(t.data.entry),t.data.entry.length>0){if(e){W({editObject:e.status_tanggungan,dataList:t.data.entry,setState:R,labelKey:"name",valueKey:"uuid"});return}R({label:t.data.entry[0].name,value:t.data.entry[0].uuid})}}).catch(t=>{P(t)})};return n.useEffect(()=>{Z(),E(),aa()},[]),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[a.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[a.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[e?"Edit":"Tambahkan"," Pegawai"]}),a.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>r(),children:[a.jsx(G,{})," Batalkan Pegawai"]})]}),a.jsx("div",{className:"flex gap-x-2",children:a.jsx(u,{label:"Nama Pegawai",type:"text",onchange:t=>{m(t.target.value)},others:{value:h,name:"namaPegawai"}})}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(u,{label:"NIP Pegawai",type:"text",onchange:t=>{A(t),v(t.target.value)},others:{value:d,name:"NIPPegawai"}}),a.jsx(u,{label:"NIK Pegawai",type:"text",onchange:t=>{A(t),C(t.target.value)},others:{value:x,name:"NIKPegawai"}}),a.jsx(u,{label:"NPWP Pegawai",type:"text",onchange:t=>{A(t),p(t.target.value)},others:{value:N,name:"NPWPPegawai"}})]}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(u,{label:"Tempat Lahir",type:"text",onchange:t=>{f(t.target.value)},others:{value:S,name:"tempatLahirPegawai"}}),a.jsx(u,{label:"Tanggal Lahir",type:"date",onchange:t=>{L(t.target.value)},others:{value:y,name:"tanggalLahirPegawai"}}),a.jsx(u,{label:"Alamat",type:"text",onchange:t=>{i(t.target.value)},others:{value:k,name:"alamatPegawai"}}),a.jsx(u,{label:"Nomor Handphone",type:"text",onchange:t=>{c(t.target.value)},others:{value:g,name:"nomorHandphonePegawai"}})]}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(j,{label:"Jenis Kelamin",optionsDataList:D,optionsLabel:"label",optionsValue:"value",selectValue:_,onchange:t=>{F(t)},selectName:"jenisKelaminPegawai"}),a.jsx(j,{label:"Agama",optionsDataList:z,optionsLabel:"label",optionsValue:"value",selectValue:T,onchange:t=>{V(t)},selectName:"agamaPegawai"}),a.jsx(j,{label:"Divisi",optionsDataList:b,optionsLabel:"name",optionsValue:"uuid",selectValue:l,onchange:t=>{s(t)},selectName:"divisiPegawai"}),a.jsx(j,{label:"Jabatan",optionsDataList:w,optionsLabel:"name",optionsValue:"uuid",selectValue:O,onchange:t=>{I(t)},selectName:"jabatanPegawai"})]}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(j,{label:"Status Tanggungan",optionsDataList:M,optionsLabel:"name",optionsValue:"uuid",selectValue:U,onchange:t=>{R(t)},selectName:"statusTanggunganPegawai"}),a.jsx(j,{label:"Status Kerja",optionsDataList:J,optionsLabel:"label",optionsValue:"value",selectValue:$,onchange:t=>{Y(t)},selectName:"statusKerjaPegawai"})]}),a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{X()},children:[a.jsx(ta,{})," Simpan"]})]})})},Sa=ra.forwardRef((r,e)=>{var o;return a.jsxs("div",{ref:e,children:[a.jsx(Na,{bulan:r.bulan,tahun:r.tahun,title:"Pegawai"}),a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[a.jsx("th",{width:12,children:"No"}),a.jsx("th",{children:"Nama Pegawai"})]})}),a.jsx("tbody",{children:(o=r==null?void 0:r.data)==null?void 0:o.map((h,m)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsx("td",{children:m+1}),a.jsx("td",{children:h.name})]},m)}))})]})]})}),Fa=()=>{const r=ca(),{data:e}=r,[o,h]=n.useState([]),[m,d]=n.useState(!1),[v,x]=n.useState(!1),[C,N]=n.useState({name:""}),[p,S]=n.useState(!1),[f,y]=n.useState(""),L=n.useRef(),k=va.useReactToPrint({content:()=>L.current}),[i,g]=n.useState({page:1,size:10,count:118,lastPage:12}),c=(l="")=>{l==""&&y(l),d(!0),H.custom(`?search=${l}&page=${i.page}&size=${i.size}`,"GET").then(s=>{var b,K;S(l.length<1),h((b=s==null?void 0:s.data)==null?void 0:b.entry),g((K=s==null?void 0:s.data)==null?void 0:K.pagination),d(!1)}).catch(s=>{P(s)})},_=l=>{let s=o[l];N(s),x(!v)},F=async l=>{if(await Pa("Hapus","Yakin ingin hapus data ini ?")){let s=o[l];H.custom(`/${s.uuid}`,"DELETE").then(()=>{B("Berhasil","Data berhasil dihapus"),c()}).catch(b=>{P(b)})}},T=({selected:l})=>{let s=i;s.page=l+1,g(s),c()},V=l=>{let s=i;s.size=l,s.page=1,g(s),c()};return n.useEffect(()=>{c()},[]),a.jsx(ua,{isLoading:m,children:a.jsxs("div",{children:[a.jsx(ia,{title:"Pegawai"}),v?a.jsx(ya,{setAddPegawaiEvent:()=>x(!1),getData:c,pegawaiEdit:C}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[a.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[a.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:f,onChange:l=>y(l.target.value)}),p?a.jsx(ha,{onClick:()=>{c(f)},className:"cursor-pointer"}):a.jsx(G,{onClick:()=>c(""),className:"cursor-pointer"})]}),a.jsxs("div",{className:"flex gap-x-2 items-center",children:[a.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{N(null),x(!v)},children:[a.jsx(ma,{})," Tambah Pegawai"]}),a.jsx("div",{className:"hidden",children:a.jsx(Sa,{data:o,ref:L,bulan:xa(new Date().getMonth()),tahun:e.tahun})}),a.jsxs("button",{onClick:k,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[a.jsx(ga,{})," Cetak Pegawai"]})]})]}),a.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[a.jsx("th",{width:12,children:"No"}),a.jsx("th",{children:"Nama Pegawai"}),a.jsx("th",{children:"Divisi"}),a.jsx("th",{children:"Jabatan"}),a.jsx("th",{children:"Status Tanggungan"}),a.jsx("th",{children:"Status Kerja"}),a.jsx("th",{children:"Aksi"})]})}),a.jsx("tbody",{children:o==null?void 0:o.map((l,s)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsxs("td",{children:[s+1,"."]}),a.jsx("td",{children:l.name}),a.jsx("td",{children:l.divisi_name}),a.jsx("td",{children:l.jabatan_name}),a.jsx("td",{children:l.status_tanggungan_name}),a.jsx("td",{children:l.status_kerja}),a.jsxs("td",{className:"flex gap-x-2",children:[a.jsx(ba,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{_(s)}}),a.jsx(ja,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{F(s)}})]})]},s)}))})]})}),a.jsx(da,{paginateUpdatePage:T,paginate:i,setSize:V})]})]})})};export{Fa as default};
