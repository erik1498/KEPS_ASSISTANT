import{j as a,r as c,W as C,x as P,Q as S,d as R,M as T,b_ as w,p as j,f as E,bK as u,t as L}from"./index-3gvnSE_i.js";const g=({item:o,checkedKey:p,updateCheckBox:l=()=>{}})=>a.jsx(a.Fragment,{children:a.jsx("input",{type:"checkbox",checked:o[p],className:"checkbox checkbox-sm",onChange:l})}),G=()=>{const[o,p]=c.useState(!1),[l,b]=c.useState({check:!1}),[i,h]=c.useState([]),[N,_]=c.useState([]),[n,x]=c.useState([]),[t,m]=c.useState({label:null,value:null}),f=()=>{m(e=>null),u.custom("","GET").then(e=>{_(e.data.entry),e.data.entry.length>0&&m(s=>({label:e.data.entry[0].nomor_faktur_penjualan_barang,value:e.data.entry[0].uuid}))}).catch(e=>L(e))},k=()=>{u.custom(`/rincian_pesanan_penjualan_barang_by_faktur/${t==null?void 0:t.value}`,"GET").then(e=>{x(s=>{var r;return(r=e==null?void 0:e.data)==null?void 0:r.map(d=>(d.check=l==null?void 0:l.check,d))})})},v=()=>{h(e=>[]),u.custom(`/rincian_pengiriman_barang_by_faktur/${t==null?void 0:t.value}`,"POST",null,{data:{rincian_pesanan_penjualan_barang_list:n.filter(e=>e.check==!0).map(e=>e.uuid)}}).then(e=>{h(s=>e.data)})},y=e=>{const s=n==null?void 0:n.findIndex(r=>r.uuid==e.uuid);x(r=>r=r.map((d,B)=>(B==s&&(d.check=!d.check),d)))},F=()=>{b(e=>e=!e)};return c.useEffect(()=>{x(e=>e=e.map(s=>(s.check=!l,s)))},[l]),c.useEffect(()=>{f()},[]),a.jsx(C,{isLoading:o,children:a.jsxs("div",{children:[a.jsx(P,{title:"Laporan Pengiriman Barang"}),a.jsxs("div",{className:"grid grid-cols-12",children:[a.jsx("div",{className:"col-span-12",children:a.jsxs("div",{className:"bg-white py-6 px-6 rounded-t-md",children:[a.jsx("div",{className:"flex items-end gap-x-2",children:a.jsx(S,{label:"Faktur Penjualan Barang",optionsDataList:N,optionsLabel:"nomor_faktur_penjualan_barang",optionsValue:"uuid",disabled:(n==null?void 0:n.length)>0,selectValue:t,onchange:e=>{m(e)},selectName:"fakturPenjualanBarang"})}),(n==null?void 0:n.length)>0?a.jsx(a.Fragment,{children:a.jsxs("button",{className:"btn mt-3 btn-sm bg-red-800 text-white",onClick:()=>{x(e=>[]),h(e=>[])},children:[a.jsx(R,{})," Reset Faktur"]})}):a.jsx(a.Fragment,{children:a.jsxs("button",{className:"btn mt-3 btn-sm bg-green-800 text-white",onClick:()=>k(),children:[a.jsx(T,{})," Pilih Faktur"]})})]})}),a.jsx("div",{className:"col-span-12 h-[80vh] overflow-y-scroll no-scrollbar",children:a.jsxs("div",{className:"bg-white rounded-b-md px-6 py-3",children:[a.jsxs("div",{className:"flex justify-between pb-5",children:[a.jsx("h1",{className:"font-bold text-md pb-3",children:"Pilih Barang Pesanan"}),a.jsxs("button",{className:"btn btn-sm bg-blue-800 text-white",onClick:()=>v(),children:[a.jsx(w,{})," Lihat Riwayat Pengiriman"]})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 py-3 border-b-2",children:[a.jsx("div",{className:"col-span-1 flex justify-center",children:a.jsx("p",{className:"text-xs font-bold",children:a.jsx(g,{item:l,checkedKey:"check",updateCheckBox:()=>F()})})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs font-bold",children:"Nama / Kode Barang"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs font-bold",children:"Satuan Barang"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs font-bold",children:"Gudang"})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{className:"text-xs font-bold",children:"Jumlah Barang"})})]}),n.map(e=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 py-2 items-center",children:[a.jsx("div",{className:"col-span-1 flex justify-center",children:a.jsx(g,{item:e,checkedKey:"check",updateCheckBox:()=>{y(e)}})}),a.jsxs("div",{className:"col-span-3",children:[a.jsx("p",{className:"text-xs",children:e.daftar_barang_name}),a.jsx("p",{className:"text-xs",children:e.kategori_harga_barang_kode_barang})]}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs",children:e.satuan_barang_name})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs",children:e.daftar_gudang_name})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{className:"text-xs",children:j(e.jumlah)})})]}),(i==null?void 0:i.filter(s=>s.rincian_pesanan_penjualan_barang==e.uuid).length)>0?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 gap-x-2 border-y-2 py-1 border-gray-200 items-center",children:[a.jsx("div",{className:"col-span-1 flex justify-center"}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs font-bold",children:"Tanggal Pengiriman"})}),a.jsx("div",{className:"col-span-6",children:a.jsx("p",{className:"text-xs font-bold",children:"Nomor Surat Jalan"})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{className:"text-xs font-bold",children:"Dikirim"})})]})}):a.jsx(a.Fragment,{}),i==null?void 0:i.filter(s=>s.rincian_pesanan_penjualan_barang==e.uuid).map(s=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"grid grid-cols-12 bg-gray-100 gap-x-2 py-2 items-center",children:[a.jsx("div",{className:"col-span-1 flex justify-center"}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs",children:E(s.tanggal)})}),a.jsx("div",{className:"col-span-6",children:a.jsx("p",{className:"text-xs",children:s.nomor_surat_jalan})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{className:"text-xs",children:j(s.jumlah)})})]})}))]}))]})})]})]})})};export{G as default};
