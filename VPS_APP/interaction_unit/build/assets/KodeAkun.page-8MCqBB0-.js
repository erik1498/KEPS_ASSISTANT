import{r as n,O as V,j as e,d as C,Q as W,T as D,S as L,U,m as I,o as O,V as v,v as w,t as S,R as k,w as G,W as M,x as Q,y as Y,l as q,z as J,n as X,b as Z,F as A,D as E}from"./index-w4WRH1zx.js";import{P as ee}from"./Pagination-hXZ8aV_7.js";import{F as B}from"./FormInputWithLabel-KhAr-6m5.js";import{a as ae}from"./actionEvent.helper-DeauyOY9.js";import{T as P}from"./ToggleBox-Bjdg9-A4.js";import{P as se,l as te}from"./PDFHeader-jGZBZNfE.js";import"./react-paginate-DlRX8p9z.js";import"./index-BKNjMPK8.js";const ne=({setAddKodeAkunEvent:i=()=>{},kodeAkunEdit:a,getData:o=()=>{}})=>{const[l,p]=n.useState(a!=null&&a.name?a.name:""),[u,b]=n.useState(a!=null&&a.code?a.code:""),[m,d]=n.useState(V()),[y,T]=n.useState(a!=null&&a.type_transaksi_kas_bank?a==null?void 0:a.type_transaksi_kas_bank:0),[_,K]=n.useState(a!=null&&a.type_transaksi_payroll?a==null?void 0:a.type_transaksi_payroll:0),[g,f]=n.useState(a!=null&&a.type_transaksi_pembelian_aset_dan_perlengkapan?a==null?void 0:a.type_transaksi_pembelian_aset_dan_perlengkapan:0),[j,N]=n.useState({label:a!=null&&a.type?a.type:"Harta",value:a!=null&&a.type?a.type:"Harta"}),x=async()=>{await O()&&v.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{type:j.value,name:l,code:u,type_transaksi_kas_bank:y,type_transaksi_payroll:_,type_transaksi_pembelian_aset_dan_perlengkapan:g}}).then(()=>{a?w("Berhasil","Data berhasil diupdate"):w("Berhasil","Data berhasil disimpan"),i(),o()}).catch(r=>{S(r)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Kode Akun"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>i(),children:[e.jsx(C,{})," Batalkan Kode Akun"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(B,{label:"Nama Akun",type:"text",onchange:r=>{p(r.target.value)},others:{value:l,name:"namaAkun"}}),e.jsx(B,{label:"Kode Akun",type:"text",onchange:r=>{ae(r),b(r.target.value)},others:{value:u,name:"kodeAkun"}}),e.jsx(W,{label:"Tipe Akun",onchange:r=>{N(r)},optionsDataList:m,optionsLabel:"name",optionsValue:"name",selectName:"kodeAkunType",selectValue:j})]}),e.jsx("div",{className:"mt-5 flex gap-x-2",children:e.jsx(P,{label:"Tipe Untuk Transaksi Kas Dan Bank",setToggleBox:T,toggleBox:y,toggleBoxList:D})}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(P,{label:"Tipe Untuk Transaksi Payroll",setToggleBox:K,toggleBox:_,toggleBoxList:L})}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(P,{label:"Tipe Untuk Transaksi Pembelian Aset Dan Perlengkapan",setToggleBox:f,toggleBox:g,toggleBoxList:U})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{x()},children:[e.jsx(I,{})," Simpan"]})]})})},le=k.forwardRef((i,a)=>{var o;return e.jsxs("div",{ref:a,children:[e.jsx(se,{bulan:i.bulan,tahun:i.tahun,title:"Kode Akun"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Kode Akun"}),e.jsx("th",{children:"Tipe Akun"}),e.jsx("th",{children:"Nama Akun"})]})}),e.jsx("tbody",{children:(o=i==null?void 0:i.data)==null?void 0:o.map((l,p)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:p+1}),e.jsx("td",{children:l.code}),e.jsx("td",{children:l.type}),e.jsx("td",{children:l.name})]},p)}))})]})]})}),ge=()=>{const i=G(),{_getDataKodeAkun:a,data:o}=i,[l,p]=n.useState([]),[u,b]=n.useState(!1),[m,d]=n.useState(!1),[y,T]=n.useState({name:"",code:"",type:"",uuid:""}),[_,K]=n.useState(!1),[g,f]=n.useState(""),j=n.useRef(),N=te.useReactToPrint({content:()=>j.current}),[x,r]=n.useState({page:1,size:10,count:118,lastPage:12}),h=(t="")=>{t==""&&f(t),b(!0),v.custom(`?search=${t}&page=${x.page}&size=${x.size}`,"GET").then(s=>{var c,F;K(t.length<1),p((c=s==null?void 0:s.data)==null?void 0:c.entry),r((F=s==null?void 0:s.data)==null?void 0:F.pagination),b(!1),a()}).catch(s=>{S(s)})},z=t=>{let s=l[t];T(s),d(!m)},R=async t=>{if(await E("Hapus","Yakin ingin hapus data ini ?")){let s=l[t];v.custom(`/${s.uuid}`,"DELETE").then(()=>{w("Berhasil","Data berhasil dihapus"),h()}).catch(c=>{S(c)})}},$=({selected:t})=>{let s=x;s.page=t+1,r(s),h()},H=t=>{let s=x;s.size=t,s.page=1,r(s),h()};return n.useEffect(()=>{h()},[]),e.jsx(M,{isLoading:u,children:e.jsxs("div",{children:[e.jsx(Q,{title:"Kode Akun"}),m?e.jsx(ne,{setAddKodeAkunEvent:()=>d(!1),getData:h,kodeAkunEdit:y}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:g,onChange:t=>f(t.target.value)}),_?e.jsx(Y,{onClick:()=>{h(g)},className:"cursor-pointer"}):e.jsx(C,{onClick:()=>h(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{T(null),d(!m)},children:[e.jsx(q,{})," Tambah Kode Akun"]}),e.jsx("div",{className:"hidden",children:e.jsx(le,{data:o==null?void 0:o.kodeAkun,ref:j,bulan:J(new Date().getMonth()),tahun:o.tahun})}),e.jsxs("button",{onClick:N,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(X,{})," Cetak Kode Akun"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Kode Akun"}),e.jsx("th",{children:"Tipe Akun"}),e.jsx("th",{children:"Nama Akun"}),e.jsx("th",{children:"Tipe Untuk Transaksi Kas Dan Bank"}),e.jsx("th",{children:"Tipe Untuk Transaksi Payroll"}),e.jsx("th",{children:"Tipe Untuk Transaksi Pembelian Aset Dan Perlengkapan"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((t,s)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[s+1,"."]}),e.jsx("td",{children:t.code}),e.jsx("td",{children:t.type}),e.jsx("td",{children:t.name}),e.jsx("td",{children:D.filter(c=>c.value==t.type_transaksi_kas_bank).at(0).label}),e.jsx("td",{children:L.filter(c=>c.value==t.type_transaksi_payroll).at(0).label}),e.jsx("td",{children:U.filter(c=>c.value==t.type_transaksi_pembelian_aset_dan_perlengkapan).at(0).label}),e.jsx("td",{className:"flex gap-x-2",children:t.update_permission?e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{z(s)}}),e.jsx(A,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{R(s)}})]}):e.jsx(e.Fragment,{})})]},s)}))})]})}),e.jsx(ee,{paginateUpdatePage:$,paginate:x,setSize:H})]})]})})};export{ge as default};
