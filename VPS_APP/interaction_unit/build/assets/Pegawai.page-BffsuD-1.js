import{r as n,g as aa,j as a,b as $,h as ea,k as ta,K as A,n as H,s as P,W as sa,X as na,_ as la,R as oa,u as ra,o as ca,e as ua,p as ia,i as ha,a as ma,F as xa,q as ga}from"./index-BHalgDnS.js";import{P as ja}from"./PageTitle-B404o4Ml.js";import{j as D,d as W,e as J,f as z,W as ba}from"./Wrap-v0GlUqt9.js";import{P as Pa}from"./Pagination-D24thu6K.js";import{F as u}from"./FormInputWithLabel-BP5eQqei.js";import{a as da}from"./actionEvent.helper-BujKUZ7B.js";import{F as b}from"./FormSelectWithLabel-BeoqgiqW.js";import{P as va,l as Na}from"./PDFHeader-DjOAMhOk.js";import"./react-paginate-D-6Jcw9z.js";import"./number.helper-efe0YCx6.js";import"./FormInput-rJTe_TRK.js";import"./index-BKNjMPK8.js";const fa=({setAddPegawaiEvent:r=()=>{},pegawaiEdit:e,getData:o=()=>{}})=>{const[h,m]=n.useState(e!=null&&e.name?e.name:""),[d,v]=n.useState(e!=null&&e.nip?e.nip:""),[x,K]=n.useState(e!=null&&e.nik?e.nik:""),[N,C]=n.useState(e!=null&&e.npwp?e.npwp:""),[y,S]=n.useState(e!=null&&e.tempat_lahir?e.tempat_lahir:""),[f,L]=n.useState(e!=null&&e.tanggal_lahir?e.tanggal_lahir:aa()),[k,i]=n.useState(e!=null&&e.alamat?e.alamat:""),[g,c]=n.useState(e!=null&&e.no_hp?e.no_hp:""),[_,F]=n.useState(e!=null&&e.jenis_kelamin?{label:e.jenis_kelamin==0?"Perempuan":"Laki - Laki",value:e.jenis_kelamin}:{label:D[0].label,value:D[0].value}),[T,V]=n.useState(e!=null&&e.agama?{label:e.agama,value:e.agama}:{label:W[0].label,value:W[0].value}),[l,s]=n.useState(e!=null&&e.divisi?e.divisi:""),[j,p]=n.useState([]),[B,I]=n.useState(e!=null&&e.jabatan?e.jabatan:""),[G,w]=n.useState([]),[O,R]=n.useState(),[q,M]=n.useState([]),[U,X]=n.useState(e!=null&&e.status_kerja?{label:e.status_kerja,value:e.status_kerja}:{label:J[0].label,value:J[0].value}),Y=async()=>{await ta()&&A.custom(`${e!=null&&e.uuid?`/${e.uuid}`:""}`,e?"PUT":"POST",null,{data:{name:h,nip:d,nik:x,npwp:N,tempat_lahir:y,tanggal_lahir:f,alamat:k,no_hp:g,jenis_kelamin:_.value,agama:T.value,divisi:l.value,jabatan:B.value,status_tanggungan:O.value,status_kerja:U.value}}).then(()=>{e?H("Berhasil","Data berhasil diupdate"):H("Berhasil","Data berhasil disimpan"),r(),o()}).catch(t=>{P(t)})},Q=()=>{sa.custom("","GET").then(t=>{if(p(t.data.entry),e){z({editObject:e.divisi,dataList:t.data.entry,setState:s,labelKey:"name",valueKey:"uuid"});return}t.data.entry.length>0&&s({label:t.data.entry[0].name,value:t.data.entry[0].uuid})}).catch(t=>{P(t)})},Z=()=>{na.custom("","GET").then(t=>{if(w(t.data.entry),e){z({editObject:e.jabatan,dataList:t.data.entry,setState:I,labelKey:"name",valueKey:"uuid"});return}t.data.entry.length>0&&I({label:t.data.entry[0].name,value:t.data.entry[0].uuid})}).catch(t=>{P(t)})},E=()=>{la.custom("","GET").then(t=>{if(M(t.data.entry),t.data.entry.length>0){if(e){z({editObject:e.status_tanggungan,dataList:t.data.entry,setState:R,labelKey:"name",valueKey:"uuid"});return}R({label:t.data.entry[0].name,value:t.data.entry[0].uuid})}}).catch(t=>{P(t)})};return n.useEffect(()=>{Q(),Z(),E()},[]),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[a.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[a.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[e?"Edit":"Tambahkan"," Pegawai"]}),a.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>r(),children:[a.jsx($,{})," Batalkan Pegawai"]})]}),a.jsx("div",{className:"flex gap-x-2",children:a.jsx(u,{label:"Nama Pegawai",type:"text",onchange:t=>{m(t.target.value)},others:{value:h,name:"namaPegawai"}})}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(u,{label:"NIP Pegawai",type:"text",onchange:t=>{v(t.target.value)},others:{value:d,name:"NIPPegawai"}}),a.jsx(u,{label:"NIK Pegawai",type:"text",onchange:t=>{da(t),K(t.target.value)},others:{value:x,name:"NIKPegawai"}}),a.jsx(u,{label:"NPWP Pegawai",type:"text",onchange:t=>{C(t.target.value)},others:{value:N,name:"NPWPPegawai"}})]}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(u,{label:"Tempat Lahir",type:"text",onchange:t=>{S(t.target.value)},others:{value:y,name:"tempatLahirPegawai"}}),a.jsx(u,{label:"Tanggal Lahir",type:"date",onchange:t=>{L(t.target.value)},others:{value:f,name:"tanggalLahirPegawai"}}),a.jsx(u,{label:"Alamat",type:"text",onchange:t=>{i(t.target.value)},others:{value:k,name:"alamatPegawai"}}),a.jsx(u,{label:"Nomor Handphone",type:"text",onchange:t=>{c(t.target.value)},others:{value:g,name:"nomorHandphonePegawai"}})]}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(b,{label:"Jenis Kelamin",optionsDataList:D,optionsLabel:"label",optionsValue:"value",selectValue:_,onchange:t=>{F(t)},selectName:"jenisKelaminPegawai"}),a.jsx(b,{label:"Agama",optionsDataList:W,optionsLabel:"label",optionsValue:"value",selectValue:T,onchange:t=>{V(t)},selectName:"agamaPegawai"}),a.jsx(b,{label:"Divisi",optionsDataList:j,optionsLabel:"name",optionsValue:"uuid",selectValue:l,onchange:t=>{s(t)},selectName:"divisiPegawai"}),a.jsx(b,{label:"Jabatan",optionsDataList:G,optionsLabel:"name",optionsValue:"uuid",selectValue:B,onchange:t=>{I(t)},selectName:"jabatanPegawai"})]}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(b,{label:"Status Tanggungan",optionsDataList:q,optionsLabel:"name",optionsValue:"uuid",selectValue:O,onchange:t=>{R(t)},selectName:"statusTanggunganPegawai"}),a.jsx(b,{label:"Status Kerja",optionsDataList:J,optionsLabel:"label",optionsValue:"value",selectValue:U,onchange:t=>{X(t)},selectName:"statusKerjaPegawai"})]}),a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{Y()},children:[a.jsx(ea,{})," Simpan"]})]})})},ya=oa.forwardRef((r,e)=>{var o;return a.jsxs("div",{ref:e,children:[a.jsx(va,{bulan:r.bulan,tahun:r.tahun,title:"Pegawai"}),a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[a.jsx("th",{width:12,children:"No"}),a.jsx("th",{children:"Nama Pegawai"})]})}),a.jsx("tbody",{children:(o=r==null?void 0:r.data)==null?void 0:o.map((h,m)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsx("td",{children:m+1}),a.jsx("td",{children:h.name})]},m)}))})]})]})}),Da=()=>{const r=ra(),{data:e}=r,[o,h]=n.useState([]),[m,d]=n.useState(!1),[v,x]=n.useState(!1),[K,N]=n.useState({name:""}),[C,y]=n.useState(!1),[S,f]=n.useState(""),L=n.useRef(),k=Na.useReactToPrint({content:()=>L.current}),[i,g]=n.useState({page:1,size:10,count:118,lastPage:12}),c=(l="")=>{l==""&&f(l),d(!0),A.custom(`?search=${l}&page=${i.page}&size=${i.size}`,"GET").then(s=>{var j,p;y(l.length<1),h((j=s==null?void 0:s.data)==null?void 0:j.entry),g((p=s==null?void 0:s.data)==null?void 0:p.pagination),d(!1)}).catch(s=>{P(s)})},_=l=>{let s=o[l];N(s),x(!v)},F=async l=>{if(await ga("Hapus","Yakin ingin hapus data ini ?")){let s=o[l];A.custom(`/${s.uuid}`,"DELETE").then(()=>{H("Berhasil","Data berhasil dihapus"),c()}).catch(j=>{P(j)})}},T=({selected:l})=>{let s=i;s.page=l+1,g(s),c()},V=l=>{let s=i;s.size=l,s.page=1,g(s),c()};return n.useEffect(()=>{c()},[]),a.jsx(ba,{isLoading:m,children:a.jsxs("div",{children:[a.jsx(ja,{title:"Pegawai"}),v?a.jsx(fa,{setAddPegawaiEvent:()=>x(!1),getData:c,pegawaiEdit:K}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[a.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[a.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:S,onChange:l=>f(l.target.value)}),C?a.jsx(ca,{onClick:()=>{c(S)},className:"cursor-pointer"}):a.jsx($,{onClick:()=>c(""),className:"cursor-pointer"})]}),a.jsxs("div",{className:"flex gap-x-2 items-center",children:[a.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{N(null),x(!v)},children:[a.jsx(ua,{})," Tambah Pegawai"]}),a.jsx("div",{className:"hidden",children:a.jsx(ya,{data:o,ref:L,bulan:ia(new Date().getMonth()),tahun:e.tahun})}),a.jsxs("button",{onClick:k,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[a.jsx(ha,{})," Cetak Pegawai"]})]})]}),a.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[a.jsx("th",{width:12,children:"No"}),a.jsx("th",{children:"Nama Pegawai"}),a.jsx("th",{children:"Divisi"}),a.jsx("th",{children:"Jabatan"}),a.jsx("th",{children:"Status Tanggungan"}),a.jsx("th",{children:"Status Kerja"}),a.jsx("th",{children:"Aksi"})]})}),a.jsx("tbody",{children:o==null?void 0:o.map((l,s)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsxs("td",{children:[s+1,"."]}),a.jsx("td",{children:l.name}),a.jsx("td",{children:l.divisi_name}),a.jsx("td",{children:l.jabatan_name}),a.jsx("td",{children:l.status_tanggungan_name}),a.jsx("td",{children:l.status_kerja}),a.jsxs("td",{className:"flex gap-x-2",children:[a.jsx(ma,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{_(s)}}),a.jsx(xa,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{F(s)}})]})]},s)}))})]})}),a.jsx(Pa,{paginateUpdatePage:T,paginate:i,setSize:V})]})]})})};export{Da as default};
