import{r as n,j as e,b as R,h as I,k as V,A as B,n as C,s as L,R as H,u as q,o as G,e as M,p as O,i as Y,a as J,F as Q,q as X}from"./index-BFtBgOrg.js";import{P as Z}from"./PageTitle-Hc-YSVDI.js";import{K as S,T as $,b as z,c as W,W as A}from"./Wrap-Dk-wg8kL.js";import{P as E}from"./Pagination-CNke5GoU.js";import{F as U}from"./FormInputWithLabel-zEsdZ3IQ.js";import{F as ee}from"./FormSelectWithLabel-BuQTQxHx.js";import{T as F}from"./ToggleBox-BuOhxKmX.js";import{P as ae,l as se}from"./PDFHeader-BGA35-Z9.js";import"./react-paginate-C1eAq6Tf.js";import"./FormInput-DctP6iug.js";import"./index-BKNjMPK8.js";const te=({setAddKodeAkunEvent:i=()=>{},kodeAkunEdit:a,getData:x=()=>{}})=>{var j,c;const[l,g]=n.useState(a!=null&&a.name?a.name:""),[d,y]=n.useState(a!=null&&a.code?a.code.split(".")[1]:""),[h,T]=n.useState(S),[f,_]=n.useState(a!=null&&a.type_transaksi_kas_bank?a==null?void 0:a.type_transaksi_kas_bank:0),[K,P]=n.useState(a!=null&&a.type_transaksi_payroll?a==null?void 0:a.type_transaksi_payroll:0),[u,N]=n.useState(a!=null&&a.type_transaksi_pembelian_aset_dan_perlengkapan?a==null?void 0:a.type_transaksi_pembelian_aset_dan_perlengkapan:0),[p,w]=n.useState({label:a!=null&&a.type?a.type:S.at(0).name,value:a!=null&&a.type?a.type:S.at(0).name}),m=async()=>{var r,v;await V()&&B.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{type:p.value,name:l,code:`${(v=(r=h.filter(b=>b.name==p.value))==null?void 0:r.at(0))==null?void 0:v.id}.${d}`,type_transaksi_kas_bank:f,type_transaksi_payroll:K,type_transaksi_pembelian_aset_dan_perlengkapan:u}}).then(()=>{a?C("Berhasil","Data berhasil diupdate"):C("Berhasil","Data berhasil disimpan"),i(),x()}).catch(b=>{L(b)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Kode Akun"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>i(),children:[e.jsx(R,{})," Batalkan Kode Akun"]})]}),e.jsx("div",{className:"flex gap-x-4",children:e.jsx(U,{label:"Nama Akun",type:"text",onchange:r=>{g(r.target.value)},others:{value:l,name:"namaAkun"}})}),e.jsxs("div",{className:"mt-5 flex gap-x-4",children:[e.jsx(ee,{label:"Tipe Akun",onchange:r=>{w(r)},optionsDataList:h,optionsLabel:"name",optionsValue:"name",selectName:"kodeAkunType",selectValue:p}),e.jsxs("div",{className:"flex gap-x-2 items-end",children:[e.jsxs("p",{children:[(c=(j=h.filter(r=>r.name==p.value))==null?void 0:j.at(0))==null?void 0:c.id,"."]}),e.jsx(U,{label:"Kode Akun",type:"text",onchange:r=>{y(r.target.value)},others:{value:d,name:"kodeAkun"}})]})]}),e.jsx("div",{className:"mt-5 flex gap-x-2",children:e.jsx(F,{label:"Tipe Untuk Transaksi Kas Dan Bank",setToggleBox:_,toggleBox:f,toggleBoxList:$})}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(F,{label:"Tipe Untuk Transaksi Payroll",setToggleBox:P,toggleBox:K,toggleBoxList:z})}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(F,{label:"Tipe Untuk Transaksi Pembelian Aset Dan Perlengkapan",setToggleBox:N,toggleBox:u,toggleBoxList:W})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{m()},children:[e.jsx(I,{})," Simpan"]})]})})},ne=H.forwardRef((i,a)=>{var x;return e.jsxs("div",{ref:a,children:[e.jsx(ae,{bulan:i.bulan,tahun:i.tahun,title:"Kode Akun"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Kode Akun"}),e.jsx("th",{children:"Tipe Akun"}),e.jsx("th",{children:"Nama Akun"})]})}),e.jsx("tbody",{children:(x=i==null?void 0:i.data)==null?void 0:x.map((l,g)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:g+1}),e.jsx("td",{children:l.code}),e.jsx("td",{children:l.type}),e.jsx("td",{children:l.name})]},g)}))})]})]})}),ue=()=>{const i=q(),{_getDataKodeAkun:a,data:x}=i,[l,g]=n.useState([]),[d,y]=n.useState(!1),[h,T]=n.useState(!1),[f,_]=n.useState({name:"",code:"",type:"",uuid:""}),[K,P]=n.useState(!1),[u,N]=n.useState(""),p=n.useRef(),w=se.useReactToPrint({content:()=>p.current}),[m,j]=n.useState({page:1,size:10,count:118,lastPage:12}),c=(t="")=>{t==""&&N(t),y(!0),B.custom(`?search=${t}&page=${m.page}&size=${m.size}`,"GET").then(s=>{var o,D;P(t.length<1),g((o=s==null?void 0:s.data)==null?void 0:o.entry),j((D=s==null?void 0:s.data)==null?void 0:D.pagination),y(!1),a()}).catch(s=>{L(s)})},r=t=>{let s=l[t];_(s),T(!h)},v=async t=>{if(await X("Hapus","Yakin ingin hapus data ini ?")){let s=l[t];B.custom(`/${s.uuid}`,"DELETE").then(()=>{C("Berhasil","Data berhasil dihapus"),c()}).catch(o=>{L(o)})}},b=({selected:t})=>{let s=m;s.page=t+1,j(s),c()},k=t=>{let s=m;s.size=t,s.page=1,j(s),c()};return n.useEffect(()=>{c()},[]),e.jsx(A,{isLoading:d,children:e.jsxs("div",{children:[e.jsx(Z,{title:"Kode Akun"}),h?e.jsx(te,{setAddKodeAkunEvent:()=>T(!1),getData:c,kodeAkunEdit:f}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:u,onChange:t=>N(t.target.value)}),K?e.jsx(G,{onClick:()=>{c(u)},className:"cursor-pointer"}):e.jsx(R,{onClick:()=>c(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{_(null),T(!h)},children:[e.jsx(M,{})," Tambah Kode Akun"]}),e.jsx("div",{className:"hidden",children:e.jsx(ne,{data:x==null?void 0:x.kodeAkun,ref:p,bulan:O(new Date().getMonth()),tahun:x.tahun})}),e.jsxs("button",{onClick:w,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(Y,{})," Cetak Kode Akun"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Kode Akun"}),e.jsx("th",{children:"Tipe Akun"}),e.jsx("th",{children:"Nama Akun"}),e.jsx("th",{children:"Tipe Untuk Transaksi Kas Dan Bank"}),e.jsx("th",{children:"Tipe Untuk Transaksi Payroll"}),e.jsx("th",{children:"Tipe Untuk Transaksi Pembelian Aset Dan Perlengkapan"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((t,s)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[s+1,"."]}),e.jsx("td",{children:t.code}),e.jsx("td",{children:t.type}),e.jsx("td",{children:t.name}),e.jsx("td",{children:$.filter(o=>o.value==t.type_transaksi_kas_bank).at(0).label}),e.jsx("td",{children:z.filter(o=>o.value==t.type_transaksi_payroll).at(0).label}),e.jsx("td",{children:W.filter(o=>o.value==t.type_transaksi_pembelian_aset_dan_perlengkapan).at(0).label}),e.jsx("td",{className:"flex gap-x-2",children:t.update_permission?e.jsxs(e.Fragment,{children:[e.jsx(J,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{r(s)}}),e.jsx(Q,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{v(s)}})]}):e.jsx(e.Fragment,{})})]},s)}))})]})}),e.jsx(E,{paginateUpdatePage:b,paginate:m,setSize:k})]})]})})};export{ue as default};
