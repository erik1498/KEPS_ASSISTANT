import{r as n,O as ie,j as e,b as Z,h as re,a0 as ce,s as r,a2 as he,ag as pe,A as me,ah as ge,ai as xe,k as be,aj as z,n as G,R as je,u as ke,o as ye,e as De,p as ve,i as Se,c as _e,a as Pe,F as Ne,q as de}from"./index-CH4D0Lt-.js";import{P as Le}from"./PageTitle-DbvUOkqr.js";import{f as b,W as Ke}from"./Wrap-5ys34sV1.js";import{P as Te}from"./Pagination-BzIqssJ_.js";import{F as c}from"./FormInputWithLabel-DSO_Zp9u.js";import{i as B}from"./actionEvent.helper-BujKUZ7B.js";import{F as j}from"./FormSelectWithLabel-B3WnVhHo.js";import{p as m}from"./number.helper-efe0YCx6.js";import{P as we,l as Be}from"./PDFHeader-nmfnFTDc.js";import"./react-paginate-CJd_j2MB.js";import"./FormInput-S8fN4g0j.js";import"./index-BKNjMPK8.js";const Ce=({setAddDaftarAsetEvent:u=()=>{},daftarAsetEdit:t,getData:o=()=>{}})=>{const[k,g]=n.useState([]),[S,y]=n.useState([]),[D,C]=n.useState([]),[_,F]=n.useState([]),[R,P]=n.useState([]),[N,d]=n.useState([]),[L,h]=n.useState(t!=null&&t.name?t.name:""),[x,i]=n.useState(t!=null&&t.tanggal_beli?t.tanggal_beli:ie()),[K,v]=n.useState(t!=null&&t.supplier?t.supplier:""),[T,f]=n.useState(t!=null&&t.nomor_invoice?t.nomor_invoice:""),[s,l]=n.useState(t!=null&&t.bukti_transaksi?t.bukti_transaksi:""),[p,w]=n.useState(t!=null&&t.kuantitas?m(t.kuantitas):""),[M,V]=n.useState(t!=null&&t.satuan_barang?t.satuan_barang:""),[H,A]=n.useState(t!=null&&t.harga_satuan?m(t.harga_satuan):""),[W,E]=n.useState(t!=null&&t.dpp?m(t.dpp):""),[q,ee]=n.useState(t!=null&&t.ppn?m(t.ppn):""),[Y,O]=n.useState(t!=null&&t.metode_penyusutan?t.metode_penyusutan:""),[J,I]=n.useState(t!=null&&t.kode_akun_perkiraan?t.kode_akun_perkiraan:""),[Q,U]=n.useState(t!=null&&t.kelompok_aset?t.kelompok_aset:""),[X,$]=n.useState(t!=null&&t.kategori_aset?t.kategori_aset:""),ae=()=>{ce.custom("","GET").then(a=>{if(g(a.data.entry),a.data.entry.length>0){if(t){b({editObject:t.supplier,dataList:a.data.entry,setState:v,labelKey:"name",valueKey:"uuid"});return}v({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{r(a)})},te=()=>{he.custom("","GET").then(a=>{if(y(a.data.entry),a.data.entry.length>0){if(t){b({editObject:t.satuan_barang,dataList:a.data.entry,setState:V,labelKey:"name",valueKey:"uuid"});return}V({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{r(a)})},ne=()=>{pe.custom("","GET").then(a=>{if(C(a.data.entry),a.data.entry.length>0){if(t){b({editObject:t.metode_penyusutan,dataList:a.data.entry,setState:O,labelKey:"name",valueKey:"uuid"});return}O({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{r(a)})},se=()=>{me.custom("/aset_perlengkapan","GET").then(a=>{if(F(a.data),a.data.length>0){if(t){b({editObject:t.kode_akun_perkiraan,dataList:a.data,setState:I,labelKey:"name",valueKey:"uuid"});return}I({label:a.data[0].name,value:a.data[0].uuid})}}).catch(a=>{r(a)})},le=()=>{ge.custom("","GET").then(a=>{if(P(a.data.entry),a.data.entry.length>0){if(t){b({editObject:t.kelompok_aset,dataList:a.data.entry,setState:U,labelKey:"name",valueKey:"uuid"});return}U({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{r(a)})},oe=()=>{xe.custom("","GET").then(a=>{if(d(a.data.entry),a.data.entry.length>0){if(t){b({editObject:t.kategori_aset,dataList:a.data.entry,setState:$,labelKey:"name",valueKey:"uuid"});return}$({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{r(a)})},ue=async()=>{await be()&&z.custom(`${t!=null&&t.uuid?`/${t.uuid}`:""}`,t?"PUT":"POST",null,{data:{name:L,tanggal_beli:x,nomor_invoice:T,bukti_transaksi:s,supplier:K.value,kuantitas:p,satuan_barang:M.value,harga_satuan:H,dpp:W,ppn:q,metode_penyusutan:Y.value,kode_akun_perkiraan:J.value,kelompok_aset:Q.value,kategori_aset:X.value}}).then(()=>{t?G("Berhasil","Data berhasil diupdate"):G("Berhasil","Data berhasil disimpan"),u(),o()}).catch(a=>{r(a)})};return n.useEffect(()=>{ae(),te(),ne(),se(),le(),oe()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[t?"Edit":"Tambahkan"," Daftar Aset"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>u(),children:[e.jsx(Z,{})," Batalkan Daftar Aset"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(c,{label:"Nama Aset",type:"text",onchange:a=>{h(a.target.value)},others:{value:L,name:"namaDaftarAset"}}),e.jsx(c,{label:"Tanggal Beli",type:"datetime-local",onchange:a=>{i(a.target.value)},others:{value:x,name:"tanggalBeliDaftarAset"}}),e.jsx(c,{label:"Nomor Invoice",type:"text",onchange:a=>{f(a.target.value)},others:{value:T,name:"nomorInvoiceDaftarAset"}}),e.jsx(c,{label:"Bukti Transaksi",type:"text",onchange:a=>{l(a.target.value)},others:{value:s,name:"buktiTransaksiDaftarAset"}})]}),e.jsxs("div",{className:"mt-5 flex gap-x-2",children:[e.jsx(j,{label:"Supplier",optionsDataList:k,optionsLabel:"name",optionsValue:"uuid",selectValue:K,onchange:a=>{v(a)},selectName:"supplierDaftarAset"}),e.jsx(c,{label:"Kuantitas",type:"text",onchange:a=>{B(a),w(a.target.value)},others:{value:p,name:"kuantitasDaftarAset"}}),e.jsx(j,{label:"Satuan Barang",optionsDataList:S,optionsLabel:"name",optionsValue:"uuid",selectValue:M,onchange:a=>{V(a)},selectName:"satuanBarangDaftarAset"}),e.jsx(c,{label:"Harga Satuan",type:"text",onchange:a=>{B(a),A(a.target.value)},others:{value:H,name:"hargaSatuanDaftarAset"}})]}),e.jsxs("div",{className:"mt-5 flex gap-x-2",children:[e.jsx(c,{label:"DPP",type:"text",onchange:a=>{B(a),E(a.target.value)},others:{value:W,name:"DPPDaftarAset"}}),e.jsx(c,{label:"PPN",type:"text",onchange:a=>{B(a),ee(a.target.value)},others:{value:q,name:"PPNDaftarAset"}}),e.jsx(j,{label:"Kode Akun",optionsDataList:_,optionsLabel:["code","name"],optionsLabelIsArray:!0,optionsValue:"uuid",optionsDelimiter:"-",selectValue:J,onchange:a=>{I(a)},selectName:"kodeAkunPerkiraanDaftarAset"}),e.jsx(j,{label:"Metode Penyusutan",optionsDataList:D,optionsLabel:"name",optionsValue:"uuid",selectValue:Y,onchange:a=>{O(a)},selectName:"metodePenyusutanDaftarAset"}),e.jsx(j,{label:"Kelompok Aset",optionsDataList:R,optionsLabel:"name",optionsValue:"uuid",selectValue:Q,onchange:a=>{U(a)},selectName:"kelompokAsetDaftarAset"}),e.jsx(j,{label:"Kategori Aset",optionsDataList:N,optionsLabel:"name",optionsValue:"uuid",selectValue:X,onchange:a=>{$(a)},selectName:"kategoriAsetDaftarAset"})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{ue()},children:[e.jsx(re,{})," Simpan"]})]})})},Fe=je.forwardRef((u,t)=>{var o;return e.jsxs("div",{ref:t,children:[e.jsx(we,{bulan:u.bulan,tahun:u.tahun,title:"Daftar Aset"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Daftar Aset"})]})}),e.jsx("tbody",{children:(o=u==null?void 0:u.data)==null?void 0:o.map((k,g)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:g+1}),e.jsx("td",{children:k.name})]},g)}))})]})]})}),qe=()=>{const u=ke(),{data:t}=u,[o,k]=n.useState([]),[g,S]=n.useState(!1),[y,D]=n.useState(!1),[C,_]=n.useState({name:""}),[F,R]=n.useState(!1),[P,N]=n.useState(""),d=n.useRef(),L=Be.useReactToPrint({content:()=>d.current}),[h,x]=n.useState({page:1,size:10,count:118,lastPage:12}),i=(s="")=>{s==""&&N(s),S(!0),z.custom(`?search=${s}&page=${h.page}&size=${h.size}`,"GET").then(l=>{var p,w;R(s.length<1),k((p=l==null?void 0:l.data)==null?void 0:p.entry),x((w=l==null?void 0:l.data)==null?void 0:w.pagination),S(!1)}).catch(l=>{r(l)})},K=s=>{let l=o[s];_(l),D(!y)},v=async s=>{if(await de("Hapus","Yakin ingin hapus data ini ?")){let l=o[s];z.custom(`/${l.uuid}`,"DELETE").then(()=>{G("Berhasil","Data berhasil dihapus"),i()}).catch(p=>{r(p)})}},T=({selected:s})=>{let l=h;l.page=s+1,x(l),i()},f=s=>{let l=h;l.size=s,l.page=1,x(l),i()};return n.useEffect(()=>{i()},[]),e.jsx(Ke,{isLoading:g,children:e.jsxs("div",{children:[e.jsx(Le,{title:"Daftar Aset"}),y?e.jsx(Ce,{setAddDaftarAsetEvent:()=>D(!1),getData:i,daftarAsetEdit:C}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:P,onChange:s=>N(s.target.value)}),F?e.jsx(ye,{onClick:()=>{i(P)},className:"cursor-pointer"}):e.jsx(Z,{onClick:()=>i(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{_(null),D(!y)},children:[e.jsx(De,{})," Tambah Daftar Aset"]}),e.jsx("div",{className:"hidden",children:e.jsx(Fe,{data:o,ref:d,bulan:ve(new Date().getMonth()),tahun:t.tahun})}),e.jsxs("button",{onClick:L,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(Se,{})," Cetak Daftar Aset"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Daftar Aset"}),e.jsx("th",{children:"Nomor Invoice"}),e.jsx("th",{children:"Tanggal Beli"}),e.jsx("th",{children:"Metode Penyusutan"}),e.jsx("th",{children:"Kelompok Aset"}),e.jsx("th",{children:"Kategori Aset"}),e.jsx("th",{children:"Total Beli"}),e.jsx("th",{children:"DPP"}),e.jsx("th",{children:"PPN"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:o==null?void 0:o.map((s,l)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[l+1,"."]}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.nomor_invoice}),e.jsx("td",{children:`${s.tanggal_beli.split("T")[0]} ${_e(s.tanggal_beli.split("T")[1])}`}),e.jsx("td",{children:s.metode_penyusutan_name}),e.jsx("td",{children:s.kelompok_aset_name}),e.jsx("td",{children:s.kategori_aset_name}),e.jsx("td",{children:m(s.harga_satuan*s.kuantitas)}),e.jsx("td",{children:m(s.dpp)}),e.jsx("td",{children:m(s.ppn)}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(Pe,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{K(l)}}),e.jsx(Ne,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{v(l)}})]})]},l)}))})]})}),e.jsx(Te,{paginateUpdatePage:T,paginate:h,setSize:f})]})]})})};export{qe as default};
