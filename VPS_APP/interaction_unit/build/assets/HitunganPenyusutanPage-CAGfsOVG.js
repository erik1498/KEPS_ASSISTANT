import{j as a,r as l,b as g,y as p,ac as P,af as c,s as _}from"./index-BFtBgOrg.js";import{P as A}from"./PageTitle-Hc-YSVDI.js";import{G as x,W as T}from"./Wrap-Dk-wg8kL.js";import{F as H}from"./FormSelectWithLabel-BuQTQxHx.js";import{p as e}from"./number.helper-efe0YCx6.js";import"./FormInput-DctP6iug.js";const S=({hitunganList:r=[],metodePenyusutanName:u=x})=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl my-6",children:[a.jsx("div",{className:"mb-3 flex justify-between items-center",children:a.jsx("h1",{className:"uppercase text-gray-600 font-bold",children:"Hitungan Penyusutan"})}),a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsx("tr",{className:"sticky top-0 bg-white py-4 text-black",children:u==x?a.jsxs(a.Fragment,{children:[a.jsx("th",{children:"No."}),a.jsx("th",{children:"Tahun Perolehan"}),a.jsx("th",{colSpan:2,children:"Masa"}),a.jsx("th",{children:"Harga Beli"}),a.jsx("th",{children:"Persentase %"}),a.jsx("th",{children:"Nilai Penyusutan"}),a.jsx("th",{children:"Nilai Buku"})]}):a.jsxs(a.Fragment,{children:[a.jsx("th",{children:"No."}),a.jsx("th",{children:"Tahun Perolehan"}),a.jsx("th",{children:"Harga Beli"}),a.jsx("th",{children:"Akumulasi Penyusutan Awal Tahun"}),a.jsx("th",{children:"Nilai Buku Awal Tahun"}),a.jsx("th",{children:"Persentase %"}),a.jsx("th",{children:"Nilai Penyusutan"}),a.jsx("th",{children:"Nilai Buku Akhir Tahun"})]})})}),a.jsx("tbody",{children:u==x?a.jsx(a.Fragment,{children:r.map((n,i)=>a.jsxs("tr",{children:[a.jsx("td",{children:i+1}),a.jsx("td",{children:n.tahun_perolehan}),a.jsx("td",{children:n.masa_awal!=-1?n.masa_awal:null}),a.jsx("td",{children:n.masa_akhir!=-1?n.masa_akhir:null}),a.jsx("td",{children:e(n.harga_beli!=-1?n.harga_beli:null)}),a.jsx("td",{children:e(n.persentase!=-1?n.persentase:null)}),a.jsx("td",{children:e(n.nilai_penyusutan!=-1?n.nilai_penyusutan:null)}),a.jsx("td",{children:e(n.nilai_buku!=-1?n.nilai_buku:null)})]},i))}):a.jsx(a.Fragment,{children:r.map((n,i)=>a.jsxs("tr",{children:[a.jsx("td",{children:i+1}),a.jsx("td",{children:n.tahun_perolehan}),a.jsx("td",{children:e(n.harga_beli!=-1?n.harga_beli:null)}),a.jsx("td",{children:e(n.akumulasi_penyusutan_awal_tahun!=-1?n.akumulasi_penyusutan_awal_tahun:null)}),a.jsx("td",{children:e(n.nilai_buku_awal_tahun!=-1?n.nilai_buku_awal_tahun:null)}),a.jsx("td",{children:e(n.persentase_penyusutan!=-1?n.persentase_penyusutan:null)}),a.jsx("td",{children:e(n.nilai_penyusutan!=-1?n.nilai_penyusutan:null)}),a.jsx("td",{children:e(n.nilai_buku_akhir_tahun!=-1?n.nilai_buku_akhir_tahun:null)})]},i))})})]})]})}),V=()=>{const[r,u]=l.useState(!1),[n,i]=l.useState([]),[h,o]=l.useState(),[t,j]=l.useState(null),[m,F]=l.useState(!1),[y,f]=l.useState([]),k=()=>{P.custom("","GET").then(s=>{i(s.data.entry),s.data.entry.length>0&&o({label:s.data.entry[0].name,value:s.data.entry[0].uuid})})},d=()=>{u(!1),c.custom(`/${t}`,"GET").then(s=>{var b;f(s.data),s.data.length>0&&(b=s.data[0])!=null&&b.daftar_aset&&u(!0)})},w=()=>{c.custom("","POST",null,{data:{uuid:t}}).then(()=>{d()}).catch(s=>_(s))},N=()=>{c.custom(`/${t}`,"DELETE").then(()=>{d()}).catch(s=>_(s))};return l.useEffect(()=>{t&&d()},[t]),l.useEffect(()=>{k()},[]),a.jsx(T,{isLoading:m,children:a.jsxs("div",{children:[a.jsx(A,{title:"Hitungan Penyusutan"}),a.jsx("div",{className:"bg-white rounded-md shadow-2xl h-max px-6 py-5",children:a.jsxs("div",{className:"flex items-end gap-x-2 mb-5",children:[a.jsx(H,{label:"Pilih Aset",optionsDataList:n,optionsLabel:"name",optionsValue:"uuid",disabled:t,selectValue:h,onchange:s=>{o(s)},selectName:"aset"}),t?a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"btn btn-sm bg-red-800 text-white",onClick:()=>j(null),children:[a.jsx(g,{})," Reset Aset"]}),r?a.jsxs("button",{className:"btn btn-sm bg-red-800 text-white",onClick:()=>N(h.value),children:[a.jsx(g,{})," Batal Validasi Hitungan Aset"]}):a.jsxs("button",{className:"btn btn-sm bg-green-800 text-white",onClick:()=>w(h.value),children:[a.jsx(p,{})," Validasi Hitungan Aset"]})]}):a.jsxs("button",{className:"btn btn-sm bg-green-800 text-white",onClick:()=>j(h.value),children:[a.jsx(p,{})," Pilih Aset"]})]})}),t?a.jsx(a.Fragment,{children:a.jsx(S,{hitunganList:y,metodePenyusutanName:n==null?void 0:n.filter(s=>s.uuid==t).at(0).metode_penyusutan_name})}):a.jsx(a.Fragment,{})]})})};export{V as default};
