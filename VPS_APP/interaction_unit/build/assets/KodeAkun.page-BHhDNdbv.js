import{r as n,j as e,b as C,h as H,k as W,A as v,n as _,s as S,R as I,u as V,o as k,e as O,p as q,i as G,a as M,F as Y,q as J}from"./index-D4RqvJs4.js";import{P as Q}from"./PageTitle-DUNNQqVc.js";import{K as X,T as L,b as R,W as Z}from"./Wrap-DQ2PFJhN.js";import{P as A}from"./Pagination-Bq4QT9q6.js";import{F as P}from"./FormInputWithLabel-lIZpCkjM.js";import{a as E}from"./actionEvent.helper-CSfRBgS8.js";import{F as ee}from"./FormSelectWithLabel-8h8k16bv.js";import{T as B}from"./ToggleBox-LVDXyetM.js";import{l as ae}from"./index-CG9KPJQi.js";import{P as se}from"./PDFHeader-qSI1BbDw.js";import"./number.helper-_FlTjox4.js";import"./FormInput-C_BK0bkE.js";import"./index-BKNjMPK8.js";const te=({setAddKodeAkunEvent:r=()=>{},kodeAkunEdit:a,getData:c=()=>{}})=>{const[l,x]=n.useState(a!=null&&a.name?a.name:""),[d,j]=n.useState(a!=null&&a.code?a.code:""),[p,g]=n.useState(X()),[b,y]=n.useState(a!=null&&a.type_transaksi_kas_bank?a==null?void 0:a.type_transaksi_kas_bank:0),[f,N]=n.useState(a!=null&&a.type_transaksi_payroll?a==null?void 0:a.type_transaksi_payroll:0),[m,T]=n.useState({label:a!=null&&a.type?a.type:"Harta",value:a!=null&&a.type?a.type:"Harta"}),K=async()=>{await W()&&v.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{type:m.value,name:l,code:d,type_transaksi_kas_bank:b,type_transaksi_payroll:f}}).then(()=>{a?_("Berhasil","Data berhasil diupdate"):_("Berhasil","Data berhasil disimpan"),r(),c()}).catch(i=>{S(i)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Kode Akun"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>r(),children:[e.jsx(C,{})," Batalkan Kode Akun"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(P,{label:"Nama Akun",type:"text",onchange:i=>{x(i.target.value)},others:{value:l,name:"namaAkun"}}),e.jsx(P,{label:"Kode Akun",type:"text",onchange:i=>{E(i),j(i.target.value)},others:{value:d,name:"kodeAkun"}}),e.jsx(ee,{label:"Tipe Akun",onchange:i=>{T(i)},optionsDataList:p,optionsLabel:"name",optionsValue:"name",selectName:"kodeAkunType",selectValue:m})]}),e.jsx("div",{className:"mt-5 flex gap-x-2",children:e.jsx(B,{label:"Tipe Untuk Transaksi Kas Dan Bank",setToggleBox:y,toggleBox:b,toggleBoxList:L})}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(B,{label:"Tipe Untuk Transaksi Payroll",setToggleBox:N,toggleBox:f,toggleBoxList:R})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{K()},children:[e.jsx(H,{})," Simpan"]})]})})},ne=I.forwardRef((r,a)=>{var c;return e.jsxs("div",{ref:a,children:[e.jsx(se,{bulan:r.bulan,tahun:r.tahun,title:"Kode Akun"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Kode Akun"}),e.jsx("th",{children:"Tipe Akun"}),e.jsx("th",{children:"Nama Akun"})]})}),e.jsx("tbody",{children:(c=r==null?void 0:r.data)==null?void 0:c.map((l,x)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:x+1}),e.jsx("td",{children:l.code}),e.jsx("td",{children:l.type}),e.jsx("td",{children:l.name})]},x)}))})]})]})}),be=()=>{const r=V(),{_getDataKodeAkun:a,data:c}=r,[l,x]=n.useState([]),[d,j]=n.useState(!1),[p,g]=n.useState(!1),[b,y]=n.useState({name:"",code:"",type:"",uuid:""}),[f,N]=n.useState(!1),[m,T]=n.useState(""),K=n.useRef(),i=ae.useReactToPrint({content:()=>K.current}),[u,w]=n.useState({page:1,size:10,count:118,lastPage:12}),h=(t="")=>{t==""&&T(t),j(!0),v.custom(`?search=${t}&page=${u.page}&size=${u.size}`,"GET").then(s=>{var o,F;N(t.length<1),x((o=s==null?void 0:s.data)==null?void 0:o.entry),w((F=s==null?void 0:s.data)==null?void 0:F.pagination),j(!1),a()}).catch(s=>{S(s)})},z=t=>{let s=l[t];y(s),g(!p)},U=async t=>{if(await J("Hapus","Yakin ingin hapus data ini ?")){let s=l[t];v.custom(`/${s.uuid}`,"DELETE").then(()=>{_("Berhasil","Data berhasil dihapus"),h()}).catch(o=>{S(o)})}},D=({selected:t})=>{let s=u;s.page=t+1,w(s),h()},$=t=>{let s=u;s.size=t,s.page=1,w(s),h()};return n.useEffect(()=>{h()},[]),e.jsx(Z,{isLoading:d,children:e.jsxs("div",{children:[e.jsx(Q,{title:"Kode Akun"}),p?e.jsx(te,{setAddKodeAkunEvent:()=>g(!1),getData:h,kodeAkunEdit:b}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:m,onChange:t=>T(t.target.value)}),f?e.jsx(k,{onClick:()=>{h(m)},className:"cursor-pointer"}):e.jsx(C,{onClick:()=>h(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{y(null),g(!p)},children:[e.jsx(O,{})," Tambah Kode Akun"]}),e.jsx("div",{className:"hidden",children:e.jsx(ne,{data:c==null?void 0:c.kodeAkun,ref:K,bulan:q(new Date().getMonth()),tahun:c.tahun})}),e.jsxs("button",{onClick:i,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(G,{})," Cetak Kode Akun"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Kode Akun"}),e.jsx("th",{children:"Tipe Akun"}),e.jsx("th",{children:"Nama Akun"}),e.jsx("th",{children:"Tipe Untuk Transaksi Kas Dan Bank"}),e.jsx("th",{children:"Tipe Untuk Transaksi Payroll"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((t,s)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[s+1,"."]}),e.jsx("td",{children:t.code}),e.jsx("td",{children:t.type}),e.jsx("td",{children:t.name}),e.jsx("td",{children:L.filter(o=>o.value==t.type_transaksi_kas_bank).at(0).label}),e.jsx("td",{children:R.filter(o=>o.value==t.type_transaksi_payroll).at(0).label}),e.jsx("td",{className:"flex gap-x-2",children:t.update_permission?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{z(s)}}),e.jsx(Y,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{U(s)}})]}):e.jsx(e.Fragment,{})})]},s)}))})]})}),e.jsx(A,{paginateUpdatePage:D,paginate:u,setSize:$})]})]})})};export{be as default};
