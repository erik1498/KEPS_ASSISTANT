import{j as a,R as f,u as T,r,p as R,i as _,x as v}from"./index-CfdqnSWR.js";import{W as k}from"./Wrap-3qI6yka0.js";import{P as y}from"./PageTitle-CmNDlYSt.js";import{B}from"./BulanSelectedListCard-DoP_jphg.js";import{p as o,a as b}from"./number.helper-efe0YCx6.js";import{R as n}from"./RowCard-YCJtczaA.js";import{P as w,l as N}from"./PDFHeader-DCDc6P0a.js";import"./index-BKNjMPK8.js";const x=({labaRugi:t,forPrint:i})=>a.jsx(a.Fragment,{children:Object.keys(t).length>0&&t.laba_rugi.loss!=0?a.jsx(a.Fragment,{children:a.jsx("div",{children:a.jsx("div",{className:`stats stats-vertical rounded-md ${i?"":"shadow-2xl"} text-white w-full ${t.laba_rugi.gain!=null?"bg-green-900":"bg-red-900"}`,children:a.jsxs("div",{className:"stat",children:[a.jsx("div",{className:"stat-title text-white text-[20px] font-bold",children:t.laba_rugi.gain!=null?"Gain":"Loss"}),a.jsx("div",{className:"stat-value text-sm",children:t.laba_rugi.gain!=null?`Rp. ${o(t.laba_rugi.gain)}`:`Rp. ${o(t.laba_rugi.loss.toString().replace("-",""))}`})]})})})}):a.jsx(a.Fragment,{})}),g=t=>{try{return t.toString().indexOf("(")>=0?"Rugi Kotor":"Laba Kotor"}catch{return"Laba Kotor"}},F=f.forwardRef((t,i)=>a.jsxs("div",{ref:i,children:[a.jsx(w,{bulan:t.bulan,tahun:t.tahun,title:"Laba Rugi"}),a.jsx(x,{labaRugi:t.labaRugi,forPrint:!0}),Object.keys(t.data).length>0?a.jsxs(a.Fragment,{children:[a.jsx(n,{dataList:t.data.pendapatan,title:"Pendapatan",totalTitle:"Total Pendapatan",forPrint:!0}),a.jsx(n,{dataList:t.data.harga_pokok_penjualan,title:"Harga Pokok Penjualan",totalTitle:"Total Harga Pokok Penjualan",addingContent:{title:g(t.data.laba_rugi.laba_kotor),value:o(b(t.data.laba_rugi.laba_kotor))},forPrint:!0}),a.jsx(n,{dataList:t.data.beban_operasional,title:"Beban Operasional",totalTitle:"Total Beban Operasional",forPrint:!0}),a.jsx(n,{dataList:t.data.beban_lainnya,title:"Beban Lainnya",totalTitle:"Total Beban Lainnya",forPrint:!0}),a.jsx(n,{dataList:t.data.pendapatanLainLain,title:"Pendapatan Lain - Lain",totalTitle:"Total Pendapatan Lain - Lain",forPrint:!0})]}):a.jsx(a.Fragment,{})]})),I=()=>{const t=T(),{data:i,setData:j}=t,[h,d]=r.useState(!1),[s,m]=r.useState(new Date().getMonth()),[e,L]=r.useState([]),u=r.useRef(),p=N.useReactToPrint({content:()=>u.current}),P=()=>{d(!0),v.custom(`/${s+1}/${i.tahun}`,"GET").then(l=>{let c=i;c.dashboard.overview[s].labaRugi=l==null?void 0:l.data,j(c),L(l==null?void 0:l.data),d(!1)}).catch(l=>{showError(l)})};return r.useEffect(()=>{P()},[s]),a.jsx(k,{isLoading:h,children:a.jsxs("div",{children:[a.jsx(y,{title:"Laba Rugi"}),a.jsxs("div",{className:"grid grid-cols-6",children:[a.jsxs("div",{className:"col-span-1",children:[a.jsx(B,{bulan:s,setBulan:m}),a.jsx(x,{labaRugi:e}),a.jsx("div",{className:"hidden",children:a.jsx(F,{data:e,ref:u,bulan:R(s),tahun:i.tahun,labaRugi:e})}),a.jsxs("button",{onClick:p,className:"btn btn-sm bg-red-600 hover:bg-red-600 mt-2 text-white border-red-600",children:[a.jsx(_,{})," Cetak Laba Rugi"]})]}),a.jsx("div",{className:"col-span-5",children:a.jsx("div",{className:"h-[65vh] pl-2",children:a.jsx("div",{className:"flex flex-col h-full overflow-y-scroll no-scrollbar w-full rounded-md",children:Object.keys(e).length>0?a.jsxs(a.Fragment,{children:[a.jsx(n,{dataList:e.pendapatan,title:"Pendapatan",totalTitle:"Total Pendapatan"}),a.jsx(n,{dataList:e.harga_pokok_penjualan,title:"Harga Pokok Penjualan",totalTitle:"Total Harga Pokok Penjualan",addingContent:{title:g(e.laba_rugi.laba_kotor),value:o(b(e.laba_rugi.laba_kotor))}}),a.jsx(n,{dataList:e.beban_operasional,title:"Beban Operasional",totalTitle:"Total Beban Operasional"}),a.jsx(n,{dataList:e.beban_lainnya,title:"Beban Lainnya",totalTitle:"Total Beban Lainnya"}),a.jsx(n,{dataList:e.pendapatanLainLain,title:"Pendapatan Lain - Lain",totalTitle:"Total Pendapatan Lain - Lain"})]}):a.jsx(a.Fragment,{})})})})]})]})})};export{I as default};
