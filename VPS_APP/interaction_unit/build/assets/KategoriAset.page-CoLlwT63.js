import{r,j as e,b as v,h as R,A as z,s as k,k as B,ai as y,n as N,R as $,u as I,o as V,e as O,p as U,i as W,a as G,F as H,q}from"./index-CBiC-3z3.js";import{P as M}from"./PageTitle-B0c32fKm.js";import{e as A,W as Y}from"./Wrap-BkENrgtl.js";import{P as J}from"./Pagination-Bor55BAY.js";import{F as Q}from"./FormInputWithLabel-CG72YFWb.js";import{F as S}from"./FormSelectWithLabel-BwIvOt7G.js";import{P as X,l as Z}from"./PDFHeader-LWmUPkCD.js";import"./FormInput-CmrfS47c.js";import"./index-BKNjMPK8.js";const E=({setAddKategoriAsetEvent:l=()=>{},kategoriAsetEdit:a,getData:i=()=>{}})=>{const[c,u]=r.useState(a!=null&&a.name?a.name:""),[x,o]=r.useState(a!=null&&a.kode_akun_perkiraan_debet?a.kode_akun_perkiraan_debet:""),[h,p]=r.useState(a!=null&&a.kode_akun_perkiraan_kredit?a.kode_akun_perkiraan_kredit:""),[m,K]=r.useState([]),f=()=>{z.custom("","GET").then(s=>{if(K(s.data.entry),s.data.entry.length>0){if(a){A({editObject:a.kode_akun_perkiraan_debet,dataList:s.data.entry,setState:o,labelKey:"name",valueKey:"uuid"}),A({editObject:a.kode_akun_perkiraan_kredit,dataList:s.data.entry,setState:p,labelKey:"name",valueKey:"uuid"});return}o({label:s.data.entry[0].name,value:s.data.entry[0].uuid})}}).catch(s=>{k(s)})},j=async()=>{await B()&&y.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{name:c,kode_akun_perkiraan_debet:x.value,kode_akun_perkiraan_kredit:h.value}}).then(()=>{a?N("Berhasil","Data berhasil diupdate"):N("Berhasil","Data berhasil disimpan"),l(),i()}).catch(s=>{k(s)})};return r.useEffect(()=>{f()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Kategori Aset"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>l(),children:[e.jsx(v,{})," Batalkan Kategori Aset"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(Q,{label:"Nama Kategori Aset",type:"text",onchange:s=>{u(s.target.value)},others:{value:c,name:"namaKategoriAset"}}),e.jsx(S,{label:"Kode Akun Debet",optionsDataList:m,optionsLabel:["code","name"],optionsDelimiter:"-",optionsLabelIsArray:!0,optionsValue:"uuid",selectValue:x,onchange:s=>{o(s)},selectName:"kodeAkunPerkiraanDebetDaftarAset"}),e.jsx(S,{label:"Kode Akun Kredit",optionsDataList:m,optionsLabel:["code","name"],optionsDelimiter:"-",optionsLabelIsArray:!0,optionsValue:"uuid",selectValue:h,onchange:s=>{p(s)},selectName:"kodeAkunPerkiraanKreditDaftarAset"})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{j()},children:[e.jsx(R,{})," Simpan"]})]})})},ee=$.forwardRef((l,a)=>{var i;return e.jsxs("div",{ref:a,children:[e.jsx(X,{bulan:l.bulan,tahun:l.tahun,title:"Daftar Kategori Aset"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Kategori Aset"})]})}),e.jsx("tbody",{children:(i=l==null?void 0:l.data)==null?void 0:i.map((c,u)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:u+1}),e.jsx("td",{children:c.name})]},u)}))})]})]})}),ce=()=>{const l=I(),{data:a}=l,[i,c]=r.useState([]),[u,x]=r.useState(!1),[o,h]=r.useState(!1),[p,m]=r.useState({name:""}),[K,f]=r.useState(!1),[j,s]=r.useState(""),w=r.useRef(),F=Z.useReactToPrint({content:()=>w.current}),[b,_]=r.useState({page:1,size:10,count:118,lastPage:12}),d=(n="")=>{n==""&&s(n),x(!0),y.custom(`?search=${n}&page=${b.page}&size=${b.size}`,"GET").then(t=>{var g,P;f(n.length<1),c((g=t==null?void 0:t.data)==null?void 0:g.entry),_((P=t==null?void 0:t.data)==null?void 0:P.pagination),x(!1)}).catch(t=>{k(t)})},C=n=>{let t=i[n];m(t),h(!o)},L=async n=>{if(await q("Hapus","Yakin ingin hapus data ini ?")){let t=i[n];y.custom(`/${t.uuid}`,"DELETE").then(()=>{N("Berhasil","Data berhasil dihapus"),d()}).catch(g=>{k(g)})}},D=({selected:n})=>{let t=b;t.page=n+1,_(t),d()},T=n=>{let t=b;t.size=n,t.page=1,_(t),d()};return r.useEffect(()=>{d()},[]),e.jsx(Y,{isLoading:u,children:e.jsxs("div",{children:[e.jsx(M,{title:"Kategori Aset"}),o?e.jsx(E,{setAddKategoriAsetEvent:()=>h(!1),getData:d,kategoriAsetEdit:p}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:j,onChange:n=>s(n.target.value)}),K?e.jsx(V,{onClick:()=>{d(j)},className:"cursor-pointer"}):e.jsx(v,{onClick:()=>d(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{m(null),h(!o)},children:[e.jsx(O,{})," Tambah Kategori Aset"]}),e.jsx("div",{className:"hidden",children:e.jsx(ee,{data:i,ref:w,bulan:U(new Date().getMonth()),tahun:a.tahun})}),e.jsxs("button",{onClick:F,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(W,{})," Cetak Kategori Aset"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Kategori Aset"}),e.jsx("th",{children:"Kode Akun Perkiraan Debet"}),e.jsx("th",{children:"Kode Akun Perkiraan Kredit"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:i==null?void 0:i.map((n,t)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[t+1,"."]}),e.jsx("td",{children:n.name}),e.jsx("td",{children:n.kode_akun_perkiraan_debet_name}),e.jsx("td",{children:n.kode_akun_perkiraan_kredit_name}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(G,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{C(t)}}),e.jsx(H,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{L(t)}})]})]},t)}))})]})}),e.jsx(J,{paginateUpdatePage:D,paginate:b,setSize:T})]})]})})};export{ce as default};
