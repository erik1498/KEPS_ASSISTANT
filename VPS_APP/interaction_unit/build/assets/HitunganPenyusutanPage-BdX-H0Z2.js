import{j as a,r as l,b,y as g,aj as N,aA as c,s as p}from"./index-QngEOzN_.js";import{P}from"./PageTitle-ByHsc4p5.js";import{W as A}from"./Wrap-BCfnb039.js";import{F as T}from"./FormSelectWithLabel-BCV4i4Bv.js";import{p as e}from"./number.helper-_FlTjox4.js";import"./FormInput-D113t21y.js";const H=({hitunganList:r=[],metodePenyusutanName:u="Garis Lurus"})=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl my-6",children:[a.jsx("div",{className:"mb-3 flex justify-between items-center",children:a.jsx("h1",{className:"uppercase text-gray-600 font-bold",children:"Hitungan Penyusutan"})}),a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsx("tr",{className:"sticky top-0 bg-white py-4 text-black",children:u=="Garis Lurus"?a.jsxs(a.Fragment,{children:[a.jsx("th",{children:"No."}),a.jsx("th",{children:"Tahun Perolehan"}),a.jsx("th",{colSpan:2,children:"Masa"}),a.jsx("th",{children:"Harga Beli"}),a.jsx("th",{children:"Persentase %"}),a.jsx("th",{children:"Nilai Penyusutan"}),a.jsx("th",{children:"Nilai Buku"})]}):a.jsxs(a.Fragment,{children:[a.jsx("th",{children:"No."}),a.jsx("th",{children:"Tahun Perolehan"}),a.jsx("th",{children:"Harga Beli"}),a.jsx("th",{children:"Akumulasi Penyusutan Awal Tahun"}),a.jsx("th",{children:"Nilai Buku Awal Tahun"}),a.jsx("th",{children:"Persentase %"}),a.jsx("th",{children:"Nilai Penyusutan"}),a.jsx("th",{children:"Nilai Buku Akhir Tahun"})]})})}),a.jsx("tbody",{children:u=="Garis Lurus"?a.jsx(a.Fragment,{children:r.map((s,i)=>a.jsxs("tr",{children:[a.jsx("td",{children:i+1}),a.jsx("td",{children:s.tahun_perolehan}),a.jsx("td",{children:s.masa_awal!=-1?s.masa_awal:null}),a.jsx("td",{children:s.masa_akhir!=-1?s.masa_akhir:null}),a.jsx("td",{children:e(s.harga_beli!=-1?s.harga_beli:null)}),a.jsx("td",{children:e(s.persentase!=-1?s.persentase:null)}),a.jsx("td",{children:e(s.nilai_penyusutan!=-1?s.nilai_penyusutan:null)}),a.jsx("td",{children:e(s.nilai_buku!=-1?s.nilai_buku:null)})]},i))}):a.jsx(a.Fragment,{children:r.map((s,i)=>a.jsxs("tr",{children:[a.jsx("td",{children:i+1}),a.jsx("td",{children:s.tahun_perolehan}),a.jsx("td",{children:e(s.harga_beli!=-1?s.harga_beli:null)}),a.jsx("td",{children:e(s.akumulasi_penyusutan_awal_tahun!=-1?s.akumulasi_penyusutan_awal_tahun:null)}),a.jsx("td",{children:e(s.nilai_buku_awal_tahun!=-1?s.nilai_buku_awal_tahun:null)}),a.jsx("td",{children:e(s.persentase_penyusutan!=-1?s.persentase_penyusutan:null)}),a.jsx("td",{children:e(s.nilai_penyusutan!=-1?s.nilai_penyusutan:null)}),a.jsx("td",{children:e(s.nilai_buku_akhir_tahun!=-1?s.nilai_buku_akhir_tahun:null)})]},i))})})]})]})}),V=()=>{const[r,u]=l.useState(!1),[s,i]=l.useState([]),[h,x]=l.useState(),[t,j]=l.useState(null),[_,F]=l.useState(!1),[m,y]=l.useState([]),f=()=>{N.custom("","GET").then(n=>{i(n.data.entry),n.data.entry.length>0&&x({label:n.data.entry[0].name,value:n.data.entry[0].uuid})})},d=()=>{u(!1),c.custom(`/${t}`,"GET").then(n=>{var o;y(n.data),n.data.length>0&&(o=n.data[0])!=null&&o.daftar_aset&&u(!0)})},k=()=>{c.custom("","POST",null,{data:{uuid:t}}).then(()=>{d()}).catch(n=>p(n))},w=()=>{c.custom(`/${t}`,"DELETE").then(()=>{d()}).catch(n=>p(n))};return l.useEffect(()=>{t&&d()},[t]),l.useEffect(()=>{f()},[]),a.jsx(A,{isLoading:_,children:a.jsxs("div",{children:[a.jsx(P,{title:"Hitungan Penyusutan"}),a.jsx("div",{className:"bg-white rounded-md shadow-2xl h-max px-6 py-5",children:a.jsxs("div",{className:"flex items-end gap-x-2 mb-5",children:[a.jsx(T,{label:"Pilih Aset",optionsDataList:s,optionsLabel:"name",optionsValue:"uuid",disabled:t,selectValue:h,onchange:n=>{x(n)},selectName:"aset"}),t?a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"btn btn-sm bg-red-800 text-white",onClick:()=>j(null),children:[a.jsx(b,{})," Reset Aset"]}),r?a.jsxs("button",{className:"btn btn-sm bg-red-800 text-white",onClick:()=>w(h.value),children:[a.jsx(b,{})," Batal Validasi Hitungan Aset"]}):a.jsxs("button",{className:"btn btn-sm bg-green-800 text-white",onClick:()=>k(h.value),children:[a.jsx(g,{})," Validasi Hitungan Aset"]})]}):a.jsxs("button",{className:"btn btn-sm bg-green-800 text-white",onClick:()=>j(h.value),children:[a.jsx(g,{})," Pilih Aset"]})]})}),t?a.jsx(a.Fragment,{children:a.jsx(H,{hitunganList:m,metodePenyusutanName:s==null?void 0:s.filter(n=>n.uuid==t).at(0).metode_penyusutan_name})}):a.jsx(a.Fragment,{})]})})};export{V as default};
