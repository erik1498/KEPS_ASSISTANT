import{j as e,p,c as ee,a as P,F as $,b as ue,P as W,A as z,R as ae,f as me,r as o,i as G,g as se,d as te,e as T,h as he,k as V,l as Y,m as be,n as le,o as ge,q as je,s as C,t as U,u as pe,v as I,w as fe,W as Ne,x as ke,y as we,z as ve,B as q,C as De,D as Q,E as ye}from"./index-Les8lMu8.js";import{B as Te}from"./BankRowData-CNhrplgg.js";import{K as Fe}from"./KasRowData-BD1Rx-uu.js";import{P as Se}from"./PendapatanRowData-Cf8Z71p4.js";import{P as Ae}from"./PotonganRowData-VkdTUiW0.js";import{J as Ce}from"./JurnalStokOpnameRowData-BDahMGZO.js";import{J as Ue}from"./JurnalPenyusutanRowData-CTEQoev7.js";import{F as X}from"./FormInputWithLabel-BfngycS3.js";import{i as Z}from"./actionEvent.helper-C4-AcY8K.js";import{P as ne,l as re}from"./PDFHeader-Bq-1EobC.js";import{D as ie}from"./DebetKreditStatusCard-Dl9bHa9v.js";import{B as Le}from"./BulanSelectedListCard-B5NQa7AL.js";import"./PendapatanRowUraian-jzZZK77o.js";import"./JurnalStokOpnameUraian-DRjyU9q9.js";import"./JurnalPenyusutanRowUraian-D-fDisJA.js";import"./index-BKNjMPK8.js";const de=({item:r,deleteItem:b=()=>{},editItem:g=()=>{},deleteByBuktiTransaksi:x=()=>{},balanceStatus:u=!0,forPrint:m=!1})=>e.jsxs("div",{className:`flex flex-col w-full bg-white text-[13px] ${m?"":"px-3 shadow-md"}`,children:[e.jsx("div",{className:"grid grid-cols-12 sticky top-0 bg-white py-2 border-b-2",children:e.jsxs("div",{className:"p-2 col-span-9 text-black flex items-end",children:[e.jsx("div",{className:"text-[28px] font-bold",children:u?e.jsx("p",{className:`text-[45px] -ml-1 text-white px-2 rounded-md ${r.total.debet==r.total.kredit?"bg-green-900":"bg-red-900"}`,children:r.tanggal}):e.jsx("p",{className:"text-[45px] -ml-1 text-white px-2 rounded-md bg-green-900",children:r.tanggal})}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-end",children:[e.jsxs("div",{className:"text-gray-900 flex flex-col justify-end px-2",children:[e.jsxs("h1",{children:[r.bulan,".",r.tahun]}),e.jsx("h2",{className:"text-[13px] font-bold",children:r.hari})]}),e.jsxs("div",{className:"flex flex-col px-2 border-l-2 border-gray-600",children:[e.jsx("h1",{className:"font-bold",children:"Total"}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsx("div",{className:"text-right text-gray-900",children:e.jsx("h1",{className:" text-green-900 font-bold flex flex-row",children:p(r.total.debet.toFixed(2))})}),e.jsx("div",{className:"text-right text-gray-900",children:e.jsx("h1",{className:" text-red-900 font-bold",children:p(r.total.kredit.toFixed(2))})})]})]})]})})]})}),r.buktiTransaksi.map(t=>e.jsx(e.Fragment,{children:t.sumber=="JURNAL UMUM"||t.sumber=="NERACA BULAN SEBELUMNYA"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-12 items-center bg-gray-3",children:e.jsx("div",{className:" col-span-12 border-x-4 border-transparent text-gray-900 flex flex-row items-center",children:u?e.jsx("div",{className:`${t.debet==t.kredit?"bg-green-900":"bg-red-900"} w-full py-1 text-white text-[12.3px] rounded-sm text-center font-bold px-4`,children:t.bukti_transaksi}):e.jsx("div",{className:"bg-green-900 w-full py-1 text-white text-[12.3px] rounded-sm text-center font-bold px-4",children:t.bukti_transaksi})})}),t.data.map((i,f)=>i.map((c,w)=>e.jsxs(e.Fragment,{children:[e.jsx("hr",{}),w<=i.length?e.jsxs("div",{className:"grid grid-cols-12 items-start py-1",children:[e.jsx("div",{className:"col-span-1 px-2 text-black",children:c.uuid!="NERACA"?ee(c.waktu):" - - "}),e.jsx("div",{className:`col-span-2 text-gray-900 flex flex-col px-2 ${P(c.kredit)>0&&c.uuid!="NERACA"?"text-right":""}`,children:e.jsxs("p",{children:[c.kode_akun," - ",c.nama_akun]})}),e.jsx("div",{className:`${m?"col-span-5":"col-span-4"} text-gray-900 flex flex-col px-2`,children:e.jsx("p",{children:c.uraian})}),e.jsx("div",{className:"text-right px-2 col-span-2 text-gray-900",children:parseFloat(c.debet).toFixed(2)!="0.00"?e.jsx("h1",{className:" text-green-900 font-bold",children:p(c.debet)}):e.jsx(e.Fragment,{})}),e.jsx("div",{className:"text-right px-2 col-span-2 text-gray-900",children:parseFloat(c.kredit).toFixed(2)!="0.00"?e.jsx("h1",{className:" text-red-900 font-bold",children:p(c.kredit)}):e.jsx(e.Fragment,{})}),m?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-black text-center col-span-1 flex justify-center gap-x-3",children:c.sumber=="JURNAL UMUM"&&u?e.jsx($,{size:9,onClick:()=>b(c.uuid),className:"w-max mt-1 text-red-500 cursor-pointer"}):e.jsx(e.Fragment,{})})})]}):e.jsx(e.Fragment,{}),w==i.length-1&&f==t.data.length-1?e.jsxs(e.Fragment,{children:[e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-12 items-start py-3",children:[e.jsx("div",{className:"col-span-1 px-2 text-black text-center font-bold flex justify-center items-center gap-x-5",children:t.sumber=="JURNAL UMUM"&&u?e.jsx(e.Fragment,{children:m?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-center gap-x-2 pl-3 cursor-pointer",onClick:()=>g(t),children:[e.jsx(ue,{size:9,className:"w-max h-full text-yellow-500"}),e.jsx("h1",{className:"font-bold text-yellow-500",children:"Edit"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-x-2 cursor-pointer",onClick:()=>x(t.bukti_transaksi),children:[e.jsx($,{size:9,className:"w-max h-full text-red-500"}),e.jsx("h1",{className:"font-bold text-red-500",children:"Hapus"})]})]})}):e.jsx(e.Fragment,{})}),e.jsx("div",{className:`${m?"col-span-7":"col-span-6"}`}),e.jsx("div",{className:"text-right px-2 col-span-2 text-gray-900",children:e.jsx("h1",{className:" text-green-900 font-bold",children:p(t.debet)})}),e.jsx("div",{className:"text-right px-2 col-span-2 text-gray-900",children:e.jsx("h1",{className:" text-red-900 font-bold",children:p(t.kredit)})})]})]}):e.jsx(e.Fragment,{})]})))]}):e.jsxs(e.Fragment,{children:[t.sumber=="TRANSAKSI BANK"?e.jsx(e.Fragment,{children:e.jsx(Te,{item1:t,balanceStatus:!1,forPrint:m})}):e.jsx(e.Fragment,{}),t.sumber=="TRANSAKSI KAS"?e.jsx(e.Fragment,{children:e.jsx(Fe,{item1:t,balanceStatus:!1,forPrint:m})}):e.jsx(e.Fragment,{}),t.sumber=="GAJI PEGAWAI"||t.sumber=="TUNJANGAN UANG PEGAWAI"||t.sumber=="LEMBUR PEGAWAI"||t.sumber=="HADIAH PEGAWAI"?e.jsx(e.Fragment,{children:e.jsx(Se,{item1:t,balanceStatus:!1,forPrint:m})}):e.jsx(e.Fragment,{}),t.sumber=="PPH 21/26"||t.sumber=="LAIN - LAIN"||t.sumber=="KERUGIAN"||t.sumber=="PIUTANG KARYAWAN"?e.jsx(e.Fragment,{children:e.jsx(Ae,{item1:t,balanceStatus:!1,forPrint:m})}):e.jsx(e.Fragment,{}),W.indexOf(t.sumber)>-1?e.jsx(Ce,{forPrint:m,item1:t,balanceStatus:!1}):e.jsx(e.Fragment,{}),z.indexOf(t.sumber)>-1?e.jsx(Ue,{forPrint:m,item1:t,balanceStatus:!1}):e.jsx(e.Fragment,{})]})}))]}),Ke=ae.forwardRef((r,b)=>e.jsx("div",{ref:b,children:e.jsxs("div",{className:"px-3",children:[e.jsx(ne,{bulan:r.bulan,tahun:r.tahun,title:"Form Jurnal Umum"}),e.jsx("div",{className:"flex justify-between",children:e.jsxs("h1",{className:"text-2xl font-bold",children:["Tanggal : ",me(r.tanggal,!1)]})}),e.jsx("h1",{className:"text-2xl font-bold mb-20",children:r.buktiTransaksi}),r.data.map((g,x)=>e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold",children:["Transaksi ",x+1]}),e.jsxs("div",{className:"grid w-full grid-cols-12 gap-x-2 border-b-2",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Waktu"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Kode Akun"})})})}),e.jsx("div",{className:"col-span-5",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Uraian"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Debet"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Kredit"})})})})]}),g.map(u=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid w-full grid-cols-12 gap-x-2 border-b-2",children:[e.jsx("div",{className:"mt-5 col-span-1",children:e.jsx("p",{children:ee(u.waktu)})}),e.jsx("div",{className:"mt-5 col-span-2",children:e.jsx("p",{children:u.kodeAkun.label})}),e.jsx("div",{className:"mt-5 col-span-5",children:e.jsx("p",{children:u.uraian})}),e.jsx("div",{className:"mt-5 col-span-2",children:e.jsx("p",{children:p(u.debet)})}),e.jsx("div",{className:"mt-5 col-span-2",children:e.jsx("p",{children:p(u.kredit)})})]})})),e.jsxs("div",{className:"grid w-full grid-cols-12 gap-x-2 items-end",children:[e.jsx("div",{className:"mt-5 col-span-8",children:e.jsx("h1",{className:`text-md ${r.totalDebetKredit.totalDebet[x]==r.totalDebetKredit.totalKredit[x]?"text-green-600":"text-red-600"} font-bold mt-1`,children:r.totalDebetKredit.totalDebet[x]==r.totalDebetKredit.totalKredit[x]?"Seimbang":"Tidak Seimbang"})}),e.jsx("div",{className:"mt-5 col-span-2 font-bold",children:e.jsx("p",{children:p(r.totalDebetKredit.totalDebet[x])})}),e.jsx("div",{className:"mt-5 col-span-2 font-bold",children:e.jsx("p",{children:p(r.totalDebetKredit.totalKredit[x])})})]})]}))]})})),Re=({setAddJurnalEvent:r,kodeAkun:b,buktiTransaksiEdit:g,setIsLoadingEvent:x=()=>{},getData:u=()=>{}})=>{const[m,t]=o.useState([]),[i,f]=o.useState([[{waktu:`${new Date().getHours()<10?"0"+new Date().getHours():new Date().getHours()}:${new Date().getMinutes()<10?"0"+new Date().getMinutes():new Date().getMinutes()}:${new Date().getSeconds()<10?"0"+new Date().getSeconds():new Date().getSeconds()}`,kodeAkun:G(),uraian:"",debet:0,kredit:0}]]),[c,w]=o.useState({totalDebet:[0],totalKredit:[0]}),[v,L]=o.useState(se()),[D,K]=o.useState(""),[F,M]=o.useState(b),_=()=>{let n=[...i];n.push([{waktu:`${new Date().getHours()<10?"0"+new Date().getHours():new Date().getHours()}:${new Date().getMinutes()<10?"0"+new Date().getMinutes():new Date().getMinutes()}:${new Date().getSeconds()<10?"0"+new Date().getSeconds():new Date().getSeconds()}`,kodeAkun:G(),uraian:"",debet:0,kredit:0}]),f(n)},R=n=>{let a=[...i],l=[...m];a.at(n).map(s=>{s.uuid&&l.push(s)}),t(l),a.splice(n,1),f(a)},E=n=>{let a=[...i];f([]),a[n].push({waktu:`${new Date().getHours()<10?"0"+new Date().getHours():new Date().getHours()}:${new Date().getMinutes()<10?"0"+new Date().getMinutes():new Date().getMinutes()}:${new Date().getSeconds()<10?"0"+new Date().getSeconds():new Date().getSeconds()}`,kodeAkun:G(),uraian:"",debet:0,kredit:0}),f(a)},S=(n,a)=>{let l=[...i],s=[...m];l[n].at(a).uuid&&s.push(l[n].at(a)),t(s),f([]),l[n].splice(a,1),f(l)},B=async n=>{if(await ge()){let a=await je(n,g,m),l=a.filter(s=>s.status!="POST");l.map(s=>{let{status:d,...k}=s,N=l.filter(y=>y.uuid!=null).map(y=>`'${y.uuid}'`);k.uuidList=N.length>0?N.join(","):"EMPTY",C.custom(`/${k.uuid}`,d,null,d=="PUT"?{data:k}:null).then(()=>{u()}).catch(y=>{U(y)})}),A(0,a)}},A=async(n,a,l=[])=>{if(a[n]){let{status:s,...d}=a[n];if(s=="POST"){let k=a.concat([...l]).filter(N=>N.uuid!=null).map(N=>`'${N.uuid}'`);d.uuidList=k.length>0?k.join(","):"EMPTY";try{let N=await pe.post(C.getUrlCRUD(),d);l.push({...N.data.data}),n+1<a.length?A(n+1,a,l):(u(),r(),I("Berhasil","Transaksi Berhasil Disimpan"))}catch(N){U(N)}}else n+1<a.length?A(n+1,a,l):(u(),r(),I("Berhasil","Transaksi Berhasil Disimpan"))}},j=(n,a,l,s)=>{let d=[...i];f([]),d[a][l][s]=n,f(d)},J=o.useRef(),H=re.useReactToPrint({content:()=>J.current});return o.useEffect(()=>{x(!0),M(b),g!=null&&(K(g.buktiTransaksi),L(g.hariTanggal),f(g.transaksiList)),x(!1)},[]),o.useEffect(()=>{let n=[0],a=[0];i.map((l,s)=>{n[s]=0,a[s]=0,l.map(d=>{n[s]+=P(d.debet),a[s]+=P(d.kredit)})}),w({totalDebet:parseFloat(n).toFixed(2),totalKredit:parseFloat(a).toFixed(2)})},[i]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white rounded-md shadow-2xl h-[70vh] overflow-scroll no-scrollbar relative",children:[e.jsxs("div",{className:"sticky top-0 pt-3 px-6 h-max bg-white w-full z-10",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[g!=null?"Edit ":"Tambah "," Transaksi"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>r(),children:[e.jsx(te,{})," Batalkan Transaksi"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(X,{label:"Hari/Tanggal",type:"date",onchange:n=>{L(n.target.value)},others:{value:v,name:"hariTanggal"}}),e.jsx(X,{label:"Bukti Transaksi",type:"text",onchange:n=>{K(n.target.value)},others:{value:D,name:"buktiTransaksi"}})]})]}),e.jsxs("div",{className:"flex flex-col px-6 mt-6 w-full",children:[i.map((n,a)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsxs("span",{className:"flex items-center gap-x-2 label-text text-gray-800 font-bold mt-4",children:[e.jsxs("p",{children:["Transaksi ",a+1]}),e.jsx("div",{className:"px-2 py-2 rounded-full bg-red-900 cursor-pointer",onClick:()=>R(a),children:e.jsx($,{className:"text-white"})})]})})}),e.jsxs("div",{className:"grid w-full grid-cols-12 gap-x-2 border-b-2",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Waktu"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Kode Akun"})})})}),e.jsx("div",{className:"col-span-5",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Uraian"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Debet"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Kredit"})})})})]}),e.jsxs("div",{className:"grid w-full items-end grid-cols-12 gap-x-2",children:[n.map((l,s)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-5 col-span-1",children:e.jsx(T,{name:`waktu_${s}`,type:"time",value:l.waktu,onchange:d=>j(d.target.value,a,s,"waktu"),other:{autoComplete:!1,step:1}})}),e.jsx("div",{className:"mt-5 col-span-3",children:e.jsx(he,{optionsDataList:F,optionsLabel:["code","name"],optionsValue:"uuid",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:l.kodeAkun,onchange:d=>{j(d,a,s,"kodeAkun")},addClass:P(l.kredit)>0?"text-right":"",selectName:`kodeAkun_${s}`})}),e.jsx("div",{className:"mt-5 col-span-4",children:e.jsx(T,{name:`uraian_${s}`,type:"text",value:l.uraian,onchange:d=>j(d.target.value,a,s,"uraian"),other:{autoComplete:!1}})}),e.jsx("div",{className:"mt-5 col-span-2",children:e.jsx(T,{name:`debet_${s}`,type:"text",value:p(l.debet),onchange:d=>{Z(d),j(0,a,s,"kredit"),j(d.target.value,a,s,"debet")},other:{autoComplete:!1}})}),e.jsx("div",{className:"mt-5 col-span-2",children:e.jsxs("div",{className:"w-full indicator",children:[e.jsx("span",{className:"indicator-item indicator-bottom badge bg-red-800 text-white px-2 py-4 cursor-pointer",onClick:()=>S(a,s),children:e.jsx($,{})}),e.jsx(T,{name:`kredit_${s}`,type:"text",value:p(l.kredit),onchange:d=>{Z(d),j(0,a,s,"debet"),j(d.target.value,a,s,"kredit")},other:{autoComplete:!1}})]})})]})),e.jsx("div",{className:"mt-5 col-span-4",children:V("demo_permission")&&n.length<2?e.jsx(e.Fragment,{children:e.jsxs("button",{className:"btn btn-sm bg-blue-800 mt-4 text-white",onClick:()=>E(a),children:[e.jsx(Y,{})," Tambah"]})}):e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-red-500 font-bold text-xs",children:"* Hanya Mengijinkan 2 Inputan Dalam Mode Demo"})})}),e.jsx("div",{className:"mt-5 col-span-4 text-right",children:e.jsxs("h1",{className:`text-md ${c.totalDebet[a]==c.totalKredit[a]?"text-green-600":"text-red-600"} font-bold mt-1`,children:["Total ( ",c.totalDebet[a]==c.totalKredit[a]?"Seimbang":"Tidak Seimbang"," )"]})}),e.jsx("div",{className:"mt-5 col-span-2 font-bold",children:e.jsx(T,{border:!1,name:"totalDebet",type:"text",value:p(c.totalDebet[a]),other:{autoComplete:!1,disabled:!0}})}),e.jsx("div",{className:"mt-5 col-span-2 font-bold",children:e.jsx(T,{border:!1,name:"totalKredit",type:"text",value:p(c.totalKredit[a]),other:{autoComplete:!1,disabled:!0}})})]})]})})),e.jsxs("div",{className:"flex sticky bottom-0 bg-white py-3 w-full items-end gap-x-2",children:[V("demo_permission")&&i.length==1?e.jsx(e.Fragment,{children:e.jsxs("button",{className:"btn btn-sm bg-blue-800 mt-4 text-white",onClick:()=>_(),children:[e.jsx(Y,{})," Tambah Transaksi"]})}):e.jsx(e.Fragment,{}),i.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{B({transaksiList:i,hariTanggal:v,buktiTransaksi:D})},children:[e.jsx(be,{})," Simpan"]}),e.jsx("div",{className:"hidden",children:e.jsx(Ke,{data:i,buktiTransaksi:D,totalDebetKredit:c,tanggal:v,ref:J})}),e.jsxs("button",{onClick:H,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white mt-2 border-red-600",children:[e.jsx(le,{})," Cetak Form"]})]}):e.jsx(e.Fragment,{})]})]})]})})},Ee=ae.forwardRef((r,b)=>e.jsxs("div",{ref:b,children:[e.jsx(ne,{bulan:r.bulan,tahun:r.tahun,title:"Jurnal Umum"}),e.jsx(ie,{debet:r.debet,kredit:r.kredit,forPrint:!0}),r.data.map((g,x)=>e.jsx(de,{deleteByBuktiTransaksi:()=>{},deleteItem:()=>{},editItem:()=>{},item:g,balanceStatus:()=>{},forPrint:!0},x))]})),Xe=()=>{const r=fe(),{data:b,setData:g}=r,[x,u]=o.useState(""),[m,t]=o.useState(!1),[i,f]=o.useState(new Date().getMonth()),[c,w]=o.useState(0),[v,L]=o.useState(0),[D,K]=o.useState([]),[F,M]=o.useState(!0),[_,R]=o.useState({initialHariTanggal:se(),initialBuktiTransaksi:"",initialTransaksiList:[]}),[E,S]=o.useState(!1),B=o.useRef(),A=re.useReactToPrint({content:()=>B.current}),j=(a="")=>{t(!0),a==""&&u(a),C.custom(`/bulan/${i+1}/${b.tahun}/bukti_transaksi?search=${a}`,"GET").then(async l=>{let s=b;s.dashboard.overview[i].jurnal=null,s.dashboard.overview[i].neracaSaldo=null,s.dashboard.overview[i].labaRugi=null,s.dashboard.overview[i].neraca=null,s.dashboard.overview[i].perubahanModal=null,s.dashboard.penjualan[i]=null,s.dashboard.pembelian[i]=null,s.dashboard.biaya[i]=null,g(s);const d=l.data.filter(h=>W.concat(...z).indexOf(h.sumber)==-1),N=l.data.filter(h=>W.indexOf(h.sumber)>-1).map(h=>(h.detail_json=JSON.parse(h.uraian).json,h.detail_data=JSON.parse(h.uraian).detail,h)),ce=l.data.filter(h=>z.indexOf(h.sumber)>-1).map(h=>(h.detail_data=JSON.stringify(JSON.parse(h.uraian).detail),h)),oe=q(N),xe=q(ce);let O=await De(d.concat(...oe).concat(...xe));M(a.length<1),K(O.returnData),w(O.totalDebet),L(O.totalKredit),t(!1)}).catch(l=>{U(l)})},J=async a=>{await Q("Hapus","Yakin ingin hapus data ini ?")&&C.custom(`/${a}`,"DELETE").then(l=>{I("Berhasil","Transaksi berhasil dihapus"),j()}).catch(l=>{U(l)})},H=async a=>{await Q("Hapus","Yakin ingin hapus data di bukti transaksi ini ?")&&(t(!0),C.custom("/by_bukti_transaksi","DELETE",null,{data:{bukti_transaksi:a}}).then(()=>{I("Berhasil","Transaksi berhasil dihapus"),j()}).catch(l=>{U(l)}))},n=async a=>{t(!0),R({buktiTransaksi:a.bukti_transaksi,hariTanggal:`${a.tahun}-${a.bulan}-${a.tanggal}`,transaksiList:await ye(a.data,b.kodeAkun)}),S(!0),t(!1)};return o.useEffect(()=>{j()},[i]),e.jsx(Ne,{isLoading:m,children:e.jsxs("div",{children:[e.jsx(ke,{title:"Jurnal Umum"}),E?e.jsx(Re,{setAddJurnalEvent:()=>S(!E),kodeAkun:b.kodeAkun,buktiTransaksiEdit:_,getData:j,setIsLoadingEvent:t}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:x,onChange:a=>u(a.target.value)}),F?e.jsx(we,{className:"cursor-pointer",onClick:()=>j(x)}):e.jsx(te,{className:"cursor-pointer",onClick:()=>{j("")}})]}),e.jsx("div",{children:e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{R(null),S(!0)},children:[e.jsx(Y,{})," Tambah Transaksi"]})})]}),e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx(Le,{bulan:i,setBulan:f}),F?e.jsx(ie,{debet:c,kredit:v}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"hidden",children:e.jsx(Ee,{data:D,debet:c,kredit:v,tahun:b.tahun,bulan:ve(i),ref:B})}),e.jsxs("button",{onClick:A,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white mt-2 border-red-600",children:[e.jsx(le,{})," Cetak Jurnal Umum"]})]}),e.jsx("div",{className:"col-span-5",children:e.jsx("div",{className:"h-[65vh] pl-2",children:e.jsx("div",{className:"flex flex-col h-full overflow-y-scroll no-scrollbar w-full rounded-md",children:D.map((a,l)=>e.jsx(de,{deleteByBuktiTransaksi:H,deleteItem:J,editItem:n,item:a,balanceStatus:F},l))})})})]})]})]})})};export{Xe as default};
