import{r as l,j as e,b as y,h as B,k as $,W as b,n as p,s as g,R as L,u as W,o as _,e as A,p as I,i as U,a as H,F as q,q as G}from"./index-D4RqvJs4.js";import{P as M}from"./PageTitle-DUNNQqVc.js";import{W as O}from"./Wrap-DQ2PFJhN.js";import{P as V}from"./Pagination-Bq4QT9q6.js";import{F as Y}from"./FormInputWithLabel-lIZpCkjM.js";import{l as J}from"./index-CG9KPJQi.js";import{P as K}from"./PDFHeader-qSI1BbDw.js";import"./index-BKNjMPK8.js";const Q=({setAddDivisiEvent:i=()=>{},divisiEdit:t,getData:n=()=>{}})=>{const[o,h]=l.useState(t!=null&&t.name?t.name:""),x=async()=>{await $()&&b.custom(`${t!=null&&t.uuid?`/${t.uuid}`:""}`,t?"PUT":"POST",null,{data:{name:o}}).then(()=>{t?p("Berhasil","Data berhasil diupdate"):p("Berhasil","Data berhasil disimpan"),i(),n()}).catch(r=>{g(r)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[t?"Edit":"Tambahkan"," Divisi"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>i(),children:[e.jsx(y,{})," Batalkan Divisi"]})]}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(Y,{label:"Nama Divisi",type:"text",onchange:r=>{h(r.target.value)},others:{value:o,name:"namaDivisi"}})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{x()},children:[e.jsx(B,{})," Simpan"]})]})})},X=L.forwardRef((i,t)=>{var n;return e.jsxs("div",{ref:t,children:[e.jsx(K,{bulan:i.bulan,tahun:i.tahun,title:"Divisi"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Divisi"})]})}),e.jsx("tbody",{children:(n=i==null?void 0:i.data)==null?void 0:n.map((o,h)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsx("td",{children:o.name})]},h)}))})]})]})}),le=()=>{const i=W(),{data:t}=i,[n,o]=l.useState([]),[h,x]=l.useState(!1),[r,u]=l.useState(!1),[S,f]=l.useState({name:""}),[k,C]=l.useState(!1),[v,N]=l.useState(""),w=l.useRef(),F=J.useReactToPrint({content:()=>w.current}),[d,j]=l.useState({page:1,size:10,count:118,lastPage:12}),c=(a="")=>{a==""&&N(a),x(!0),b.custom(`?search=${a}&page=${d.page}&size=${d.size}`,"GET").then(s=>{var m,D;C(a.length<1),o((m=s==null?void 0:s.data)==null?void 0:m.entry),j((D=s==null?void 0:s.data)==null?void 0:D.pagination),x(!1)}).catch(s=>{g(s)})},P=a=>{let s=n[a];f(s),u(!r)},T=async a=>{if(await G("Hapus","Yakin ingin hapus data ini ?")){let s=n[a];b.custom(`/${s.uuid}`,"DELETE").then(()=>{p("Berhasil","Data berhasil dihapus"),c()}).catch(m=>{g(m)})}},R=({selected:a})=>{let s=d;s.page=a+1,j(s),c()},z=a=>{let s=d;s.size=a,s.page=1,j(s),c()};return l.useEffect(()=>{c()},[]),e.jsx(O,{isLoading:h,children:e.jsxs("div",{children:[e.jsx(M,{title:"Divisi"}),r?e.jsx(Q,{setAddDivisiEvent:()=>u(!1),getData:c,divisiEdit:S}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:v,onChange:a=>N(a.target.value)}),k?e.jsx(_,{onClick:()=>{c(v)},className:"cursor-pointer"}):e.jsx(y,{onClick:()=>c(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{f(null),u(!r)},children:[e.jsx(A,{})," Tambah Divisi"]}),e.jsx("div",{className:"hidden",children:e.jsx(X,{data:n,ref:w,bulan:I(new Date().getMonth()),tahun:t.tahun})}),e.jsxs("button",{onClick:F,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(U,{})," Cetak Divisi"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Divisi"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:n==null?void 0:n.map((a,s)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[s+1,"."]}),e.jsx("td",{children:a.name}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(H,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{P(s)}}),e.jsx(q,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{T(s)}})]})]},s)}))})]})}),e.jsx(V,{paginateUpdatePage:R,paginate:d,setSize:z})]})]})})};export{le as default};
