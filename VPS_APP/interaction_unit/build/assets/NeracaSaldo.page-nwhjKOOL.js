import{j as e,R as y,u as P,r as n,p as F,i as R,t as D}from"./index-DHco5UoW.js";import{W as K}from"./Wrap-UDT2yOyM.js";import{P as C}from"./PageTitle-DhSJ_t28.js";import{B as _}from"./BulanSelectedListCard-Cb85laQr.js";import{D as p}from"./DebetKreditStatusCard-vktTa4pC.js";import{g,p as u}from"./number.helper-_FlTjox4.js";import{P as E,l as B}from"./PDFHeader-CVMgwoPg.js";import"./index-BKNjMPK8.js";const T=a=>new Promise((r,c)=>{let t=0,d=0;try{t=g(a.map(s=>s.debet)),d=g(a.map(s=>s.kredit))}catch{t=0,d=0}r({totalDebet:t,totalKredit:d,data:a})}),f=({item:a})=>a.kredit!=0||a.debet!=0?e.jsxs(e.Fragment,{children:[e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-12 items-start py-1",children:[e.jsx("div",{className:"col-span-4 text-gray-900 px-2",children:e.jsxs("p",{children:[a.kode_akun_perkiraan_code," - ",a.kode_akun_perkiraan_name]})}),e.jsx("div",{className:"col-span-4 text-green-900 px-2 font-bold",children:a.debet>0?e.jsx("p",{children:u(a.debet)}):e.jsx(e.Fragment,{})}),e.jsx("div",{className:"col-span-4 text-red-900 px-2 font-bold",children:a.kredit>0?e.jsx("p",{children:u(a.kredit)}):e.jsx(e.Fragment,{})})]})]}):e.jsx(e.Fragment,{}),L=y.forwardRef((a,r)=>e.jsxs("div",{ref:r,children:[e.jsx(E,{bulan:a.bulan,tahun:a.tahun,title:"Neraca Saldo"}),e.jsx(p,{debet:a.debet,kredit:a.kredit,forPrint:!0}),a.data.length>0?e.jsxs("div",{className:"flex flex-col w-full bg-white text-[13px] pb-3",children:[a.data.length>0?e.jsxs("div",{className:"grid grid-cols-12 bg-white col-span-12 items-end py-3 sticky top-0",children:[e.jsx("div",{className:"col-span-4 text-gray-900 font-bold flex flex-col px-2",children:e.jsx("h1",{className:"text-md",children:"Kode Akun Perkiraan"})}),e.jsx("div",{className:"px-2 col-span-4 text-gray-900 font-bold",children:e.jsx("h1",{className:"text-md",children:"Debet"})}),e.jsx("div",{className:"px-2 col-span-4 text-gray-900 font-bold",children:e.jsx("h1",{className:"text-md",children:"Kredit"})})]}):e.jsx(e.Fragment,{}),a.data.length>0?a.data.map((c,t)=>e.jsx(f,{item:c})):e.jsx(e.Fragment,{})]}):e.jsx(e.Fragment,{})]})),O=()=>{const a=P(),{data:r,setData:c}=a,[t,d]=n.useState(new Date().getMonth()),[s,b]=n.useState([]),[x,N]=n.useState(0),[h,v]=n.useState(0),[k,m]=n.useState(!1),j=n.useRef(),S=B.useReactToPrint({content:()=>j.current}),w=()=>{m(!0),D.custom(`/${t+1}/${r.tahun}`,"GET").then(async l=>{let i=r;i.dashboard.overview[t].neracaSaldo=l==null?void 0:l.data,c(i);let o=await T(l.data);b(o.data),N(o.totalDebet),v(o.totalKredit),m(!1)}).catch(l=>{showError(l)})};return n.useEffect(()=>{w()},[t]),e.jsx(K,{isLoading:k,children:e.jsxs("div",{children:[e.jsx(C,{title:"Neraca Saldo"}),e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx(_,{bulan:t,setBulan:d}),e.jsx(p,{debet:x,kredit:h}),e.jsx("div",{className:"hidden",children:e.jsx(L,{data:s,ref:j,bulan:F(t),tahun:r.tahun,debet:x,kredit:h})}),e.jsxs("button",{onClick:S,className:"btn btn-sm bg-red-600 hover:bg-red-600 mt-2 text-white border-red-600",children:[e.jsx(R,{})," Cetak Neraca Saldo"]})]}),e.jsx("div",{className:"col-span-5",children:e.jsx("div",{className:"h-[65vh] pl-2",children:e.jsx("div",{className:"flex flex-col h-full overflow-y-scroll no-scrollbar w-full rounded-md",children:s.length>0?e.jsxs("div",{className:"flex flex-col w-full bg-white text-[13px] px-3 pb-3 shadow-md",children:[s.length>0?e.jsxs("div",{className:"grid grid-cols-12 bg-white col-span-12 items-end py-4 sticky top-0",children:[e.jsx("div",{className:"col-span-4 text-gray-900 font-bold flex flex-col px-2",children:e.jsx("h1",{className:"text-2xl",children:"Kode Akun Perkiraan"})}),e.jsx("div",{className:"px-2 col-span-4 text-gray-900 font-bold",children:e.jsx("h1",{className:"text-2xl",children:"Debet"})}),e.jsx("div",{className:"px-2 col-span-4 text-gray-900 font-bold",children:e.jsx("h1",{className:"text-2xl",children:"Kredit"})})]}):e.jsx(e.Fragment,{}),s.length>0?s.map((l,i)=>e.jsx(f,{item:l})):e.jsx(e.Fragment,{})]}):e.jsx(e.Fragment,{})})})})]})]})})};export{O as default};
