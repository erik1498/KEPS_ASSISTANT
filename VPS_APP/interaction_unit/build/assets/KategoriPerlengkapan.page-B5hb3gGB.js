import{r,j as e,b as A,h as R,A as z,s as g,k as I,ad as y,n as P,R as B,u as $,o as V,e as O,p as U,i as W,a as G,F as H,q}from"./index-BFtBgOrg.js";import{P as M}from"./PageTitle-Hc-YSVDI.js";import{f as S,W as Y}from"./Wrap-Dk-wg8kL.js";import{P as J}from"./Pagination-CNke5GoU.js";import{F as Q}from"./FormInputWithLabel-zEsdZ3IQ.js";import{F as v}from"./FormSelectWithLabel-BuQTQxHx.js";import{P as X,l as Z}from"./PDFHeader-BGA35-Z9.js";import"./react-paginate-C1eAq6Tf.js";import"./FormInput-DctP6iug.js";import"./index-BKNjMPK8.js";const E=({setAddKategoriPerlengkapanEvent:l=()=>{},kategoriPerlengkapanEdit:a,getData:i=()=>{}})=>{const[c,u]=r.useState(a!=null&&a.name?a.name:""),[m,o]=r.useState(a!=null&&a.kode_akun_perkiraan_debet_name?a.kode_akun_perkiraan_debet_name:""),[h,p]=r.useState(a!=null&&a.kode_akun_perkiraan_kredit_code?a.kode_akun_perkiraan_kredit_code:""),[x,_]=r.useState([]),K=()=>{z.custom("","GET").then(s=>{if(_(s.data.entry),s.data.entry.length>0){if(a){S({editObject:a.kode_akun_perkiraan_debet,dataList:s.data.entry,setState:o,labelKey:["code","name"],valueKey:"uuid",labelIsArray:!0,delimiterLabel:" - "}),S({editObject:a.kode_akun_perkiraan_kredit,dataList:s.data.entry,setState:p,labelKey:["code","name"],valueKey:"uuid",labelIsArray:!0,delimiterLabel:" - "});return}o({label:s.data.entry[0].name,value:s.data.entry[0].uuid})}}).catch(s=>{g(s)})},k=async()=>{await I()&&y.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{name:c,kode_akun_perkiraan_debet:m.value,kode_akun_perkiraan_kredit:h.value}}).then(()=>{a?P("Berhasil","Data berhasil diupdate"):P("Berhasil","Data berhasil disimpan"),l(),i()}).catch(s=>{g(s)})};return r.useEffect(()=>{K()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Kategori Perlengkapan"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>l(),children:[e.jsx(A,{})," Batalkan Kategori Perlengkapan"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(Q,{label:"Nama Kategori Perlengkapan",type:"text",onchange:s=>{u(s.target.value)},others:{value:c,name:"namaKategoriPerlengkapan"}}),e.jsx(v,{label:"Kode Akun Debet",optionsDataList:x,optionsLabel:["code","name"],optionsDelimiter:"-",optionsLabelIsArray:!0,optionsValue:"uuid",selectValue:m,onchange:s=>{o(s)},selectName:"kodeAkunPerkiraanDaftarPerlengkapan"}),e.jsx(v,{label:"Kode Akun Perkiraan Kredit",optionsDataList:x,optionsLabel:["code","name"],optionsDelimiter:"-",optionsLabelIsArray:!0,optionsValue:"uuid",selectValue:h,onchange:s=>{p(s)},selectName:"kodeAkunPerkiraanDaftarPerlengkapan"})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{k()},children:[e.jsx(R,{})," Simpan"]})]})})},ee=B.forwardRef((l,a)=>{var i;return e.jsxs("div",{ref:a,children:[e.jsx(X,{bulan:l.bulan,tahun:l.tahun,title:"Daftar Kategori Perlengkapan"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Kategori Perlengkapan"})]})}),e.jsx("tbody",{children:(i=l==null?void 0:l.data)==null?void 0:i.map((c,u)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:u+1}),e.jsx("td",{children:c.name})]},u)}))})]})]})}),ue=()=>{const l=$(),{data:a}=l,[i,c]=r.useState([]),[u,m]=r.useState(!1),[o,h]=r.useState(!1),[p,x]=r.useState({name:""}),[_,K]=r.useState(!1),[k,s]=r.useState(""),N=r.useRef(),F=Z.useReactToPrint({content:()=>N.current}),[b,f]=r.useState({page:1,size:10,count:118,lastPage:12}),d=(n="")=>{n==""&&s(n),m(!0),y.custom(`?search=${n}&page=${b.page}&size=${b.size}`,"GET").then(t=>{var j,w;K(n.length<1),c((j=t==null?void 0:t.data)==null?void 0:j.entry),f((w=t==null?void 0:t.data)==null?void 0:w.pagination),m(!1)}).catch(t=>{g(t)})},C=n=>{let t=i[n];x(t),h(!o)},L=async n=>{if(await q("Hapus","Yakin ingin hapus data ini ?")){let t=i[n];y.custom(`/${t.uuid}`,"DELETE").then(()=>{P("Berhasil","Data berhasil dihapus"),d()}).catch(j=>{g(j)})}},D=({selected:n})=>{let t=b;t.page=n+1,f(t),d()},T=n=>{let t=b;t.size=n,t.page=1,f(t),d()};return r.useEffect(()=>{d()},[]),e.jsx(Y,{isLoading:u,children:e.jsxs("div",{children:[e.jsx(M,{title:"Kategori Perlengkapan"}),o?e.jsx(E,{setAddKategoriPerlengkapanEvent:()=>h(!1),getData:d,kategoriPerlengkapanEdit:p}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:k,onChange:n=>s(n.target.value)}),_?e.jsx(V,{onClick:()=>{d(k)},className:"cursor-pointer"}):e.jsx(A,{onClick:()=>d(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{x(null),h(!o)},children:[e.jsx(O,{})," Tambah Kategori Perlengkapan"]}),e.jsx("div",{className:"hidden",children:e.jsx(ee,{data:i,ref:N,bulan:U(new Date().getMonth()),tahun:a.tahun})}),e.jsxs("button",{onClick:F,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(W,{})," Cetak Kategori Perlengkapan"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Kategori Perlengkapan"}),e.jsx("th",{children:"Kode Akun Perkiraan Debet"}),e.jsx("th",{children:"Kode Akun Perkiraan Kredit"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:i==null?void 0:i.map((n,t)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[t+1,"."]}),e.jsx("td",{children:n.name}),e.jsxs("td",{children:[n.kode_akun_perkiraan_debet_code," - ",n.kode_akun_perkiraan_debet_name]}),e.jsxs("td",{children:[n.kode_akun_perkiraan_kredit_code," - ",n.kode_akun_perkiraan_kredit_name]}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(G,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{C(t)}}),e.jsx(H,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{L(t)}})]})]},t)}))})]})}),e.jsx(J,{paginateUpdatePage:D,paginate:b,setSize:T})]})]})})};export{ue as default};
