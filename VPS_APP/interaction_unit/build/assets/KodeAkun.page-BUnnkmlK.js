import{r as n,O as H,j as e,d as C,Q as W,T as L,S as z,m as I,o as O,U as v,v as S,t as _,R as V,w as k,W as G,x as M,y as Q,l as Y,z as q,n as J,b as X,F as Z,D as A}from"./index-DkLWHN4U.js";import{P as E}from"./Pagination-BRVZ5jKo.js";import{F as P}from"./FormInputWithLabel-CsT-VGf4.js";import{a as ee}from"./actionEvent.helper-R7pYClSI.js";import{T as B}from"./ToggleBox-C-b9Cc_x.js";import{P as ae,l as se}from"./PDFHeader-DqJvDgdi.js";import"./react-paginate-ByHbu1vo.js";import"./index-BKNjMPK8.js";const te=({setAddKodeAkunEvent:r=()=>{},kodeAkunEdit:a,getData:i=()=>{}})=>{const[l,x]=n.useState(a!=null&&a.name?a.name:""),[d,j]=n.useState(a!=null&&a.code?a.code:""),[p,g]=n.useState(H()),[b,y]=n.useState(a!=null&&a.type_transaksi_kas_bank?a==null?void 0:a.type_transaksi_kas_bank:0),[T,N]=n.useState(a!=null&&a.type_transaksi_payroll?a==null?void 0:a.type_transaksi_payroll:0),[u,f]=n.useState({label:a!=null&&a.type?a.type:"Harta",value:a!=null&&a.type?a.type:"Harta"}),K=async()=>{await O()&&v.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{type:u.value,name:l,code:d,type_transaksi_kas_bank:b,type_transaksi_payroll:T}}).then(()=>{a?S("Berhasil","Data berhasil diupdate"):S("Berhasil","Data berhasil disimpan"),r(),i()}).catch(c=>{_(c)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Kode Akun"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>r(),children:[e.jsx(C,{})," Batalkan Kode Akun"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(P,{label:"Nama Akun",type:"text",onchange:c=>{x(c.target.value)},others:{value:l,name:"namaAkun"}}),e.jsx(P,{label:"Kode Akun",type:"text",onchange:c=>{ee(c),j(c.target.value)},others:{value:d,name:"kodeAkun"}}),e.jsx(W,{label:"Tipe Akun",onchange:c=>{f(c)},optionsDataList:p,optionsLabel:"name",optionsValue:"name",selectName:"kodeAkunType",selectValue:u})]}),e.jsx("div",{className:"mt-5 flex gap-x-2",children:e.jsx(B,{label:"Tipe Untuk Transaksi Kas Dan Bank",setToggleBox:y,toggleBox:b,toggleBoxList:L})}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(B,{label:"Tipe Untuk Transaksi Payroll",setToggleBox:N,toggleBox:T,toggleBoxList:z})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{K()},children:[e.jsx(I,{})," Simpan"]})]})})},ne=V.forwardRef((r,a)=>{var i;return e.jsxs("div",{ref:a,children:[e.jsx(ae,{bulan:r.bulan,tahun:r.tahun,title:"Kode Akun"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Kode Akun"}),e.jsx("th",{children:"Tipe Akun"}),e.jsx("th",{children:"Nama Akun"})]})}),e.jsx("tbody",{children:(i=r==null?void 0:r.data)==null?void 0:i.map((l,x)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:x+1}),e.jsx("td",{children:l.code}),e.jsx("td",{children:l.type}),e.jsx("td",{children:l.name})]},x)}))})]})]})}),ue=()=>{const r=k(),{_getDataKodeAkun:a,data:i}=r,[l,x]=n.useState([]),[d,j]=n.useState(!1),[p,g]=n.useState(!1),[b,y]=n.useState({name:"",code:"",type:"",uuid:""}),[T,N]=n.useState(!1),[u,f]=n.useState(""),K=n.useRef(),c=se.useReactToPrint({content:()=>K.current}),[m,w]=n.useState({page:1,size:10,count:118,lastPage:12}),h=(t="")=>{t==""&&f(t),j(!0),v.custom(`?search=${t}&page=${m.page}&size=${m.size}`,"GET").then(s=>{var o,F;N(t.length<1),x((o=s==null?void 0:s.data)==null?void 0:o.entry),w((F=s==null?void 0:s.data)==null?void 0:F.pagination),j(!1),a()}).catch(s=>{_(s)})},R=t=>{let s=l[t];y(s),g(!p)},U=async t=>{if(await A("Hapus","Yakin ingin hapus data ini ?")){let s=l[t];v.custom(`/${s.uuid}`,"DELETE").then(()=>{S("Berhasil","Data berhasil dihapus"),h()}).catch(o=>{_(o)})}},D=({selected:t})=>{let s=m;s.page=t+1,w(s),h()},$=t=>{let s=m;s.size=t,s.page=1,w(s),h()};return n.useEffect(()=>{h()},[]),e.jsx(G,{isLoading:d,children:e.jsxs("div",{children:[e.jsx(M,{title:"Kode Akun"}),p?e.jsx(te,{setAddKodeAkunEvent:()=>g(!1),getData:h,kodeAkunEdit:b}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:u,onChange:t=>f(t.target.value)}),T?e.jsx(Q,{onClick:()=>{h(u)},className:"cursor-pointer"}):e.jsx(C,{onClick:()=>h(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{y(null),g(!p)},children:[e.jsx(Y,{})," Tambah Kode Akun"]}),e.jsx("div",{className:"hidden",children:e.jsx(ne,{data:i==null?void 0:i.kodeAkun,ref:K,bulan:q(new Date().getMonth()),tahun:i.tahun})}),e.jsxs("button",{onClick:c,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(J,{})," Cetak Kode Akun"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Kode Akun"}),e.jsx("th",{children:"Tipe Akun"}),e.jsx("th",{children:"Nama Akun"}),e.jsx("th",{children:"Tipe Untuk Transaksi Kas Dan Bank"}),e.jsx("th",{children:"Tipe Untuk Transaksi Payroll"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((t,s)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[s+1,"."]}),e.jsx("td",{children:t.code}),e.jsx("td",{children:t.type}),e.jsx("td",{children:t.name}),e.jsx("td",{children:L.filter(o=>o.value==t.type_transaksi_kas_bank).at(0).label}),e.jsx("td",{children:z.filter(o=>o.value==t.type_transaksi_payroll).at(0).label}),e.jsx("td",{className:"flex gap-x-2",children:t.update_permission?e.jsxs(e.Fragment,{children:[e.jsx(X,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{R(s)}}),e.jsx(Z,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{U(s)}})]}):e.jsx(e.Fragment,{})})]},s)}))})]})}),e.jsx(E,{paginateUpdatePage:D,paginate:m,setSize:$})]})]})})};export{ue as default};
