import{r,j as e,b as f,h as F,k as R,ag as N,n as p,s as y,R as T,u as M,o as z,i as $}from"./index-CH4D0Lt-.js";import{P as B}from"./PageTitle-DbvUOkqr.js";import{W as L}from"./Wrap-5ys34sV1.js";import{P as U}from"./Pagination-BzIqssJ_.js";import{F as W}from"./FormInputWithLabel-DSO_Zp9u.js";import{P as A,l as I}from"./PDFHeader-nmfnFTDc.js";import"./react-paginate-CJd_j2MB.js";import"./index-BKNjMPK8.js";const _=({setAddMetodePenyusutanEvent:s=()=>{},MetodePenyusutanEdit:a,getData:l=()=>{}})=>{const[i,c]=r.useState(a!=null&&a.name?a.name:""),x=async()=>{await R()&&N.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{name:i}}).then(()=>{a?p("Berhasil","Data berhasil diupdate"):p("Berhasil","Data berhasil disimpan"),s(),l()}).catch(d=>{y(d)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Metode Penyusutan"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>s(),children:[e.jsx(f,{})," Batalkan Metode Penyusutan"]})]}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(W,{label:"Nama Metode Penyusutan",type:"text",onchange:d=>{c(d.target.value)},others:{value:i,name:"namaMetodePenyusutan"}})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{x()},children:[e.jsx(F,{})," Simpan"]})]})})};T.forwardRef((s,a)=>{var l;return e.jsxs("div",{ref:a,children:[e.jsx(A,{bulan:s.bulan,tahun:s.tahun,title:"Daftar Metode Penyusutan"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Metode Penyusutan"})]})}),e.jsx("tbody",{children:(l=s==null?void 0:s.data)==null?void 0:l.map((i,c)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:c+1}),e.jsx("td",{children:i.name})]},c)}))})]})]})});const Y=()=>{M();const[s,a]=r.useState([]),[l,i]=r.useState(!1),[c,x]=r.useState(!1),[d,G]=r.useState({name:""}),[w,P]=r.useState(!1),[u,j]=r.useState(""),v=r.useRef(),S=I.useReactToPrint({content:()=>v.current}),[h,m]=r.useState({page:1,size:10,count:118,lastPage:12}),o=(n="")=>{n==""&&j(n),i(!0),N.custom(`?search=${n}&page=${h.page}&size=${h.size}`,"GET").then(t=>{var b,g;P(n.length<1),a((b=t==null?void 0:t.data)==null?void 0:b.entry),m((g=t==null?void 0:t.data)==null?void 0:g.pagination),i(!1)}).catch(t=>{y(t)})},k=({selected:n})=>{let t=h;t.page=n+1,m(t),o()},C=n=>{let t=h;t.size=n,t.page=1,m(t),o()};return r.useEffect(()=>{o()},[]),e.jsx(L,{isLoading:l,children:e.jsxs("div",{children:[e.jsx(B,{title:"Metode Penyusutan"}),c?e.jsx(_,{setAddMetodePenyusutanEvent:()=>x(!1),getData:o,metodePenyusutanEdit:d}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:u,onChange:n=>j(n.target.value)}),w?e.jsx(z,{onClick:()=>{o(u)},className:"cursor-pointer"}):e.jsx(f,{onClick:()=>o(""),className:"cursor-pointer"})]}),e.jsx("div",{className:"flex gap-x-2 items-center",children:e.jsxs("button",{onClick:S,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx($,{})," Cetak Metode Penyusutan"]})})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Metode Penyusutan"})]})}),e.jsx("tbody",{children:s==null?void 0:s.map((n,t)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[t+1,"."]}),e.jsx("td",{children:n.name})]},t)}))})]})}),e.jsx(U,{paginateUpdatePage:k,paginate:h,setSize:C})]})]})})};export{Y as default};
