import{r as s,O as oe,j as e,b as Q,h as ue,a0 as ie,s as c,a2 as ce,ag as re,A as he,ah as pe,ai as me,k as ge,aj as $,n as z,R as xe,u as be,o as je,e as ke,p as ye,i as De,c as ve,a as Se,F as _e,q as Pe}from"./index-CBiC-3z3.js";import{P as de}from"./PageTitle-B0c32fKm.js";import{e as j,W as Ne}from"./Wrap-BkENrgtl.js";import{P as Le}from"./Pagination-Bor55BAY.js";import{F as p}from"./FormInputWithLabel-CG72YFWb.js";import{i as C}from"./actionEvent.helper-CSfRBgS8.js";import{F as k}from"./FormSelectWithLabel-BwIvOt7G.js";import{p as m}from"./number.helper-_FlTjox4.js";import{P as Ke,l as we}from"./PDFHeader-LWmUPkCD.js";import"./FormInput-CmrfS47c.js";import"./index-BKNjMPK8.js";const Te=({setAddDaftarAsetEvent:u=()=>{},daftarAsetEdit:t,getData:o=()=>{}})=>{const[y,g]=s.useState([]),[_,D]=s.useState([]),[v,F]=s.useState([]),[P,B]=s.useState([]),[f,d]=s.useState([]),[N,L]=s.useState([]),[K,r]=s.useState(t!=null&&t.name?t.name:""),[x,i]=s.useState(t!=null&&t.tanggal_beli?t.tanggal_beli:oe()),[w,S]=s.useState(t!=null&&t.supplier?t.supplier:""),[T,R]=s.useState(t!=null&&t.nomor_invoice?t.nomor_invoice:""),[n,l]=s.useState(t!=null&&t.kuantitas?m(t.kuantitas):""),[h,b]=s.useState(t!=null&&t.satuan_barang?t.satuan_barang:""),[G,X]=s.useState(t!=null&&t.harga_satuan?m(t.harga_satuan):""),[M,Z]=s.useState(t!=null&&t.dpp?m(t.dpp):""),[H,A]=s.useState(t!=null&&t.ppn?m(t.ppn):""),[W,V]=s.useState(t!=null&&t.metode_penyusutan?t.metode_penyusutan:""),[q,O]=s.useState(t!=null&&t.kode_akun_perkiraan?t.kode_akun_perkiraan:""),[Y,I]=s.useState(t!=null&&t.kelompok_aset?t.kelompok_aset:""),[J,U]=s.useState(t!=null&&t.kategori_aset?t.kategori_aset:""),E=()=>{ie.custom("","GET").then(a=>{if(g(a.data.entry),a.data.entry.length>0){if(t){j({editObject:t.supplier,dataList:a.data.entry,setState:S,labelKey:"name",valueKey:"uuid"});return}S({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{c(a)})},ee=()=>{ce.custom("","GET").then(a=>{if(D(a.data.entry),a.data.entry.length>0){if(t){j({editObject:t.satuan_barang,dataList:a.data.entry,setState:b,labelKey:"name",valueKey:"uuid"});return}b({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{c(a)})},ae=()=>{re.custom("","GET").then(a=>{if(F(a.data.entry),a.data.entry.length>0){if(t){j({editObject:t.metode_penyusutan,dataList:a.data.entry,setState:V,labelKey:"name",valueKey:"uuid"});return}V({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{c(a)})},te=()=>{he.custom("/kas_bank","GET").then(a=>{if(B(a.data),a.data.length>0){if(t){j({editObject:t.kode_akun_perkiraan,dataList:a.data,setState:O,labelKey:"name",valueKey:"uuid"});return}O({label:a.data[0].name,value:a.data[0].uuid})}}).catch(a=>{c(a)})},ne=()=>{pe.custom("","GET").then(a=>{if(d(a.data.entry),a.data.entry.length>0){if(t){j({editObject:t.kelompok_aset,dataList:a.data.entry,setState:I,labelKey:"name",valueKey:"uuid"});return}I({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{c(a)})},se=()=>{me.custom("","GET").then(a=>{if(L(a.data.entry),a.data.entry.length>0){if(t){j({editObject:t.kategori_aset,dataList:a.data.entry,setState:U,labelKey:"name",valueKey:"uuid"});return}U({label:a.data.entry[0].name,value:a.data.entry[0].uuid})}}).catch(a=>{c(a)})},le=async()=>{await ge()&&$.custom(`${t!=null&&t.uuid?`/${t.uuid}`:""}`,t?"PUT":"POST",null,{data:{name:K,tanggal_beli:x,nomor_invoice:T,supplier:w.value,kuantitas:n,satuan_barang:h.value,harga_satuan:G,dpp:M,ppn:H,metode_penyusutan:W.value,kode_akun_perkiraan:q.value,kelompok_aset:Y.value,kategori_aset:J.value}}).then(()=>{t?z("Berhasil","Data berhasil diupdate"):z("Berhasil","Data berhasil disimpan"),u(),o()}).catch(a=>{c(a)})};return s.useEffect(()=>{E(),ee(),ae(),te(),ne(),se()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[t?"Edit":"Tambahkan"," Daftar Aset"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>u(),children:[e.jsx(Q,{})," Batalkan Daftar Aset"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(p,{label:"Nama Aset",type:"text",onchange:a=>{r(a.target.value)},others:{value:K,name:"namaDaftarAset"}}),e.jsx(p,{label:"Tanggal Beli",type:"datetime-local",onchange:a=>{i(a.target.value)},others:{value:x,name:"tanggalBeliDaftarAset"}}),e.jsx(p,{label:"Nomor Invoice",type:"text",onchange:a=>{R(a.target.value)},others:{value:T,name:"nomorInvoiceDaftarAset"}})]}),e.jsxs("div",{className:"mt-5 flex gap-x-2",children:[e.jsx(k,{label:"Supplier",optionsDataList:y,optionsLabel:"name",optionsValue:"uuid",selectValue:w,onchange:a=>{S(a)},selectName:"supplierDaftarAset"}),e.jsx(p,{label:"Kuantitas",type:"text",onchange:a=>{C(a),l(a.target.value)},others:{value:n,name:"kuantitasDaftarAset"}}),e.jsx(k,{label:"Satuan Barang",optionsDataList:_,optionsLabel:"name",optionsValue:"uuid",selectValue:h,onchange:a=>{b(a)},selectName:"satuanBarangDaftarAset"}),e.jsx(p,{label:"Harga Satuan",type:"text",onchange:a=>{C(a),X(a.target.value)},others:{value:G,name:"hargaSatuanDaftarAset"}})]}),e.jsxs("div",{className:"mt-5 flex gap-x-2",children:[e.jsx(p,{label:"DPP",type:"text",onchange:a=>{C(a),Z(a.target.value)},others:{value:M,name:"DPPDaftarAset"}}),e.jsx(p,{label:"PPN",type:"text",onchange:a=>{C(a),A(a.target.value)},others:{value:H,name:"PPNDaftarAset"}}),e.jsx(k,{label:"Kode Akun",optionsDataList:P,optionsLabel:["code","name"],optionsLabelIsArray:!0,optionsValue:"uuid",selectValue:q,onchange:a=>{O(a)},selectName:"kodeAkunPerkiraanDaftarAset"}),e.jsx(k,{label:"Metode Penyusutan",optionsDataList:v,optionsLabel:"name",optionsValue:"uuid",selectValue:W,onchange:a=>{V(a)},selectName:"metodePenyusutanDaftarAset"}),e.jsx(k,{label:"Kelompok Aset",optionsDataList:f,optionsLabel:"name",optionsValue:"uuid",selectValue:Y,onchange:a=>{I(a)},selectName:"kelompokAsetDaftarAset"}),e.jsx(k,{label:"Kategori Aset",optionsDataList:N,optionsLabel:"name",optionsValue:"uuid",selectValue:J,onchange:a=>{U(a)},selectName:"kategoriAsetDaftarAset"})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{le()},children:[e.jsx(ue,{})," Simpan"]})]})})},Ce=xe.forwardRef((u,t)=>{var o;return e.jsxs("div",{ref:t,children:[e.jsx(Ke,{bulan:u.bulan,tahun:u.tahun,title:"Daftar Aset"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Daftar Aset"})]})}),e.jsx("tbody",{children:(o=u==null?void 0:u.data)==null?void 0:o.map((y,g)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:g+1}),e.jsx("td",{children:y.name})]},g)}))})]})]})}),Me=()=>{const u=be(),{data:t}=u,[o,y]=s.useState([]),[g,_]=s.useState(!1),[D,v]=s.useState(!1),[F,P]=s.useState({name:""}),[B,f]=s.useState(!1),[d,N]=s.useState(""),L=s.useRef(),K=we.useReactToPrint({content:()=>L.current}),[r,x]=s.useState({page:1,size:10,count:118,lastPage:12}),i=(n="")=>{n==""&&N(n),_(!0),$.custom(`?search=${n}&page=${r.page}&size=${r.size}`,"GET").then(l=>{var h,b;f(n.length<1),y((h=l==null?void 0:l.data)==null?void 0:h.entry),x((b=l==null?void 0:l.data)==null?void 0:b.pagination),_(!1)}).catch(l=>{c(l)})},w=n=>{let l=o[n];P(l),v(!D)},S=async n=>{if(await Pe("Hapus","Yakin ingin hapus data ini ?")){let l=o[n];$.custom(`/${l.uuid}`,"DELETE").then(()=>{z("Berhasil","Data berhasil dihapus"),i()}).catch(h=>{c(h)})}},T=({selected:n})=>{let l=r;l.page=n+1,x(l),i()},R=n=>{let l=r;l.size=n,l.page=1,x(l),i()};return s.useEffect(()=>{i()},[]),e.jsx(Ne,{isLoading:g,children:e.jsxs("div",{children:[e.jsx(de,{title:"Daftar Aset"}),D?e.jsx(Te,{setAddDaftarAsetEvent:()=>v(!1),getData:i,daftarAsetEdit:F}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:d,onChange:n=>N(n.target.value)}),B?e.jsx(je,{onClick:()=>{i(d)},className:"cursor-pointer"}):e.jsx(Q,{onClick:()=>i(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{P(null),v(!D)},children:[e.jsx(ke,{})," Tambah Daftar Aset"]}),e.jsx("div",{className:"hidden",children:e.jsx(Ce,{data:o,ref:L,bulan:ye(new Date().getMonth()),tahun:t.tahun})}),e.jsxs("button",{onClick:K,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(De,{})," Cetak Daftar Aset"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Daftar Aset"}),e.jsx("th",{children:"Nomor Invoice"}),e.jsx("th",{children:"Tanggal Beli"}),e.jsx("th",{children:"Metode Penyusutan"}),e.jsx("th",{children:"Kelompok Aset"}),e.jsx("th",{children:"Kategori Aset"}),e.jsx("th",{children:"Total Beli"}),e.jsx("th",{children:"DPP"}),e.jsx("th",{children:"PPN"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:o==null?void 0:o.map((n,l)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[l+1,"."]}),e.jsx("td",{children:n.name}),e.jsx("td",{children:n.nomor_invoice}),e.jsx("td",{children:`${n.tanggal_beli.split("T")[0]} ${ve(n.tanggal_beli.split("T")[1])}`}),e.jsx("td",{children:n.metode_penyusutan_name}),e.jsx("td",{children:n.kelompok_aset_name}),e.jsx("td",{children:n.kategori_aset_name}),e.jsx("td",{children:m(n.harga_satuan*n.kuantitas)}),e.jsx("td",{children:m(n.dpp)}),e.jsx("td",{children:m(n.ppn)}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(Se,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{w(l)}}),e.jsx(_e,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{S(l)}})]})]},l)}))})]})}),e.jsx(Le,{paginateUpdatePage:T,paginate:r,setSize:R})]})]})})};export{Me as default};
