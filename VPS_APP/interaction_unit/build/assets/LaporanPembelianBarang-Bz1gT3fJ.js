import{r as t,j as a,bu as w,b5 as S,f as H,c as R,aF as T,s as d,aD as m}from"./index-BHalgDnS.js";import{W as D}from"./Wrap-v0GlUqt9.js";import{P as y}from"./PageTitle-B404o4Ml.js";import{F as x}from"./FormSelectWithLabel-BeoqgiqW.js";import{p as i}from"./number.helper-efe0YCx6.js";import{g as F}from"./jurnalUmum.helper-CxKZ06YE.js";import"./FormInput-rJTe_TRK.js";const W=()=>{const[u,P]=t.useState(!1),[o,h]=t.useState(),[j,b]=t.useState([]),[p,f]=t.useState([]),[N,B]=t.useState([]),[l,v]=t.useState(),[g,c]=t.useState(),_=()=>{T.custom("/transaksi","GET").then(s=>{f(s.data)}).catch(s=>d(s))},L=()=>{c(s=>null),m.custom(`/gudang_barang/${l.value}`,"GET").then(s=>{B(s.data),s.data.length>0&&c(r=>({label:s.data[0].daftar_gudang_name,value:s.data[0].uuid}))}).catch(s=>d(s))},k=()=>{m.custom(`/riwayat_pembelian/${g.value}`,"GET").then(s=>{const r=F(s.data);b(n=>r)}).catch(s=>d(s))};return t.useEffect(()=>{if(l){L();const s=p.filter(r=>r.uuid==l.value)[0];h(r=>s)}},[l]),t.useEffect(()=>{_()},[]),a.jsx(D,{isLoading:u,children:a.jsxs("div",{children:[a.jsx(y,{title:"Laporan Pembelian Barang"}),a.jsxs("div",{className:"grid grid-cols-12",children:[a.jsx("div",{className:"col-span-3",children:a.jsxs("div",{className:"bg-white py-6 px-6 rounded-md",children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(x,{label:"Kode Barang",optionsDataList:p,optionsLabel:"kode_barang",optionsValue:"uuid",selectValue:l,onchange:s=>{v(s)},selectName:"kategoriHargaBarang"}),a.jsx(x,{label:"Gudang Asal",optionsDataList:N,optionsLabel:"daftar_gudang_name",optionsValue:"uuid",selectValue:g,onchange:s=>{c(s)},selectName:"gudangBarang"})]}),o?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"px-1 gap-x-2 rounded-md py-5",children:[a.jsx("p",{className:"text-xl font-extrabold",children:o.daftar_barang_name}),a.jsx("p",{className:"font-bold bg-blue-800 px-2 text-white rounded-md w-max mt-2",children:o.satuan_barang_name})]})}):a.jsx(a.Fragment,{}),a.jsxs("button",{className:"btn mt-3 btn-sm bg-blue-800 text-white",onClick:()=>k(),children:[a.jsx(w,{})," Lihat Laporan Pembelian Barang"]})]})}),a.jsx("div",{className:"col-span-9 px-2 h-[80vh] overflow-y-scroll no-scrollbar",children:a.jsxs("div",{className:"bg-white rounded-md p-3",children:[a.jsx("h1",{className:"font-bold text-2xl pb-6",children:"Laporan Riwayat Pembelian Barang"}),j.map((s,r)=>a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-bold sticky top-0 bg-gray-300 p-2 z-20",children:S("/",H(s.parent,!1))}),a.jsx("div",{className:"flex flex-col",children:s.data.map((n,E)=>{const e=JSON.parse(n.detail);return a.jsxs("div",{className:"my-6 pl-6",children:[a.jsxs("div",{className:"grid grid-cols-12 mb-3",children:[a.jsx("div",{className:"col-span-1",children:a.jsx("p",{className:"text-xs pr-2 font-medium",children:R(n.tanggal.split("T")[1])})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-xs pr-2 font-medium px-3",children:n.type.replaceAll("_"," ").toUpperCase()})})]}),a.jsxs("div",{className:"grid grid-cols-12",children:[a.jsx("div",{className:"col-span-1"}),a.jsxs("div",{className:"col-span-3",children:[a.jsx("p",{className:"text-xs pr-2 px-3 pb-2 font-bold",children:n.bukti_transaksi}),a.jsxs("p",{className:"text-xs pr-2 px-3 pb-2 font-bold",children:["Supplier ",n.supplier," ( ",n.supplier_code," )"]}),e!=null&&e.jumlah?a.jsxs("p",{className:"text-xs pr-2 font-normal px-3",children:[" Jumlah ",i(e.jumlah)," ",e.satuan_barang]}):"",e!=null&&e.diskon_persentase?a.jsxs("p",{className:"text-xs pr-2 font-normal px-3",children:[" Diskon ",e.diskon_persentase," % "]}):"",e!=null&&e.total?a.jsxs("p",{className:"text-xs pr-2 font-normal px-3",children:[" Total Rp.",i(e.total)]}):"",e!=null&&e.nilai_pelunasan?a.jsxs("p",{className:"text-xs pr-2 font-normal px-3",children:[" Nilai Pelunasan Rp.",i(e.nilai_pelunasan)]}):"",e!=null&&e.retur?a.jsxs("p",{className:"text-xs pr-2 font-normal px-3",children:[" Jumlah Retur ",i(e.retur)," Dengan Nilai Rp.",i(e.nilai_retur)]}):""]})]})]})})})]}))]})})]})]})})};export{W as default};
