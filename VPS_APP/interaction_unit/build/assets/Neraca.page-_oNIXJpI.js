import{j as a,p as m,a as h,M as P,d as E,R as C,w as S,r as c,W as F,x as L,z as B,n as A,N as j,t as v}from"./index-Cuu-NYin.js";import{B as M}from"./BulanSelectedListCard-BQVtbEq2.js";import{R as o}from"./RowCard-CFBiIS9y.js";import{P as V,l as $}from"./PDFHeader-BJyF31Wz.js";import"./index-BKNjMPK8.js";const g=({aktiva:t,pasiva:s,forPrint:i})=>a.jsx(a.Fragment,{children:a.jsxs("div",{children:[a.jsxs("div",{className:`stats py-4 rounded-md rounded-b-none ${i?"stats-horizontal":"shadow-2xl stats-vertical"} bg-white text-gray-900 w-full`,children:[a.jsxs("div",{className:"stat",children:[a.jsx("div",{className:"stat-title text-gray-900 font-bold",children:"Aktiva"}),a.jsxs("div",{className:"stat-value text-sm text-green-900",children:["Rp. ",m(t)]})]}),a.jsxs("div",{className:"stat",children:[a.jsx("div",{className:"stat-title text-gray-900 font-bold",children:"Pasiva"}),a.jsxs("div",{className:"stat-value text-sm text-red-900",children:["Rp. ",m(s)]})]}),a.jsxs("div",{className:"stat pb-0",children:[a.jsx("div",{className:"stat-title text-gray-900 font-bold",children:"Difference"}),a.jsxs("div",{className:"stat-value text-sm text-blue-900",children:["Rp. ",m(Math.abs(h(s)-h(t)))]})]})]}),!i&&a.jsx("div",{className:"mt-3",children:h(t)==h(s)?a.jsxs("div",{className:"text-sm text-white font-bold bg-green-900 py-2 -mt-3 flex items-center justify-center rounded-md rounded-t-none",children:[a.jsx(P,{className:"mr-2"})," Seimbang"]}):a.jsxs("div",{className:"text-sm text-white font-bold bg-red-900 py-2 -mt-3 flex items-center justify-center rounded-md rounded-t-none",children:[a.jsx(E,{className:"mr-2"})," Tidak Seimbang"]})})]})}),p=C.forwardRef((t,s)=>{var i,u,n,l;return a.jsxs("div",{ref:s,children:[a.jsx(V,{bulan:t.bulan,tahun:t.tahun,title:"Neraca"}),a.jsx(g,{aktiva:(u=(i=t==null?void 0:t.data)==null?void 0:i.neraca)==null?void 0:u.aktiva,pasiva:(l=(n=t==null?void 0:t.data)==null?void 0:n.neraca)==null?void 0:l.pasiva,forPrint:!0}),Object.keys(t.data).length>0?a.jsxs(a.Fragment,{children:[a.jsx(o,{dataList:t.data.harta,title:"Aset",totalTitle:"Total Asset",forPrint:!0}),a.jsx(o,{dataList:t.data.utang,title:"Kewajiban",totalTitle:"Total Kewajiban",forPrint:!0}),a.jsx(o,{dataList:t.data.modal,title:"Ekuitas",totalTitle:"Total Ekuitas",forPrint:!0})]}):a.jsx(a.Fragment,{})]})}),G=()=>{const t=S(),{data:s,setData:i}=t,[u,n]=c.useState(!1),[l,N]=c.useState(new Date().getMonth()),[r,T]=c.useState([]),[x,w]=c.useState(!1),b=c.useRef(),k=$.useReactToPrint({content:()=>b.current}),y=()=>{n(!0),j.custom(`/${l+1}/${s.tahun}`,"GET").then(e=>{let d=s;d.dashboard.overview[l].neraca=e==null?void 0:e.data,d.dashboard.overview[l].perubahanModal=null,i(d),T(e==null?void 0:e.data),n(!1)}).catch(e=>{v(e)})},f=()=>{n(!0),j.custom(`/validasi_status/${l+1}/${s.tahun}`,"GET").then(e=>{w(e),n(!1);let d=s;d.dashboard.overview[l].perubahanModal=null,i(d)}).catch(e=>{v(e)})},R=()=>{n(!0),j.custom("/validasi",x.validasi?"DELETE":"POST",null,{data:{bulan:l+1,tahun:s.tahun}}).then(e=>{let d=s;d.dashboard.overview[l].perubahanModal=null,i(d),f()}).catch(e=>{v(e),n(!1)})};return c.useEffect(()=>{y(),f()},[l]),a.jsx(F,{isLoading:u,children:a.jsxs("div",{children:[a.jsx(L,{title:"neraca"}),a.jsxs("div",{className:"grid grid-cols-6",children:[a.jsxs("div",{className:"col-span-1",children:[a.jsx(M,{bulan:l,setBulan:N}),Object.keys(r).length>0?a.jsx(g,{aktiva:r.neraca.aktiva,pasiva:r.neraca.pasiva}):a.jsx(a.Fragment,{}),a.jsxs("div",{className:`${x.validasi?"bg-blue-900":"bg-red-900"} text-white mt-4 rounded-md p-5 shadow-2xl`,children:[a.jsxs("h1",{className:"text-md font-bold",children:["Neraca ",x.validasi?"Telah Di Validasi":"Belum Di Validasi"]}),a.jsx("button",{onClick:R,className:"btn btn-sm mt-2",children:x.validasi?"Batalkan Validasi":"Validasi"})]}),a.jsx("div",{className:"hidden",children:a.jsx(p,{data:r,ref:b,bulan:B(l),tahun:s.tahun})}),a.jsxs("button",{onClick:k,className:"btn btn-sm bg-red-600 hover:bg-red-600 mt-2 text-white border-red-600",children:[a.jsx(A,{})," Cetak Neraca"]})]}),a.jsx("div",{className:"col-span-5",children:a.jsx("div",{className:"h-[65vh] pl-2",children:a.jsx("div",{className:"flex flex-col h-full overflow-y-scroll no-scrollbar w-full rounded-md",children:Object.keys(r).length>0?a.jsxs(a.Fragment,{children:[a.jsx(o,{dataList:r.harta,title:"Aset",totalTitle:"Total Asset"}),a.jsx(o,{dataList:r.utang,title:"Kewajiban",totalTitle:"Total Kewajiban"}),a.jsx(o,{dataList:r.modal,title:"Ekuitas",totalTitle:"Total Ekuitas"})]}):a.jsx(a.Fragment,{})})})})]})]})})};export{G as default};
