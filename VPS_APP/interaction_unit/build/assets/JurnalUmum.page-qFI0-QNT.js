import{j as e,c as ee,F as $,a as me,R as ae,f as ue,r as o,g as se,b as te,d as V,e as W,h as he,i as le,k as be,l as C,s as U,m as ge,n as I,u as je,o as pe,p as fe,q}from"./index-CH4D0Lt-.js";import{P as z,A as Y,i as G,F as Ne,W as ke}from"./Wrap-5ys34sV1.js";import{p,a as B}from"./number.helper-efe0YCx6.js";import{B as we}from"./BankRowData-D9KXykqI.js";import{K as ve}from"./KasRowData-D9micsd1.js";import{P as De}from"./PendapatanRowData-BOS0pRcv.js";import{P as ye}from"./PotonganRowData-DRh5aWQl.js";import{J as Te}from"./JurnalStokOpnameRowData-DXMUqCC2.js";import{J as Fe}from"./JurnalPenyusutanRowData-UHQg33me.js";import{n as Se,a as Q,b as Ae,c as Ce}from"./jurnalUmum.helper-CKyNgyJU.js";import{F as X}from"./FormInputWithLabel-DSO_Zp9u.js";import{i as Z}from"./actionEvent.helper-BujKUZ7B.js";import{F as T}from"./FormInput-S8fN4g0j.js";import{P as ne,l as re}from"./PDFHeader-nmfnFTDc.js";import{D as ie}from"./DebetKreditStatusCard-CTq-ZdiN.js";import{B as Ue}from"./BulanSelectedListCard-CoGWaJe2.js";import{P as Le}from"./PageTitle-DbvUOkqr.js";import"./PendapatanRowUraian-DIlGZDOD.js";import"./JurnalStokOpnameUraian-CIDQ-PGm.js";import"./JurnalPenyusutanRowUraian-BFG-K29z.js";import"./index-BKNjMPK8.js";const de=({item:r,deleteItem:b=()=>{},editItem:g=()=>{},deleteByBuktiTransaksi:x=()=>{},balanceStatus:m=!0,forPrint:u=!1})=>e.jsxs("div",{className:`flex flex-col w-full bg-white text-[13px] ${u?"":"px-3 shadow-md"}`,children:[e.jsx("div",{className:"grid grid-cols-12 sticky top-0 bg-white py-2 border-b-2",children:e.jsxs("div",{className:"p-2 col-span-9 text-black flex items-end",children:[e.jsx("div",{className:"text-[28px] font-bold",children:m?e.jsx("p",{className:`text-[45px] -ml-1 text-white px-2 rounded-md ${r.total.debet==r.total.kredit?"bg-green-900":"bg-red-900"}`,children:r.tanggal}):e.jsx("p",{className:"text-[45px] -ml-1 text-white px-2 rounded-md bg-green-900",children:r.tanggal})}),e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-end",children:[e.jsxs("div",{className:"text-gray-900 flex flex-col justify-end px-2",children:[e.jsxs("h1",{children:[r.bulan,".",r.tahun]}),e.jsx("h2",{className:"text-[13px] font-bold",children:r.hari})]}),e.jsxs("div",{className:"flex flex-col px-2 border-l-2 border-gray-600",children:[e.jsx("h1",{className:"font-bold",children:"Total"}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsx("div",{className:"text-right text-gray-900",children:e.jsx("h1",{className:" text-green-900 font-bold flex flex-row",children:p(r.total.debet.toFixed(2))})}),e.jsx("div",{className:"text-right text-gray-900",children:e.jsx("h1",{className:" text-red-900 font-bold",children:p(r.total.kredit.toFixed(2))})})]})]})]})})]})}),r.buktiTransaksi.map(l=>e.jsx(e.Fragment,{children:l.sumber=="JURNAL UMUM"||l.sumber=="NERACA BULAN SEBELUMNYA"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-12 items-center bg-gray-3",children:e.jsx("div",{className:" col-span-12 border-x-4 border-transparent text-gray-900 flex flex-row items-center",children:m?e.jsx("div",{className:`${l.debet==l.kredit?"bg-green-900":"bg-red-900"} w-full py-1 text-white text-[12.3px] rounded-sm text-center font-bold px-4`,children:l.bukti_transaksi}):e.jsx("div",{className:"bg-green-900 w-full py-1 text-white text-[12.3px] rounded-sm text-center font-bold px-4",children:l.bukti_transaksi})})}),l.data.map((i,f)=>i.map((c,w)=>e.jsxs(e.Fragment,{children:[e.jsx("hr",{}),w<=i.length?e.jsxs("div",{className:"grid grid-cols-12 items-start py-1",children:[e.jsx("div",{className:"col-span-1 px-2 text-black",children:c.uuid!="NERACA"?ee(c.waktu):" - - "}),e.jsx("div",{className:`col-span-2 text-gray-900 flex flex-col px-2 ${B(c.kredit)>0&&c.uuid!="NERACA"?"text-right":""}`,children:e.jsxs("p",{children:[c.kode_akun," - ",c.nama_akun]})}),e.jsx("div",{className:`${u?"col-span-5":"col-span-4"} text-gray-900 flex flex-col px-2`,children:e.jsx("p",{children:c.uraian})}),e.jsx("div",{className:"text-right px-2 col-span-2 text-gray-900",children:parseFloat(c.debet).toFixed(2)!="0.00"?e.jsx("h1",{className:" text-green-900 font-bold",children:p(c.debet)}):e.jsx(e.Fragment,{})}),e.jsx("div",{className:"text-right px-2 col-span-2 text-gray-900",children:parseFloat(c.kredit).toFixed(2)!="0.00"?e.jsx("h1",{className:" text-red-900 font-bold",children:p(c.kredit)}):e.jsx(e.Fragment,{})}),u?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-black text-center col-span-1 flex justify-center gap-x-3",children:c.sumber=="JURNAL UMUM"&&m?e.jsx($,{size:9,onClick:()=>b(c.uuid),className:"w-max mt-1 text-red-500 cursor-pointer"}):e.jsx(e.Fragment,{})})})]}):e.jsx(e.Fragment,{}),w==i.length-1&&f==l.data.length-1?e.jsxs(e.Fragment,{children:[e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-12 items-start py-3",children:[e.jsx("div",{className:"col-span-1 px-2 text-black text-center font-bold flex justify-center items-center gap-x-5",children:l.sumber=="JURNAL UMUM"&&m?e.jsx(e.Fragment,{children:u?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-center gap-x-2 pl-3 cursor-pointer",onClick:()=>g(l),children:[e.jsx(me,{size:9,className:"w-max h-full text-yellow-500"}),e.jsx("h1",{className:"font-bold text-yellow-500",children:"Edit"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-x-2 cursor-pointer",onClick:()=>x(l.bukti_transaksi),children:[e.jsx($,{size:9,className:"w-max h-full text-red-500"}),e.jsx("h1",{className:"font-bold text-red-500",children:"Hapus"})]})]})}):e.jsx(e.Fragment,{})}),e.jsx("div",{className:`${u?"col-span-7":"col-span-6"}`}),e.jsx("div",{className:"text-right px-2 col-span-2 text-gray-900",children:e.jsx("h1",{className:" text-green-900 font-bold",children:p(l.debet)})}),e.jsx("div",{className:"text-right px-2 col-span-2 text-gray-900",children:e.jsx("h1",{className:" text-red-900 font-bold",children:p(l.kredit)})})]})]}):e.jsx(e.Fragment,{})]})))]}):e.jsxs(e.Fragment,{children:[l.sumber=="TRANSAKSI BANK"?e.jsx(e.Fragment,{children:e.jsx(we,{item1:l,balanceStatus:!1,forPrint:u})}):e.jsx(e.Fragment,{}),l.sumber=="TRANSAKSI KAS"?e.jsx(e.Fragment,{children:e.jsx(ve,{item1:l,balanceStatus:!1,forPrint:u})}):e.jsx(e.Fragment,{}),l.sumber=="GAJI PEGAWAI"||l.sumber=="TUNJANGAN UANG PEGAWAI"||l.sumber=="LEMBUR PEGAWAI"||l.sumber=="HADIAH PEGAWAI"?e.jsx(e.Fragment,{children:e.jsx(De,{item1:l,balanceStatus:!1,forPrint:u})}):e.jsx(e.Fragment,{}),l.sumber=="PPH 21/26"||l.sumber=="LAIN - LAIN"||l.sumber=="KERUGIAN"||l.sumber=="PIUTANG KARYAWAN"?e.jsx(e.Fragment,{children:e.jsx(ye,{item1:l,balanceStatus:!1,forPrint:u})}):e.jsx(e.Fragment,{}),z.indexOf(l.sumber)>-1?e.jsx(Te,{forPrint:u,item1:l,balanceStatus:!1}):e.jsx(e.Fragment,{}),Y.indexOf(l.sumber)>-1?e.jsx(Fe,{forPrint:u,item1:l,balanceStatus:!1}):e.jsx(e.Fragment,{})]})}))]}),Ke=ae.forwardRef((r,b)=>e.jsx("div",{ref:b,children:e.jsxs("div",{className:"px-3",children:[e.jsx(ne,{bulan:r.bulan,tahun:r.tahun,title:"Form Jurnal Umum"}),e.jsx("div",{className:"flex justify-between",children:e.jsxs("h1",{className:"text-2xl font-bold",children:["Tanggal : ",ue(r.tanggal,!1)]})}),e.jsx("h1",{className:"text-2xl font-bold mb-20",children:r.buktiTransaksi}),r.data.map((g,x)=>e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-2xl font-bold",children:["Transaksi ",x+1]}),e.jsxs("div",{className:"grid w-full grid-cols-12 gap-x-2 border-b-2",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Waktu"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Kode Akun"})})})}),e.jsx("div",{className:"col-span-5",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Uraian"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Debet"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Kredit"})})})})]}),g.map(m=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid w-full grid-cols-12 gap-x-2 border-b-2",children:[e.jsx("div",{className:"mt-5 col-span-1",children:e.jsx("p",{children:ee(m.waktu)})}),e.jsx("div",{className:"mt-5 col-span-2",children:e.jsx("p",{children:m.kodeAkun.label})}),e.jsx("div",{className:"mt-5 col-span-5",children:e.jsx("p",{children:m.uraian})}),e.jsx("div",{className:"mt-5 col-span-2",children:e.jsx("p",{children:p(m.debet)})}),e.jsx("div",{className:"mt-5 col-span-2",children:e.jsx("p",{children:p(m.kredit)})})]})})),e.jsxs("div",{className:"grid w-full grid-cols-12 gap-x-2 items-end",children:[e.jsx("div",{className:"mt-5 col-span-8",children:e.jsx("h1",{className:`text-md ${r.totalDebetKredit.totalDebet[x]==r.totalDebetKredit.totalKredit[x]?"text-green-600":"text-red-600"} font-bold mt-1`,children:r.totalDebetKredit.totalDebet[x]==r.totalDebetKredit.totalKredit[x]?"Seimbang":"Tidak Seimbang"})}),e.jsx("div",{className:"mt-5 col-span-2 font-bold",children:e.jsx("p",{children:p(r.totalDebetKredit.totalDebet[x])})}),e.jsx("div",{className:"mt-5 col-span-2 font-bold",children:e.jsx("p",{children:p(r.totalDebetKredit.totalKredit[x])})})]})]}))]})})),Re=({setAddJurnalEvent:r,kodeAkun:b,buktiTransaksiEdit:g,setIsLoadingEvent:x=()=>{},getData:m=()=>{}})=>{const[u,l]=o.useState([]),[i,f]=o.useState([[{waktu:`${new Date().getHours()<10?"0"+new Date().getHours():new Date().getHours()}:${new Date().getMinutes()<10?"0"+new Date().getMinutes():new Date().getMinutes()}:${new Date().getSeconds()<10?"0"+new Date().getSeconds():new Date().getSeconds()}`,kodeAkun:G(),uraian:"",debet:0,kredit:0}]]),[c,w]=o.useState({totalDebet:[0],totalKredit:[0]}),[v,L]=o.useState(se()),[D,K]=o.useState(""),[F,M]=o.useState(b),_=()=>{let n=[...i];n.push([{waktu:`${new Date().getHours()<10?"0"+new Date().getHours():new Date().getHours()}:${new Date().getMinutes()<10?"0"+new Date().getMinutes():new Date().getMinutes()}:${new Date().getSeconds()<10?"0"+new Date().getSeconds():new Date().getSeconds()}`,kodeAkun:G(),uraian:"",debet:0,kredit:0}]),f(n)},R=n=>{let a=[...i],s=[...u];a.at(n).map(t=>{t.uuid&&s.push(t)}),l(s),a.splice(n,1),f(a)},E=n=>{let a=[...i];f([]),a[n].push({waktu:`${new Date().getHours()<10?"0"+new Date().getHours():new Date().getHours()}:${new Date().getMinutes()<10?"0"+new Date().getMinutes():new Date().getMinutes()}:${new Date().getSeconds()<10?"0"+new Date().getSeconds():new Date().getSeconds()}`,kodeAkun:G(),uraian:"",debet:0,kredit:0}),f(a)},S=(n,a)=>{let s=[...i],t=[...u];s[n].at(a).uuid&&t.push(s[n].at(a)),l(t),f([]),s[n].splice(a,1),f(s)},J=async n=>{if(await be()){let a=await Se(n,g,u),s=a.filter(t=>t.status!="POST");s.map(t=>{let{status:d,...k}=t,N=s.filter(y=>y.uuid!=null).map(y=>`'${y.uuid}'`);k.uuidList=N.length>0?N.join(","):"EMPTY",C.custom(`/${k.uuid}`,d,null,d=="PUT"?{data:k}:null).then(()=>{m()}).catch(y=>{U(y)})}),A(0,a)}},A=async(n,a,s=[])=>{if(a[n]){let{status:t,...d}=a[n];if(t=="POST"){let k=a.concat([...s]).filter(N=>N.uuid!=null).map(N=>`'${N.uuid}'`);d.uuidList=k.length>0?k.join(","):"EMPTY";try{let N=await ge.post(C.getUrlCRUD(),d);s.push({...N.data.data}),n+1<a.length?A(n+1,a,s):(m(),r(),I("Berhasil","Transaksi Berhasil Disimpan"))}catch(N){U(N)}}else n+1<a.length?A(n+1,a,s):(m(),r(),I("Berhasil","Transaksi Berhasil Disimpan"))}},j=(n,a,s,t)=>{let d=[...i];f([]),d[a][s][t]=n,f(d)},P=o.useRef(),H=re.useReactToPrint({content:()=>P.current});return o.useEffect(()=>{x(!0),M(b),g!=null&&(K(g.buktiTransaksi),L(g.hariTanggal),f(g.transaksiList)),x(!1)},[]),o.useEffect(()=>{let n=[0],a=[0];i.map((s,t)=>{n[t]=0,a[t]=0,s.map(d=>{n[t]+=B(d.debet),a[t]+=B(d.kredit)})}),w({totalDebet:n.map(s=>s=s.toFixed(2)),totalKredit:a.map(s=>s=s.toFixed(2))})},[i]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white rounded-md shadow-2xl h-[70vh] overflow-scroll no-scrollbar relative",children:[e.jsxs("div",{className:"sticky top-0 pt-3 px-6 h-max bg-white w-full z-10",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[g!=null?"Edit ":"Tambah "," Transaksi"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>r(),children:[e.jsx(te,{})," Batalkan Transaksi"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(X,{label:"Hari/Tanggal",type:"date",onchange:n=>{L(n.target.value)},others:{value:v,name:"hariTanggal"}}),e.jsx(X,{label:"Bukti Transaksi",type:"text",onchange:n=>{K(n.target.value)},others:{value:D,name:"buktiTransaksi"}})]})]}),e.jsxs("div",{className:"flex flex-col px-6 mt-6 w-full",children:[i.map((n,a)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsxs("span",{className:"flex items-center gap-x-2 label-text text-gray-800 font-bold mt-4",children:[e.jsxs("p",{children:["Transaksi ",a+1]}),e.jsx("div",{className:"px-2 py-2 rounded-full bg-red-900 cursor-pointer",onClick:()=>R(a),children:e.jsx($,{className:"text-white"})})]})})}),e.jsxs("div",{className:"grid w-full grid-cols-12 gap-x-2 border-b-2",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Waktu"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Kode Akun"})})})}),e.jsx("div",{className:"col-span-5",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Uraian"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Debet"})})})}),e.jsx("div",{className:"col-span-2",children:e.jsx("label",{className:"form-control w-full max-w-xs bg-white",children:e.jsx("div",{className:"label",children:e.jsx("span",{className:"label-text text-gray-600",children:"Kredit"})})})})]}),e.jsxs("div",{className:"grid w-full items-end grid-cols-12 gap-x-2",children:[n.map((s,t)=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-5 col-span-1",children:e.jsx(T,{name:`waktu_${t}`,type:"time",value:s.waktu,onchange:d=>j(d.target.value,a,t,"waktu"),other:{autoComplete:!1,step:1}})}),e.jsx("div",{className:"mt-5 col-span-3",children:e.jsx(Ne,{optionsDataList:F,optionsLabel:["code","name"],optionsValue:"uuid",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:s.kodeAkun,onchange:d=>{j(d,a,t,"kodeAkun")},addClass:B(s.kredit)>0?"text-right":"",selectName:`kodeAkun_${t}`})}),e.jsx("div",{className:"mt-5 col-span-4",children:e.jsx(T,{name:`uraian_${t}`,type:"text",value:s.uraian,onchange:d=>j(d.target.value,a,t,"uraian"),other:{autoComplete:!1}})}),e.jsx("div",{className:"mt-5 col-span-2",children:e.jsx(T,{name:`debet_${t}`,type:"text",value:p(s.debet),onchange:d=>{Z(d),j(0,a,t,"kredit"),j(d.target.value,a,t,"debet")},other:{autoComplete:!1}})}),e.jsx("div",{className:"mt-5 col-span-2",children:e.jsxs("div",{className:"w-full indicator",children:[e.jsx("span",{className:"indicator-item indicator-bottom badge bg-red-800 text-white px-2 py-4 cursor-pointer",onClick:()=>S(a,t),children:e.jsx($,{})}),e.jsx(T,{name:`kredit_${t}`,type:"text",value:p(s.kredit),onchange:d=>{Z(d),j(0,a,t,"debet"),j(d.target.value,a,t,"kredit")},other:{autoComplete:!1}})]})})]})),e.jsx("div",{className:"mt-5 col-span-4",children:V("demo_permission")&&n.length<2?e.jsx(e.Fragment,{children:e.jsxs("button",{className:"btn btn-sm bg-blue-800 mt-4 text-white",onClick:()=>E(a),children:[e.jsx(W,{})," Tambah"]})}):e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-red-500 font-bold text-xs",children:"* Hanya Mengijinkan 2 Inputan Dalam Mode Demo"})})}),e.jsx("div",{className:"mt-5 col-span-4 text-right",children:e.jsxs("h1",{className:`text-md ${c.totalDebet[a]==c.totalKredit[a]?"text-green-600":"text-red-600"} font-bold mt-1`,children:["Total ( ",c.totalDebet[a]==c.totalKredit[a]?"Seimbang":"Tidak Seimbang"," )"]})}),e.jsx("div",{className:"mt-5 col-span-2 font-bold",children:e.jsx(T,{border:!1,name:"totalDebet",type:"text",value:p(c.totalDebet[a]),other:{autoComplete:!1,disabled:!0}})}),e.jsx("div",{className:"mt-5 col-span-2 font-bold",children:e.jsx(T,{border:!1,name:"totalKredit",type:"text",value:p(c.totalKredit[a]),other:{autoComplete:!1,disabled:!0}})})]})]})})),e.jsxs("div",{className:"flex sticky bottom-0 bg-white py-3 w-full items-end gap-x-2",children:[V("demo_permission")&&i.length==1?e.jsx(e.Fragment,{children:e.jsxs("button",{className:"btn btn-sm bg-blue-800 mt-4 text-white",onClick:()=>_(),children:[e.jsx(W,{})," Tambah Transaksi"]})}):e.jsx(e.Fragment,{}),i.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{J({transaksiList:i,hariTanggal:v,buktiTransaksi:D})},children:[e.jsx(he,{})," Simpan"]}),e.jsx("div",{className:"hidden",children:e.jsx(Ke,{data:i,buktiTransaksi:D,totalDebetKredit:c,tanggal:v,ref:P})}),e.jsxs("button",{onClick:H,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white mt-2 border-red-600",children:[e.jsx(le,{})," Cetak Form"]})]}):e.jsx(e.Fragment,{})]})]})]})})},Ee=ae.forwardRef((r,b)=>e.jsxs("div",{ref:b,children:[e.jsx(ne,{bulan:r.bulan,tahun:r.tahun,title:"Jurnal Umum"}),e.jsx(ie,{debet:r.debet,kredit:r.kredit,forPrint:!0}),r.data.map((g,x)=>e.jsx(de,{deleteByBuktiTransaksi:()=>{},deleteItem:()=>{},editItem:()=>{},item:g,balanceStatus:()=>{},forPrint:!0},x))]})),ta=()=>{const r=je(),{data:b,setData:g}=r,[x,m]=o.useState(""),[u,l]=o.useState(!1),[i,f]=o.useState(new Date().getMonth()),[c,w]=o.useState(0),[v,L]=o.useState(0),[D,K]=o.useState([]),[F,M]=o.useState(!0),[_,R]=o.useState({initialHariTanggal:se(),initialBuktiTransaksi:"",initialTransaksiList:[]}),[E,S]=o.useState(!1),J=o.useRef(),A=re.useReactToPrint({content:()=>J.current}),j=(a="")=>{l(!0),a==""&&m(a),C.custom(`/bulan/${i+1}/${b.tahun}/bukti_transaksi?search=${a}`,"GET").then(async s=>{let t=b;t.dashboard.overview[i].jurnal=null,t.dashboard.overview[i].neracaSaldo=null,t.dashboard.overview[i].labaRugi=null,t.dashboard.overview[i].neraca=null,t.dashboard.overview[i].perubahanModal=null,t.dashboard.penjualan[i]=null,t.dashboard.pembelian[i]=null,t.dashboard.biaya[i]=null,g(t);const d=s.data.filter(h=>z.concat(...Y).indexOf(h.sumber)==-1),N=s.data.filter(h=>z.indexOf(h.sumber)>-1).map(h=>(h.detail_json=JSON.parse(h.uraian).json,h.detail_data=JSON.parse(h.uraian).detail,h)),ce=s.data.filter(h=>Y.indexOf(h.sumber)>-1).map(h=>(h.detail_data=JSON.stringify(JSON.parse(h.uraian).detail),h)),oe=Q(N),xe=Q(ce);let O=await Ae(d.concat(...oe).concat(...xe));M(a.length<1),K(O.returnData),w(O.totalDebet),L(O.totalKredit),l(!1)}).catch(s=>{U(s)})},P=async a=>{await q("Hapus","Yakin ingin hapus data ini ?")&&C.custom(`/${a}`,"DELETE").then(s=>{I("Berhasil","Transaksi berhasil dihapus"),j()}).catch(s=>{U(s)})},H=async a=>{await q("Hapus","Yakin ingin hapus data di bukti transaksi ini ?")&&(l(!0),C.custom("/by_bukti_transaksi","DELETE",null,{data:{bukti_transaksi:a}}).then(()=>{I("Berhasil","Transaksi berhasil dihapus"),j()}).catch(s=>{U(s)}))},n=async a=>{l(!0),R({buktiTransaksi:a.bukti_transaksi,hariTanggal:`${a.tahun}-${a.bulan}-${a.tanggal}`,transaksiList:await Ce(a.data,b.kodeAkun)}),S(!0),l(!1)};return o.useEffect(()=>{j()},[i]),e.jsx(ke,{isLoading:u,children:e.jsxs("div",{children:[e.jsx(Le,{title:"Jurnal Umum"}),E?e.jsx(Re,{setAddJurnalEvent:()=>S(!E),kodeAkun:b.kodeAkun,buktiTransaksiEdit:_,getData:j,setIsLoadingEvent:l}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:x,onChange:a=>m(a.target.value)}),F?e.jsx(pe,{className:"cursor-pointer",onClick:()=>j(x)}):e.jsx(te,{className:"cursor-pointer",onClick:()=>{j("")}})]}),e.jsx("div",{children:e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{R(null),S(!0)},children:[e.jsx(W,{})," Tambah Transaksi"]})})]}),e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx(Ue,{bulan:i,setBulan:f}),F?e.jsx(ie,{debet:c,kredit:v}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"hidden",children:e.jsx(Ee,{data:D,debet:c,kredit:v,tahun:b.tahun,bulan:fe(i),ref:J})}),e.jsxs("button",{onClick:A,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white mt-2 border-red-600",children:[e.jsx(le,{})," Cetak Jurnal Umum"]})]}),e.jsx("div",{className:"col-span-5",children:e.jsx("div",{className:"h-[65vh] pl-2",children:e.jsx("div",{className:"flex flex-col h-full overflow-y-scroll no-scrollbar w-full rounded-md",children:D.map((a,s)=>e.jsx(de,{deleteByBuktiTransaksi:H,deleteItem:P,editItem:n,item:a,balanceStatus:F},s))})})})]})]})]})})};export{ta as default};
