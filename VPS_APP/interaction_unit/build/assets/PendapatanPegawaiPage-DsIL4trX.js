import{w as X,r as t,a7 as F,j as a,Q as Y,p as m,m as ua,F as ca,o as xa,b2 as na,b3 as ha,b4 as _a,b5 as Ta,b6 as ya,b7 as Sa,b8 as Pa,b9 as Na,ba as $a,v as J,t as K,a as C,bb as la,d as oa,c as ia,b as Ba,bc as ra,bd as da,be as Fa,M as Ca,a3 as Ea,U as La,W as Ha,x as Ja,l as Ua,C as Ia}from"./index-Bi9xDvxa.js";import{F as c}from"./FormInputWithLabel-Czc2Xck8.js";import{i as G}from"./actionEvent.helper-CtadSy2d.js";import{T as Ka}from"./ToggleBox-IXlun44T.js";import{B as Ma}from"./BulanSelectedListCard-CjBOf7mf.js";import{P as Ga}from"./PendapatanRowData-D1-OVI13.js";import{D as Ra}from"./DebetKreditStatusCard-CJ3zk7oo.js";import"./PendapatanRowUraian-Ta8897_1.js";const za=({idPegawai:d,gaji:o,gajiUpdated:x,setGajiDeleted:_=()=>{},periode:i,kodeAkunList:r=[]})=>{const{data:y}=X(),[g,j]=t.useState("0"),[p,w]=t.useState("0"),[k,b]=t.useState("0"),[u,S]=t.useState(r.length>0?{label:`${r[0].code} - ${r[0].name}`,value:r[0].uuid}:null),[T,v]=t.useState(F()),[P,f]=t.useState(),[N,$]=t.useState("0"),[l,s]=t.useState("0"),[h,B]=t.useState("0"),[Z,R]=t.useState("0"),[A,D]=t.useState("0"),[aa,z]=t.useState("0"),[U,V]=t.useState("0"),[W,O]=t.useState("0"),[n,E]=t.useState(),I=async(e,H=!0)=>{let q=!1;H&&e.preventDefault(),q=H?await xa(e.target):!0,q&&na.custom(n?`/${n.uuid}`:"",n?"PUT":"POST",null,{data:{pegawai:d,periode:i,gaji:o.uuid,kode_akun_perkiraan:u==null?void 0:u.value,tanggal:T,bukti_transaksi:P,bonus:`${g}`,insentif:`${p}`,thr:`${k}`,bpjs_kesehatan:N,bpjs_kesehatan_persentase:ha,jkk:l,jkk_persentase:_a,jkm:h,jkm_persentase:Ta,jht:Z,jht_persentase:ya,jp:A,jp_persentase:Sa,bpjs_karyawan:aa,bpjs_karyawan_persentase:Pa,jp_karyawan:U,jp_karyawan_persentase:Na,jht_karyawan:W,jht_karyawan_persentase:$a}}).then(M=>{_(sa=>!1),n||E(sa=>M.data),H&&J("Berhasil","Data Tunjangan Uang Berhasil Disimpan")}).catch(M=>K(M))},Q=()=>{na.custom(`/${n.uuid}`,"DELETE").then(()=>{v(F()),f(e=>""),j(e=>0),w(e=>0),b(e=>0),S(r.length>0?{label:`${r[0].code} - ${r[0].name}`,value:r[0].uuid}:null),E(null),z(0),V(0),O(0),J("Berhasil","Data Tunjangan Uang Berhasil DiHapus"),_(e=>!0)}).catch(e=>K(e))},ea=()=>{na.custom(`/${d}/${i}/${y.tahun}`,"GET").then(e=>{var q,M,sa,ma,ga,ba,pa,ja,ka,fa,wa;j(L=>0),(q=e==null?void 0:e.data)!=null&&q.bonus&&j(m((M=e==null?void 0:e.data)==null?void 0:M.bonus)),w(L=>0),(sa=e==null?void 0:e.data)!=null&&sa.insentif&&w(m((ma=e==null?void 0:e.data)==null?void 0:ma.insentif)),b(L=>0),(ga=e==null?void 0:e.data)!=null&&ga.thr&&b(m((ba=e==null?void 0:e.data)==null?void 0:ba.thr)),f(L=>""),(pa=e==null?void 0:e.data)!=null&&pa.bukti_transaksi&&f((ja=e==null?void 0:e.data)==null?void 0:ja.bukti_transaksi),v(L=>F()),(ka=e==null?void 0:e.data)!=null&&ka.tanggal&&v((fa=e==null?void 0:e.data)==null?void 0:fa.tanggal),E(L=>e==null?void 0:e.data);const H=r.filter(L=>{var va;return L.uuid==((va=e==null?void 0:e.data)==null?void 0:va.kode_akun_perkiraan)});H.length>0&&S(L=>({label:`${H[0].code} - ${H[0].name}`,value:H[0].uuid})),e!=null&&e.data&&(console.log(e.data),_(L=>!1)),((wa=e==null?void 0:e.data)==null?void 0:wa.bpjs_karyawan)!=(C(o==null?void 0:o.nilai)*ha).toFixed(0)&&I(null,!1)})},ta=()=>{$(e=>0),s(e=>0),B(e=>0),R(e=>0),D(e=>0),z(e=>0),V(e=>0),O(e=>0),o&&($(e=>(C(o.nilai)*ha).toFixed(0)),s(e=>(C(o.nilai)*_a).toFixed(0)),B(e=>(C(o.nilai)*Ta).toFixed(0)),R(e=>(C(o.nilai)*ya).toFixed(0)),D(e=>(C(o.nilai)*Sa).toFixed(0)),z(e=>(C(o.nilai)*Pa).toFixed(0)),V(e=>(C(o.nilai)*Na).toFixed(0)),O(e=>(C(o.nilai)*$a).toFixed(0)),ea())};return t.useEffect(()=>{o&&ta()},[x,o]),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"my-5 bg-white py-5 px-6 rounded-md",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Tunjangan Uang Pegawai"}),a.jsxs("form",{onSubmit:e=>I(e),children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(Y,{label:"Sumber Dana",optionsDataList:r,optionsLabel:["code","name"],optionsValue:"uuid",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:u,onchange:e=>{S(e)},selectName:"periode"}),a.jsx(c,{label:"Tanggal",type:"datetime-local",onchange:e=>{v(e.target.value)},others:{value:T,name:"tanggal"}}),a.jsx(c,{label:"Bukti Transaksi",type:"text",onchange:e=>{f(e.target.value)},others:{value:P,name:"buktiTransaksi"}})]}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(c,{label:"Bonus",type:"text",onchange:e=>{G(e),j(e.target.value)},others:{value:g,name:"bonus"}}),a.jsx(c,{label:"Insentif",type:"text",onchange:e=>{G(e),w(e.target.value)},others:{value:p,name:"insentif"}}),a.jsx(c,{label:"THR",type:"text",onchange:e=>{G(e),b(e.target.value)},others:{value:k,name:"thr"}})]}),a.jsxs("div",{className:"mt-5 grid grid-cols-10 gap-x-2",children:[a.jsx(c,{label:"BPJS Kesehatan",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(N),name:"bpjsKesehatan"}}),a.jsx(c,{label:"JKK",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(l),name:"jkk"}}),a.jsx(c,{label:"JKM",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(h),name:"jkm"}}),a.jsx(c,{label:"JHT",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(Z),name:"jht"}}),a.jsx(c,{label:"JP",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(A),name:"jp"}})]}),a.jsxs("div",{className:"mt-5 grid grid-cols-10 gap-x-2",children:[a.jsx(c,{label:"BPJS Karyawan",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(aa),name:"bpjsKaryawan"}}),a.jsx(c,{label:"JP Karyawan",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(U),name:"jpKaryawan"}}),a.jsx(c,{label:"JHT Karyawan",type:"text",disabled:!0,addClassParent:"col-span-2",addClassInput:"border-none",others:{value:m(W),name:"jhtKaryawan"}})]}),a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(ua,{})," Simpan"]}),n?a.jsx(a.Fragment,{children:a.jsxs("button",{type:"button",onClick:()=>Q(),className:"btn btn-sm bg-red-800 mt-4 text-white",children:[a.jsx(ca,{})," Hapus Data"]})}):a.jsx(a.Fragment,{})]})]})})},Va=({idPegawai:d,periode:o,kodeAkunList:x=[]})=>{const{data:_}=X(),[i,r]=t.useState(!1),[y,g]=t.useState(!1),[j,p]=t.useState("0"),[w,k]=t.useState(x.length>0?{label:`${x[0].code} - ${x[0].name}`,value:x[0].uuid}:null),[b,u]=t.useState(null),[S,T]=t.useState(F()),[v,P]=t.useState(),f=async l=>{l.preventDefault(),g(s=>!1),await xa(l.target)&&la.custom(b?`/${b.uuid}`:"",b?"PUT":"POST",null,{data:{pegawai:d,periode:o,kode_akun_perkiraan:w.value,tanggal:S,bukti_transaksi:v,nilai:j}}).then(s=>{if(!b)u(h=>s.data);else{const h=b;h.nilai=j,u(B=>h)}J("Berhasil","Data Gaji Berhasil Disimpan"),r(h=>!0),g(h=>!0)}).catch(s=>K(s))},N=()=>{la.custom(`/${b.uuid}`,"DELETE").then(()=>{u(l=>null),r(l=>!1),P(l=>""),p(l=>0),J("Berhasil","Data Gaji Berhasil DiHapus")}).catch(l=>{K(l)})},$=()=>{la.custom(`/${d}/${o}/${_.tahun}`,"GET").then(l=>{var s;if((s=l.data)!=null&&s.nilai){p(m(l.data.nilai)),P(l.data.bukti_transaksi),T(l.data.tanggal),u(l.data);const h=x.filter(B=>B.uuid==l.data.kode_akun_perkiraan);h&&k(B=>({label:`${h[0].code} - ${h[0].name}`,value:h[0].uuid})),r(B=>!0)}})};return t.useEffect(()=>{$()},[d]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"my-5 bg-white py-5 px-6 rounded-md",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Gaji Pegawai"}),a.jsxs("form",{onSubmit:l=>f(l),children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(Y,{label:"Sumber Dana",optionsDataList:x,optionsLabel:["code","name"],optionsValue:"uuid",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:w,onchange:l=>{k(l)},selectName:"periode"}),a.jsx(c,{label:"Tanggal",type:"datetime-local",onchange:l=>{T(l.target.value)},others:{value:S,name:"tanggal"}}),a.jsx(c,{label:"Bukti Transaksi",type:"text",onchange:l=>{P(l.target.value)},others:{value:v,name:"buktiTransaksi"}}),a.jsx(c,{label:"Nilai",type:"text",onchange:l=>{G(l),p(l.target.value)},others:{value:j,name:"nilai"}})]}),i?a.jsx(a.Fragment,{}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(ua,{})," Simpan"]}),a.jsx("p",{className:"text-red-500 font-bold mt-2 text-sm",children:"* Gaji tidak dapat dihapus jika tunjangan uang tidak dihapus."})]}),i?a.jsx(a.Fragment,{children:a.jsxs("button",{type:"button",onClick:()=>N(),className:"btn btn-sm bg-red-800 mt-4 text-white",children:[a.jsx(ca,{})," Hapus Data"]})}):a.jsx(a.Fragment,{})]})]}),a.jsx(za,{idPegawai:d,kodeAkunList:x,periode:o,gaji:b,gajiUpdated:y,setGajiDeleted:r})]})},Wa=({idPegawai:d,periode:o,kodeAkunList:x=[]})=>{const{data:_}=X(),[i,r]=t.useState(null),[y,g]=t.useState(),[j,p]=t.useState(F()),[w,k]=t.useState(),[b,u]=t.useState(),[S,T]=t.useState(),[v,P]=t.useState("0"),[f,N]=t.useState(F()),[$,l]=t.useState(F()),[s,h]=t.useState("0"),[B,Z]=t.useState("0"),[R,A]=t.useState("0"),[D,aa]=t.useState([]),z=async n=>{n.preventDefault(),await xa(n.target)&&ra.custom(i?`/${i.uuid}`:"",i?"PUT":"POST","",{data:{pegawai:d,periode:o,kode_akun_perkiraan:y.value,tanggal:j,bukti_transaksi:w,deskripsi_kerja:b,keterangan_kerja:S,nilai_lembur_per_menit:v,waktu_mulai:f,waktu_selesai:$,total_jam:`${s}`,total_menit:`${B}`,total_bayaran:`${R}`}}).then(E=>{J("Berhasil","Data Lembur Berhasil Disimpan"),r(I=>null),U()}).catch(E=>K(E))},U=()=>{ra.custom(`/${d}/${o}/${_.tahun}`,"GET").then(n=>{aa(n.data)})},V=n=>{ra.custom(`/${n}`,"DELETE").then(()=>{J("Berhasil","Data Lembur Berhasil Dihapus"),U()}).catch(E=>K(E))},W=()=>{const n=new Date(f),I=(new Date($)-n)/(1e3*60),Q=Math.floor(I/60),ea=Math.FORMAT((I/60-Q)*60);h(e=>m(Q)),Z(e=>m(ea));const ta=C(v);A(m(ta*ea+ta*(Q*60)))},O=n=>{r(n)};return t.useEffect(()=>{i?(g({label:`${i.kode_akun_perkiraan_code} - ${i.kode_akun_perkiraan_name}`,value:i.kode_akun_perkiraan}),p(i.tanggal),k(i.bukti_transaksi),u(i.deskripsi_kerja),T(i.keterangan_kerja),P(i.nilai_lembur_per_menit),N(i.waktu_mulai),l(i.waktu_selesai)):(g({label:`${x[0].code} - ${x[0].name}`,value:x[0].uuid}),p(F()),k(""),u(""),T(""),P(0),N(F()),l(F()))},[i]),t.useEffect(()=>{W()},[v,f]),t.useEffect(()=>{$<f&&l(n=>f),W()},[$]),t.useEffect(()=>{U()},[d]),a.jsxs("div",{className:"my-5 bg-white py-5 px-6 rounded-md",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Lembur Pegawai"}),a.jsxs("form",{onSubmit:n=>z(n),children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(Y,{label:"Sumber Dana",optionsDataList:x,optionsLabel:["code","name"],optionsValue:"uuid",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:y,onchange:n=>{g(n)},selectName:"periode"}),a.jsx(c,{label:"Tanggal",type:"datetime-local",onchange:n=>{p(n.target.value)},others:{value:j,name:"tanggal"}}),a.jsx(c,{label:"Bukti Transaksi",type:"text",onchange:n=>{k(n.target.value)},others:{value:w,name:"buktiTransaksi"}})]}),a.jsx("div",{className:"mt-5 flex gap-x-2",children:a.jsx(c,{label:"Deskripsi Kerja",type:"text",onchange:n=>{u(n.target.value)},others:{value:b,name:"deskripsiKerja"}})}),a.jsx("div",{className:"mt-5 flex gap-x-2",children:a.jsx(c,{label:"Keterangan",type:"text",onchange:n=>{T(n.target.value)},others:{value:S,name:"keteranganKerja"}})}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(c,{label:"Nilai Lembur Per Menit",type:"text",onchange:n=>{G(n),P(n.target.value)},others:{value:v,name:"nilaiLemburPerMenit"}}),a.jsx(c,{label:"Waktu Mulai",type:"datetime-local",onchange:n=>{N(n.target.value)},others:{value:f,name:"waktuMulai"}}),a.jsx(c,{label:"Waktu Selesai",type:"datetime-local",onchange:n=>{l(n.target.value)},others:{value:$,name:"waktuSelesai"}})]}),a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(c,{label:"Total Jam",type:"text",addClassInput:"border-none",others:{value:s,name:"totalJam"}}),a.jsx(c,{label:"Total Menit",type:"text",addClassInput:"border-none",others:{value:B,name:"totalMenit"}}),a.jsx(c,{label:"Total Bayaran",type:"text",addClassInput:"border-none",disabled:!0,others:{value:R,name:"totalBayaran"}})]}),a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(ua,{})," Simpan"]}),i?a.jsxs("button",{type:"button",onClick:()=>r(null),className:"btn btn-sm bg-red-800 mt-4 text-white",children:[a.jsx(oa,{})," Batal Edit"]}):a.jsx(a.Fragment,{})]}),a.jsx("table",{class:"table table-sm table-zebra my-6",children:a.jsx("tbody",{children:D.map(n=>a.jsxs(a.Fragment,{children:[a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("b",{children:n.deskripsi_kerja})}),a.jsx("td",{colSpan:10,children:a.jsx("p",{children:n.keterangan_kerja})})]}),a.jsxs("tr",{children:[a.jsxs("td",{children:[n.kode_akun_perkiraan_code," - ",n.kode_akun_perkiraan_name]}),a.jsx("td",{children:`${n.tanggal.split("T")[0]} ${ia(n.tanggal.split("T")[1])}`}),a.jsx("td",{children:n.bukti_transaksi}),a.jsx("td",{children:`${n.waktu_mulai.split("T")[0]} ${ia(n.waktu_mulai.split("T")[1])}`}),a.jsx("td",{children:`${n.waktu_selesai.split("T")[0]} ${ia(n.waktu_selesai.split("T")[1])}`}),a.jsx("td",{children:m(n.nilai_lembur_per_menit)}),a.jsx("td",{children:m(n.total_jam)}),a.jsx("td",{children:m(n.total_menit)}),a.jsx("td",{children:m(n.total_bayaran)}),a.jsx("td",{children:a.jsxs("div",{className:"flex gap-x-2",children:[a.jsx(Ba,{onClick:()=>O(n),className:"text-yellow-600 hover:cursor-pointer",size:12}),i?a.jsx(a.Fragment,{}):a.jsx(a.Fragment,{children:a.jsx(ca,{onClick:()=>V(n.uuid),className:"text-red-600 hover:cursor-pointer",size:12})})]})})]})]}))})})]})},Oa=({idPegawai:d,periode:o,kodeAkunList:x=[]})=>{const{data:_}=X(),[i,r]=t.useState(null),[y,g]=t.useState("0"),[j,p]=t.useState(),[w,k]=t.useState(F()),[b,u]=t.useState(),[S,T]=t.useState(),[v,P]=t.useState([]),f=async s=>{s.preventDefault(),await xa(s.target)&&da.custom(i?`/${i.uuid}`:"",i?"PUT":"POST","",{data:{pegawai:d,periode:o,kode_akun_perkiraan:j.value,tanggal:w,bukti_transaksi:b,hadiah:S,nilai:y}}).then(h=>{J("Berhasil","Data Hadiah Berhasil Disimpan"),N(),r(null)}).catch(h=>K(h))},N=()=>{da.custom(`/${d}/${o}/${_.tahun}`,"GET").then(s=>{P(s.data)})},$=s=>{da.custom(`/${s}`,"DELETE").then(()=>{J("Berhasil","Data Hadiah Berhasil Dihapus"),N()}).catch(h=>K(h))},l=s=>{r(s)};return t.useEffect(()=>{i?(T(i.hadiah),p({label:`${i.kode_akun_perkiraan_code} - ${i.kode_akun_perkiraan_name}`,value:i.kode_akun_perkiraan}),u(i.bukti_transaksi),g(m(i.nilai)),k(i.tanggal)):(T(""),p({label:`${x[0].code} - ${x[0].name}`,value:x[0].uuid}),u(""),g(0),k(F()))},[i]),t.useEffect(()=>{N()},[d]),a.jsxs("div",{className:"my-5 bg-white py-5 px-6 rounded-md",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Hadiah Pegawai"}),a.jsxs("form",{onSubmit:s=>f(s),children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(Y,{label:"Sumber Dana",optionsDataList:x,optionsLabel:["code","name"],optionsValue:"uuid",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:j,onchange:s=>{p(s)},selectName:"periode"}),a.jsx(c,{label:"Tanggal",type:"datetime-local",onchange:s=>{k(s.target.value)},others:{value:w,name:"tanggal"}}),a.jsx(c,{label:"Bukti Transaksi",type:"text",onchange:s=>{u(s.target.value)},others:{value:b,name:"buktiTransaksi"}}),a.jsx(c,{label:"Hadiah",type:"text",onchange:s=>{T(s.target.value)},others:{value:S,name:"hadiah"}}),a.jsx(c,{label:"Nilai",type:"text",onchange:s=>{G(s),g(s.target.value)},others:{value:y,name:"nilai"}})]}),a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(ua,{})," Simpan"]}),i?a.jsxs("button",{type:"button",onClick:()=>r(null),className:"btn btn-sm bg-red-800 mt-4 text-white",children:[a.jsx(oa,{})," Batal Edit"]}):a.jsx(a.Fragment,{})]}),a.jsxs("table",{class:"table table-sm table-zebra my-6",children:[a.jsxs("thead",{className:"font-bold text-md",children:[a.jsx("th",{children:"Sumber Dana"}),a.jsx("th",{children:"Tanggal"}),a.jsx("th",{children:"Bukti Transaksi"}),a.jsx("th",{children:"Hadiah"}),a.jsx("th",{children:"Nilai"}),a.jsx("th",{children:"Aksi"})]}),a.jsx("tbody",{children:v.map(s=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsxs("td",{children:[s.kode_akun_perkiraan_code," - ",s.kode_akun_perkiraan_name]}),a.jsx("td",{children:`${s.tanggal.split("T")[0]} ${ia(s.tanggal.split("T")[1])}`}),a.jsx("td",{children:s.bukti_transaksi}),a.jsx("td",{children:s.hadiah}),a.jsx("td",{children:m(s.nilai)}),a.jsx("td",{children:a.jsxs("div",{className:"flex gap-x-2",children:[a.jsx(Ba,{onClick:()=>l(s),className:"text-yellow-600 hover:cursor-pointer",size:12}),i?a.jsx(a.Fragment,{}):a.jsx(a.Fragment,{children:a.jsx(ca,{onClick:()=>$(s.uuid),className:"text-red-600 hover:cursor-pointer",size:12})})]})})]})}))})]})]})},Qa=({setPendapatanPegawaiForm:d=()=>{}})=>{const[o,x]=t.useState(),[_,i]=t.useState([]),[r,y]=t.useState(),[g,j]=t.useState(Fa()[new Date().getMonth()].value),[p,w]=t.useState([]),k=()=>{Ea.custom("","GET").then(u=>{i(u.data.entry),u.data.entry.length>0&&x({label:u.data.entry[0].name,value:u.data.entry[0].uuid})}).catch(u=>K(u))},b=()=>{La.custom("/payroll").then(u=>{w(u.data)}).catch(u=>{K(u)})};return t.useEffect(()=>{k(),b()},[]),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-md shadow-2xl h-max overflow-scroll no-scrollbar relative",children:a.jsxs("div",{className:"sticky top-0 py-5 px-6 h-max bg-white w-full z-10",children:[a.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[a.jsx("h1",{className:"uppercase text-gray-600 font-bold",children:"Pendapatan Pegawai"}),a.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>d(),children:[a.jsx(oa,{})," Batalkan Transaksi"]})]}),a.jsx("div",{className:"flex items-end gap-x-2",children:a.jsx(Y,{label:"Pilih Pegawai",optionsDataList:_,optionsLabel:"name",optionsValue:"uuid",disabled:r,selectValue:o,onchange:u=>{x(u)},selectName:"pegawai"})}),a.jsx("div",{className:"mt-5 flex gap-x-2",children:a.jsx(Ka,{disabled:r,label:"Periode",labelTextSize:"text-sm",toggleBox:g,textSize:"text-xs",setToggleBox:j,toggleBoxList:Fa()})}),r?a.jsxs("button",{className:"btn btn-sm bg-red-800 text-white",onClick:()=>y(null),children:[a.jsx(oa,{})," Reset Pegawai Dan Periode"]}):a.jsxs("button",{className:"btn btn-sm bg-green-800 text-white",onClick:()=>y(o.value),children:[a.jsx(Ca,{})," Pilih Pegawai Dan Periode"]})]})}),r?a.jsxs(a.Fragment,{children:[a.jsx(Va,{periode:g,idPegawai:r,kodeAkunList:p}),a.jsx(Wa,{idPegawai:r,kodeAkunList:p,periode:g}),a.jsx(Oa,{idPegawai:r,kodeAkunList:p,periode:g})]}):a.jsx(a.Fragment,{})]})},qa=({item:d,balanceStatus:o=!0,forPrint:x=!1})=>a.jsxs("div",{className:`flex flex-col w-full bg-white text-[13px] px-3 ${x?"":"shadow-md"}`,children:[a.jsx("div",{className:"grid grid-cols-12 sticky top-0 bg-white py-2 border-b-2",children:a.jsxs("div",{className:"p-2 col-span-9 text-black flex items-end",children:[a.jsx("div",{className:"text-[28px] font-bold",children:o?a.jsx("p",{className:`text-[45px] -ml-1 text-white px-2 rounded-md ${d.total.debet==d.total.kredit?"bg-green-900":"bg-red-900"}`,children:d.tanggal<10?`0${d.tanggal}`:d.tanggal}):a.jsx("p",{className:"text-[45px] -ml-1 text-white px-2 rounded-md bg-green-900",children:d.tanggal<10?`0${d.tanggal}`:d.tanggal})}),a.jsx("div",{className:"flex flex-col",children:a.jsxs("div",{className:"flex items-end",children:[a.jsxs("div",{className:"text-gray-900 flex flex-col justify-end px-2",children:[a.jsxs("h1",{children:[d.bulan,".",d.tahun]}),a.jsx("h2",{className:"text-[13px] font-bold",children:d.hari})]}),a.jsxs("div",{className:"flex flex-col px-2 border-l-2 border-gray-600",children:[a.jsx("h1",{className:"font-bold",children:"Total"}),a.jsxs("div",{className:"flex gap-x-4",children:[a.jsx("div",{className:"text-right",children:a.jsx("h1",{className:" text-green-900 font-bold flex flex-row",children:m(d.total.debet)})}),a.jsx("div",{className:"text-right",children:a.jsx("h1",{className:" text-red-900 font-bold",children:m(d.total.kredit)})})]})]})]})})]})}),d.buktiTransaksi.map(_=>a.jsx(a.Fragment,{children:a.jsx(Ga,{forPrint:x,item1:_,balanceStatus:!0})}))]}),se=()=>{const{data:d}=X(),[o,x]=t.useState(!1),[_,i]=t.useState(!1),[r,y]=t.useState(new Date().getMonth()),[g,j]=t.useState("Gaji"),[p,w]=t.useState(["Gaji","Tunjangan Uang","Lembur","Hadiah"]),[k,b]=t.useState([]),[u,S]=t.useState([]),[T,v]=t.useState("0"),[P,f]=t.useState("0"),N=()=>{const l=[{label:"Gaji",api:la},{label:"Tunjangan Uang",api:na},{label:"Lembur",api:ra},{label:"Hadiah",api:da}];i(!0),l.filter(h=>h.label==g)[0].api.custom(`?bulan=${r+1}&tahun=${d.tahun}`,"GET").then(async h=>{b(B=>h.data),i(!1)}).catch(h=>{K(h)})},$=async()=>{let l=await Ia(k.map(s=>(s.bulan=r+1,s.tahun=d.tahun,s.waktu=s.waktu?s.waktu:s.tanggal.split("T")[1].replace(".000",""),s.tanggal=s.tanggal.length>2?new Date(s.tanggal).getDate():s.tanggal,s)));S(l.returnData),v(l.totalDebet),f(l.totalKredit)};return t.useEffect(()=>{$()},[k]),t.useEffect(()=>{N()},[g,r]),a.jsx(Ha,{isLoading:_,children:a.jsx("div",{children:o?a.jsx(Qa,{setPendapatanPegawaiForm:()=>x(!o),setIsLoadingEvent:i}):a.jsxs(a.Fragment,{children:[a.jsx(Ja,{title:"Pendapatan Pegawai"}),a.jsxs("div",{className:"grid grid-cols-6 gap-x-2",children:[a.jsxs("div",{className:"col-span-1",children:[a.jsx(Ma,{bulan:r,setBulan:y}),a.jsx(Ra,{debet:T,kredit:P})]}),a.jsxs("div",{className:"col-span-5",children:[a.jsx("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-end shadow-2xl",children:a.jsx("div",{children:a.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{x(!0)},children:[a.jsx(Ua,{})," Tambah Transaksi"]})})}),a.jsx(Ka,{addClass:"px-4 py-3",label:"Tipe Pendapatan",setToggleBox:j,toggleBox:g,toggleBoxList:p.map(l=>({value:l,label:l}))}),a.jsx("div",{className:"flex flex-col h-full overflow-y-scroll no-scrollbar w-full rounded-md",children:u.map((l,s)=>a.jsx(qa,{item:l,forPrint:!0},s))})]})]})]})})})};export{se as default};
