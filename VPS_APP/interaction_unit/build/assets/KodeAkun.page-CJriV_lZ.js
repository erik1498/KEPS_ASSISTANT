import{r as n,j as e,b as C,h as W,k,A as v,n as w,s as S,R as I,u as V,o as O,e as q,p as G,i as M,a as Y,F as J,q as Q}from"./index-uJy3UgYS.js";import{P as X}from"./PageTitle-BH7LYrc2.js";import{K as Z,T as L,b as D,c as U,W as A}from"./Wrap-BJna6Lck.js";import{P as E}from"./Pagination-gIkiVvxn.js";import{F as B}from"./FormInputWithLabel-CaGWAovJ.js";import{a as ee}from"./actionEvent.helper-BujKUZ7B.js";import{F as ae}from"./FormSelectWithLabel-CcV5HKb0.js";import{T as P}from"./ToggleBox-DBnscKZ1.js";import{P as se,l as te}from"./PDFHeader-BwLr_SbW.js";import"./react-paginate-BxIB-5-4.js";import"./number.helper-efe0YCx6.js";import"./FormInput-CZf5rTrN.js";import"./index-BKNjMPK8.js";const ne=({setAddKodeAkunEvent:i=()=>{},kodeAkunEdit:a,getData:o=()=>{}})=>{const[l,x]=n.useState(a!=null&&a.name?a.name:""),[b,j]=n.useState(a!=null&&a.code?a.code:""),[m,d]=n.useState(Z()),[y,T]=n.useState(a!=null&&a.type_transaksi_kas_bank?a==null?void 0:a.type_transaksi_kas_bank:0),[_,K]=n.useState(a!=null&&a.type_transaksi_payroll?a==null?void 0:a.type_transaksi_payroll:0),[g,f]=n.useState(a!=null&&a.type_transaksi_pembelian_aset_dan_perlengkapan?a==null?void 0:a.type_transaksi_pembelian_aset_dan_perlengkapan:0),[u,N]=n.useState({label:a!=null&&a.type?a.type:"Harta",value:a!=null&&a.type?a.type:"Harta"}),p=async()=>{await k()&&v.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{type:u.value,name:l,code:b,type_transaksi_kas_bank:y,type_transaksi_payroll:_,type_transaksi_pembelian_aset_dan_perlengkapan:g}}).then(()=>{a?w("Berhasil","Data berhasil diupdate"):w("Berhasil","Data berhasil disimpan"),i(),o()}).catch(r=>{S(r)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Kode Akun"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>i(),children:[e.jsx(C,{})," Batalkan Kode Akun"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(B,{label:"Nama Akun",type:"text",onchange:r=>{x(r.target.value)},others:{value:l,name:"namaAkun"}}),e.jsx(B,{label:"Kode Akun",type:"text",onchange:r=>{ee(r),j(r.target.value)},others:{value:b,name:"kodeAkun"}}),e.jsx(ae,{label:"Tipe Akun",onchange:r=>{N(r)},optionsDataList:m,optionsLabel:"name",optionsValue:"name",selectName:"kodeAkunType",selectValue:u})]}),e.jsx("div",{className:"mt-5 flex gap-x-2",children:e.jsx(P,{label:"Tipe Untuk Transaksi Kas Dan Bank",setToggleBox:T,toggleBox:y,toggleBoxList:L})}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(P,{label:"Tipe Untuk Transaksi Payroll",setToggleBox:K,toggleBox:_,toggleBoxList:D})}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(P,{label:"Tipe Untuk Transaksi Pembelian Aset Dan Perlengkapan",setToggleBox:f,toggleBox:g,toggleBoxList:U})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{p()},children:[e.jsx(W,{})," Simpan"]})]})})},le=I.forwardRef((i,a)=>{var o;return e.jsxs("div",{ref:a,children:[e.jsx(se,{bulan:i.bulan,tahun:i.tahun,title:"Kode Akun"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Kode Akun"}),e.jsx("th",{children:"Tipe Akun"}),e.jsx("th",{children:"Nama Akun"})]})}),e.jsx("tbody",{children:(o=i==null?void 0:i.data)==null?void 0:o.map((l,x)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:x+1}),e.jsx("td",{children:l.code}),e.jsx("td",{children:l.type}),e.jsx("td",{children:l.name})]},x)}))})]})]})}),ye=()=>{const i=V(),{_getDataKodeAkun:a,data:o}=i,[l,x]=n.useState([]),[b,j]=n.useState(!1),[m,d]=n.useState(!1),[y,T]=n.useState({name:"",code:"",type:"",uuid:""}),[_,K]=n.useState(!1),[g,f]=n.useState(""),u=n.useRef(),N=te.useReactToPrint({content:()=>u.current}),[p,r]=n.useState({page:1,size:10,count:118,lastPage:12}),h=(t="")=>{t==""&&f(t),j(!0),v.custom(`?search=${t}&page=${p.page}&size=${p.size}`,"GET").then(s=>{var c,F;K(t.length<1),x((c=s==null?void 0:s.data)==null?void 0:c.entry),r((F=s==null?void 0:s.data)==null?void 0:F.pagination),j(!1),a()}).catch(s=>{S(s)})},R=t=>{let s=l[t];T(s),d(!m)},z=async t=>{if(await Q("Hapus","Yakin ingin hapus data ini ?")){let s=l[t];v.custom(`/${s.uuid}`,"DELETE").then(()=>{w("Berhasil","Data berhasil dihapus"),h()}).catch(c=>{S(c)})}},$=({selected:t})=>{let s=p;s.page=t+1,r(s),h()},H=t=>{let s=p;s.size=t,s.page=1,r(s),h()};return n.useEffect(()=>{h()},[]),e.jsx(A,{isLoading:b,children:e.jsxs("div",{children:[e.jsx(X,{title:"Kode Akun"}),m?e.jsx(ne,{setAddKodeAkunEvent:()=>d(!1),getData:h,kodeAkunEdit:y}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:g,onChange:t=>f(t.target.value)}),_?e.jsx(O,{onClick:()=>{h(g)},className:"cursor-pointer"}):e.jsx(C,{onClick:()=>h(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{T(null),d(!m)},children:[e.jsx(q,{})," Tambah Kode Akun"]}),e.jsx("div",{className:"hidden",children:e.jsx(le,{data:o==null?void 0:o.kodeAkun,ref:u,bulan:G(new Date().getMonth()),tahun:o.tahun})}),e.jsxs("button",{onClick:N,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(M,{})," Cetak Kode Akun"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Kode Akun"}),e.jsx("th",{children:"Tipe Akun"}),e.jsx("th",{children:"Nama Akun"}),e.jsx("th",{children:"Tipe Untuk Transaksi Kas Dan Bank"}),e.jsx("th",{children:"Tipe Untuk Transaksi Payroll"}),e.jsx("th",{children:"Tipe Untuk Transaksi Pembelian Aset Dan Perlengkapan"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((t,s)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[s+1,"."]}),e.jsx("td",{children:t.code}),e.jsx("td",{children:t.type}),e.jsx("td",{children:t.name}),e.jsx("td",{children:L.filter(c=>c.value==t.type_transaksi_kas_bank).at(0).label}),e.jsx("td",{children:D.filter(c=>c.value==t.type_transaksi_payroll).at(0).label}),e.jsx("td",{children:U.filter(c=>c.value==t.type_transaksi_pembelian_aset_dan_perlengkapan).at(0).label}),e.jsx("td",{className:"flex gap-x-2",children:t.update_permission?e.jsxs(e.Fragment,{children:[e.jsx(Y,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{R(s)}}),e.jsx(J,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{z(s)}})]}):e.jsx(e.Fragment,{})})]},s)}))})]})}),e.jsx(E,{paginateUpdatePage:$,paginate:p,setSize:H})]})]})})};export{ye as default};
