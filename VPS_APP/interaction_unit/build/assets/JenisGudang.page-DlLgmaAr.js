import{r as l,j as e,d as k,m as B,o as $,aG as p,v as j,t as f,R as K,w as L,W as _,x as A,y as D,l as I,z as U,n as W,b as H,F as M,D as O}from"./index-CfwrrJQa.js";import{P as V}from"./Pagination-CnRaeqpv.js";import{F as S}from"./FormInputWithLabel-DbUvyxQO.js";import{l as Y}from"./index-CJm1lXJA.js";import{P as q}from"./PDFHeader-BhpRjChz.js";import"./react-paginate-Dg6Wnb0G.js";import"./index-BKNjMPK8.js";const Q=({setAddJenisGudangEvent:i=()=>{},jenisGudangEdit:s,getData:n=()=>{}})=>{const[c,o]=l.useState(s!=null&&s.name?s.name:""),[h,x]=l.useState(s!=null&&s.code?s.code:""),u=async()=>{await $()&&p.custom(`${s!=null&&s.uuid?`/${s.uuid}`:""}`,s?"PUT":"POST",null,{data:{name:c,code:h}}).then(()=>{s?j("Berhasil","Data berhasil diupdate"):j("Berhasil","Data berhasil disimpan"),i(),n()}).catch(r=>{f(r)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[s?"Edit":"Tambahkan"," Jenis Gudang"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>i(),children:[e.jsx(k,{})," Batalkan Jenis Gudang"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(S,{label:"Nama Jenis Gudang",type:"text",onchange:r=>{o(r.target.value)},others:{value:c,name:"namaJenisGudang"}}),e.jsx(S,{label:"Kode Jenis Gudang",type:"text",onchange:r=>{x(r.target.value)},others:{value:h,name:"kodeJenisGudang"}})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{u()},children:[e.jsx(B,{})," Simpan"]})]})})},X=K.forwardRef((i,s)=>{var n;return e.jsxs("div",{ref:s,children:[e.jsx(q,{bulan:i.bulan,tahun:i.tahun,title:"Jenis Gudang"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Jenis Gudang"}),e.jsx("th",{children:"Kode Jenis Gudang"})]})}),e.jsx("tbody",{children:(n=i==null?void 0:i.data)==null?void 0:n.map((c,o)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:o+1}),e.jsx("td",{children:c.name}),e.jsx("td",{children:c.code})]},o)}))})]})]})}),le=()=>{const i=L(),{data:s}=i,[n,c]=l.useState([]),[o,h]=l.useState(!1),[x,u]=l.useState(!1),[r,J]=l.useState({name:""}),[C,F]=l.useState(!1),[N,w]=l.useState(""),y=l.useRef(),P=Y.useReactToPrint({content:()=>y.current}),[m,b]=l.useState({page:1,size:10,count:118,lastPage:12}),d=(t="")=>{t==""&&w(t),h(!0),p.custom(`?search=${t}&page=${m.page}&size=${m.size}`,"GET").then(a=>{var g,v;F(t.length<1),c((g=a==null?void 0:a.data)==null?void 0:g.entry),b((v=a==null?void 0:a.data)==null?void 0:v.pagination),h(!1)}).catch(a=>{f(a)})},G=t=>{let a=n[t];J(a),u(!x)},T=async t=>{if(await O("Hapus","Yakin ingin hapus data ini ?")){let a=n[t];p.custom(`/${a.uuid}`,"DELETE").then(()=>{j("Berhasil","Data berhasil dihapus"),d()}).catch(g=>{f(g)})}},z=({selected:t})=>{let a=m;a.page=t+1,b(a),d()},R=t=>{let a=m;a.size=t,a.page=1,b(a),d()};return l.useEffect(()=>{d()},[]),e.jsx(_,{isLoading:o,children:e.jsxs("div",{children:[e.jsx(A,{title:"Jenis Gudang"}),x?e.jsx(Q,{setAddJenisGudangEvent:()=>u(!1),getData:d,jenisGudangEdit:r}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:N,onChange:t=>w(t.target.value)}),C?e.jsx(D,{onClick:()=>{d(N)},className:"cursor-pointer"}):e.jsx(k,{onClick:()=>d(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{J(null),u(!x)},children:[e.jsx(I,{})," Tambah Jenis Gudang"]}),e.jsx("div",{className:"hidden",children:e.jsx(X,{data:n,ref:y,bulan:U(new Date().getMonth()),tahun:s.tahun})}),e.jsxs("button",{onClick:P,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(W,{})," Cetak Jenis Gudang"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Jenis Gudang"}),e.jsx("th",{children:"Kode Jenis Gudang"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:n==null?void 0:n.map((t,a)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[a+1,"."]}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.code}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(H,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{G(a)}}),e.jsx(M,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{T(a)}})]})]},a)}))})]})}),e.jsx(V,{paginateUpdatePage:z,paginate:m,setSize:R})]})]})})};export{le as default};
