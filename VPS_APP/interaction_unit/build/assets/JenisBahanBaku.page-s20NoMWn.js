import{r as i,j as e,b as v,h as $,k as L,aL as p,n as j,s as f,R as K,u as _,o as A,e as I,p as U,i as W,a as D,F as H,q}from"./index-DZCXWm7f.js";import{P as G}from"./PageTitle-CmhTXHkp.js";import{W as M}from"./Wrap-DcwCOsCB.js";import{P as O}from"./Pagination-CKy31gga.js";import{F as y}from"./FormInputWithLabel-CJ6pr1p6.js";import{P as V,l as Y}from"./PDFHeader-C5EAnyc_.js";import"./react-paginate-DQywGu_z.js";import"./index-BKNjMPK8.js";const Q=({setAddJenisBahanBakuEvent:l=()=>{},jenisBahanBakuEdit:s,getData:n=()=>{}})=>{const[r,h]=i.useState(s!=null&&s.name?s.name:""),[d,x]=i.useState(s!=null&&s.code?s.code:""),u=async()=>{await L()&&p.custom(`${s!=null&&s.uuid?`/${s.uuid}`:""}`,s?"PUT":"POST",null,{data:{name:r,code:d}}).then(()=>{s?j("Berhasil","Data berhasil diupdate"):j("Berhasil","Data berhasil disimpan"),l(),n()}).catch(c=>{f(c)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[s?"Edit":"Tambahkan"," Jenis Bahan Baku"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>l(),children:[e.jsx(v,{})," Batalkan Jenis Bahan Baku"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(y,{label:"Nama Jenis Bahan Baku",type:"text",onchange:c=>{h(c.target.value)},others:{value:r,name:"namaJenisBahanBaku"}}),e.jsx(y,{label:"Kode Jenis Bahan Baku",type:"text",onchange:c=>{x(c.target.value)},others:{value:d,name:"kodeJenisBahanBaku"}})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{u()},children:[e.jsx($,{})," Simpan"]})]})})},X=K.forwardRef((l,s)=>{var n;return e.jsxs("div",{ref:s,children:[e.jsx(V,{bulan:l.bulan,tahun:l.tahun,title:"Jenis Bahan Baku"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Jenis Bahan Baku"}),e.jsx("th",{children:"Kode Jenis Bahan Baku"})]})}),e.jsx("tbody",{children:(n=l==null?void 0:l.data)==null?void 0:n.map((r,h)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsx("td",{children:r.name}),e.jsx("td",{children:r.code})]},h)}))})]})]})}),le=()=>{const l=_(),{data:s}=l,[n,r]=i.useState([]),[h,d]=i.useState(!1),[x,u]=i.useState(!1),[c,k]=i.useState({name:""}),[S,C]=i.useState(!1),[B,J]=i.useState(""),N=i.useRef(),F=Y.useReactToPrint({content:()=>N.current}),[m,g]=i.useState({page:1,size:10,count:118,lastPage:12}),o=(t="")=>{t==""&&J(t),d(!0),p.custom(`?search=${t}&page=${m.page}&size=${m.size}`,"GET").then(a=>{var b,w;C(t.length<1),r((b=a==null?void 0:a.data)==null?void 0:b.entry),g((w=a==null?void 0:a.data)==null?void 0:w.pagination),d(!1)}).catch(a=>{f(a)})},P=t=>{let a=n[t];k(a),u(!x)},T=async t=>{if(await q("Hapus","Yakin ingin hapus data ini ?")){let a=n[t];p.custom(`/${a.uuid}`,"DELETE").then(()=>{j("Berhasil","Data berhasil dihapus"),o()}).catch(b=>{f(b)})}},R=({selected:t})=>{let a=m;a.page=t+1,g(a),o()},z=t=>{let a=m;a.size=t,a.page=1,g(a),o()};return i.useEffect(()=>{o()},[]),e.jsx(M,{isLoading:h,children:e.jsxs("div",{children:[e.jsx(G,{title:"Jenis Bahan Baku"}),x?e.jsx(Q,{setAddJenisBahanBakuEvent:()=>u(!1),getData:o,jenisBahanBakuEdit:c}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:B,onChange:t=>J(t.target.value)}),S?e.jsx(A,{onClick:()=>{o(B)},className:"cursor-pointer"}):e.jsx(v,{onClick:()=>o(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{k(null),u(!x)},children:[e.jsx(I,{})," Tambah Jenis Bahan Baku"]}),e.jsx("div",{className:"hidden",children:e.jsx(X,{data:n,ref:N,bulan:U(new Date().getMonth()),tahun:s.tahun})}),e.jsxs("button",{onClick:F,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(W,{})," Cetak Jenis Bahan Baku"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Jenis Bahan Baku"}),e.jsx("th",{children:"Kode Jenis Bahan Baku"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:n==null?void 0:n.map((t,a)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[a+1,"."]}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.code}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(D,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{P(a)}}),e.jsx(H,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{T(a)}})]})]},a)}))})]})}),e.jsx(O,{paginateUpdatePage:R,paginate:m,setSize:z})]})]})})};export{le as default};
