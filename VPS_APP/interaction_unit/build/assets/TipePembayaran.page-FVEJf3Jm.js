import{r,j as e,b as w,h as $,k as L,Y as p,n as j,s as g,R as _,u as A,o as I,e as U,p as W,i as D,a as H,F as Y,q}from"./index-CH4D0Lt-.js";import{P as G}from"./PageTitle-DbvUOkqr.js";import{W as M}from"./Wrap-5ys34sV1.js";import{P as O}from"./Pagination-BzIqssJ_.js";import{F as V}from"./FormInputWithLabel-DSO_Zp9u.js";import{P as J,l as K}from"./PDFHeader-nmfnFTDc.js";import"./react-paginate-CJd_j2MB.js";import"./index-BKNjMPK8.js";const Q=({setAddTipePembayaranEvent:i=()=>{},tipePembayaranEdit:t,getData:n=()=>{}})=>{const[o,d]=r.useState(t!=null&&t.name?t.name:""),m=async()=>{await L()&&p.custom(`${t!=null&&t.uuid?`/${t.uuid}`:""}`,t?"PUT":"POST",null,{data:{name:o}}).then(()=>{t?j("Berhasil","Data berhasil diupdate"):j("Berhasil","Data berhasil disimpan"),i(),n()}).catch(l=>{g(l)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[t?"Edit":"Tambahkan"," Tipe Pembayaran"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>i(),children:[e.jsx(w,{})," Batalkan Tipe Pembayaran"]})]}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(V,{label:"Nama Tipe Pembayaran",type:"text",onchange:l=>{d(l.target.value)},others:{value:o,name:"namaTipePembayaran"}})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{m()},children:[e.jsx($,{})," Simpan"]})]})})},X=_.forwardRef((i,t)=>{var n;return e.jsxs("div",{ref:t,children:[e.jsx(J,{bulan:i.bulan,tahun:i.tahun,title:"Tipe Pembayaran"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Tipe Pembayaran"})]})}),e.jsx("tbody",{children:(n=i==null?void 0:i.data)==null?void 0:n.map((o,d)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:d+1}),e.jsx("td",{children:o.name})]},d)}))})]})]})}),re=()=>{const i=A(),{data:t}=i,[n,o]=r.useState([]),[d,m]=r.useState(!1),[l,u]=r.useState(!1),[S,f]=r.useState({name:""}),[k,v]=r.useState(!1),[T,y]=r.useState(""),N=r.useRef(),C=K.useReactToPrint({content:()=>N.current}),[h,b]=r.useState({page:1,size:10,count:118,lastPage:12}),c=(s="")=>{s==""&&y(s),m(!0),p.custom(`?search=${s}&page=${h.page}&size=${h.size}`,"GET").then(a=>{var x,P;v(s.length<1),o((x=a==null?void 0:a.data)==null?void 0:x.entry),b((P=a==null?void 0:a.data)==null?void 0:P.pagination),m(!1)}).catch(a=>{g(a)})},F=s=>{let a=n[s];f(a),u(!l)},R=async s=>{if(await q("Hapus","Yakin ingin hapus data ini ?")){let a=n[s];p.custom(`/${a.uuid}`,"DELETE").then(()=>{j("Berhasil","Data berhasil dihapus"),c()}).catch(x=>{g(x)})}},z=({selected:s})=>{let a=h;a.page=s+1,b(a),c()},B=s=>{let a=h;a.size=s,a.page=1,b(a),c()};return r.useEffect(()=>{c()},[]),e.jsx(M,{isLoading:d,children:e.jsxs("div",{children:[e.jsx(G,{title:"Tipe Pembayaran"}),l?e.jsx(Q,{setAddTipePembayaranEvent:()=>u(!1),getData:c,tipePembayaranEdit:S}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:T,onChange:s=>y(s.target.value)}),k?e.jsx(I,{onClick:()=>{c(T)},className:"cursor-pointer"}):e.jsx(w,{onClick:()=>c(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{f(null),u(!l)},children:[e.jsx(U,{})," Tambah Tipe Pembayaran"]}),e.jsx("div",{className:"hidden",children:e.jsx(X,{data:n,ref:N,bulan:W(new Date().getMonth()),tahun:t.tahun})}),e.jsxs("button",{onClick:C,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(D,{})," Cetak Tipe Pembayaran"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Tipe Pembayaran"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:n==null?void 0:n.map((s,a)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[a+1,"."]}),e.jsx("td",{children:s.name}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(H,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{F(a)}}),e.jsx(Y,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{R(a)}})]})]},a)}))})]})}),e.jsx(O,{paginateUpdatePage:z,paginate:h,setSize:B})]})]})})};export{re as default};
