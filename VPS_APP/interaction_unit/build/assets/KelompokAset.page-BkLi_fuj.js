import{r as l,j as e,b as S,h as z,k as B,ah as b,n as g,s as f,R as $,u as L,o as M,e as D,p as I,i as U,a as W,F as H,q as O}from"./index-D4RqvJs4.js";import{P as q}from"./PageTitle-DUNNQqVc.js";import{W as G}from"./Wrap-DQ2PFJhN.js";import{P as V}from"./Pagination-Bq4QT9q6.js";import{F as v}from"./FormInputWithLabel-lIZpCkjM.js";import{a as Y}from"./actionEvent.helper-CSfRBgS8.js";import{l as J}from"./index-CG9KPJQi.js";import{P as Q}from"./PDFHeader-qSI1BbDw.js";import"./number.helper-_FlTjox4.js";import"./index-BKNjMPK8.js";const X=({setAddKelompokAsetEvent:r=()=>{},kelompokAsetEdit:s,getData:n=()=>{}})=>{const[c,h]=l.useState(s!=null&&s.name?s.name:""),[d,u]=l.useState(s!=null&&s.masa_penyusutan?s.masa_penyusutan:""),m=async()=>{await B()&&b.custom(`${s!=null&&s.uuid?`/${s.uuid}`:""}`,s?"PUT":"POST",null,{data:{name:c,masa_penyusutan:d}}).then(()=>{s?g("Berhasil","Data berhasil diupdate"):g("Berhasil","Data berhasil disimpan"),r(),n()}).catch(i=>{f(i)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[s?"Edit":"Tambahkan"," Kelompok Aset"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>r(),children:[e.jsx(S,{})," Batalkan Kelompok Aset"]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(v,{label:"Nama Kelompok Aset",type:"text",onchange:i=>{h(i.target.value)},others:{value:c,name:"namaKelompokAset"}}),e.jsx(v,{label:"Masa Penyusutan Aset ( Tahun )",type:"text",onchange:i=>{Y(i),u(i.target.value)},others:{value:d,name:"masaPenyusutanAset"}})]}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{m()},children:[e.jsx(z,{})," Simpan"]})]})})},Z=$.forwardRef((r,s)=>{var n;return e.jsxs("div",{ref:s,children:[e.jsx(Q,{bulan:r.bulan,tahun:r.tahun,title:"Daftar Kelompok Aset"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Kelompok Aset"}),e.jsx("th",{children:"Kode Kelompok Aset"})]})}),e.jsx("tbody",{children:(n=r==null?void 0:r.data)==null?void 0:n.map((c,h)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsx("td",{children:c.name}),e.jsx("td",{children:c.code})]},h)}))})]})]})}),oe=()=>{const r=L(),{data:s}=r,[n,c]=l.useState([]),[h,d]=l.useState(!1),[u,m]=l.useState(!1),[i,y]=l.useState({name:""}),[C,F]=l.useState(!1),[N,w]=l.useState(""),K=l.useRef(),A=J.useReactToPrint({content:()=>K.current}),[x,j]=l.useState({page:1,size:10,count:118,lastPage:12}),o=(t="")=>{t==""&&w(t),d(!0),b.custom(`?search=${t}&page=${x.page}&size=${x.size}`,"GET").then(a=>{var p,P;F(t.length<1),c((p=a==null?void 0:a.data)==null?void 0:p.entry),j((P=a==null?void 0:a.data)==null?void 0:P.pagination),d(!1)}).catch(a=>{f(a)})},T=t=>{let a=n[t];y(a),m(!u)},R=async t=>{if(await O("Hapus","Yakin ingin hapus data ini ?")){let a=n[t];b.custom(`/${a.uuid}`,"DELETE").then(()=>{g("Berhasil","Data berhasil dihapus"),o()}).catch(p=>{f(p)})}},_=({selected:t})=>{let a=x;a.page=t+1,j(a),o()},k=t=>{let a=x;a.size=t,a.page=1,j(a),o()};return l.useEffect(()=>{o()},[]),e.jsx(G,{isLoading:h,children:e.jsxs("div",{children:[e.jsx(q,{title:"Kelompok Aset"}),u?e.jsx(X,{setAddKelompokAsetEvent:()=>m(!1),getData:o,kelompokAsetEdit:i}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:N,onChange:t=>w(t.target.value)}),C?e.jsx(M,{onClick:()=>{o(N)},className:"cursor-pointer"}):e.jsx(S,{onClick:()=>o(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{y(null),m(!u)},children:[e.jsx(D,{})," Tambah Kelompok Aset"]}),e.jsx("div",{className:"hidden",children:e.jsx(Z,{data:n,ref:K,bulan:I(new Date().getMonth()),tahun:s.tahun})}),e.jsxs("button",{onClick:A,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(U,{})," Cetak Kelompok Aset"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Kelompok Aset"}),e.jsx("th",{children:"Masa Penyusutan Aset"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:n==null?void 0:n.map((t,a)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[a+1,"."]}),e.jsx("td",{children:t.name}),e.jsxs("td",{children:[t.masa_penyusutan," Tahun"]}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(W,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{T(a)}}),e.jsx(H,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{R(a)}})]})]},a)}))})]})}),e.jsx(V,{paginateUpdatePage:_,paginate:x,setSize:k})]})]})})};export{oe as default};
