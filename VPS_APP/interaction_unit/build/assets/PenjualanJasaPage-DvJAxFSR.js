import{r as n,j as a,h as la,aR as Ja,s as T,k as Q,b5 as da,R as Pa,f as xa,b as V,y as ea,i as Fa,F as sa,aT as Sa,b6 as ca,c as ha,b7 as ja,b8 as ua,b9 as aa,ba,n as Z,bb as pa,bc as Na,bd as oa,be as ka,bf as ma,O as W,bg as Ca,bh as ta,A as fa,Z as $a,Y as Aa,u as Ea,a as Da,o as va,$ as wa,bi as ra}from"./index-DZCXWm7f.js";import{P as La}from"./PageTitle-CmhTXHkp.js";import{v as ia,W as Oa}from"./Wrap-DcwCOsCB.js";import{F as G}from"./FormInputWithLabel-CJ6pr1p6.js";import{F as q}from"./FormSelectWithLabel-BRttMTTK.js";import{i as X}from"./actionEvent.helper-BujKUZ7B.js";import{p as u,a as M,k as Ta}from"./number.helper-efe0YCx6.js";import{T as Ba}from"./ToggleBox-B_8lFchv.js";import{P as ya,l as Ra}from"./PDFHeader-C5EAnyc_.js";import{P as Ha}from"./Pagination-CKy31gga.js";import{F as Y}from"./FormInput-BS-RLPlt.js";import{g as Ka}from"./jurnalUmum.helper-BqG1ckjr.js";import"./index-BKNjMPK8.js";import"./react-paginate-DQywGu_z.js";const Ua=({pesananPenjualanJasa:e,_getDataRincianDaftarPasananPenjualan:l,kategoriHargaJasaList:g,customer:_})=>{const[r,P]=n.useState(!1),[H,F]=n.useState([]),[b,y]=n.useState(),[C,N]=n.useState(),[A,h]=n.useState(),[$,p]=n.useState(0),[E,k]=n.useState(0),[D,S]=n.useState(0),[w,c]=n.useState(0),[i,o]=n.useState(0),[t,O]=n.useState(0),U=()=>{h(m=>null),Ja.custom(`/cabang/${C.value}/${e.uuid}`,"GET").then(m=>{F(m.data),m.data.length>0&&h(R=>({label:m.data[0].cabang_name,value:m.data[0].uuid}))}).catch(m=>T(m))},d=async m=>{m.preventDefault(),await Q(m.target)&&da.custom("","POST",null,{data:{pesanan_penjualan_jasa:e.uuid,kategori_harga_jasa:C.value,stok_awal_jasa:A.value,kode_harga_customer:_.kode_harga,jumlah:`${$}`,harga:`${b[`harga_${_.kode_harga}`]}`,harga_setelah_diskon:`${t}`,ppn:`${b.ppn==1?b[`harga_${_.kode_harga}`]*ia/100:0}`,ppn_setelah_diskon:`${i}`,diskon_angka:`${E}`,diskon_persentase:`${D}`,total_harga:`${w}`}}).then(R=>{l()}).catch(R=>T(R))},K=m=>{try{const R=M(m.target.value)*b[`harga_${_.kode_harga}`]/100;S(m.target.value),k(s=>s=u(R))}catch{k(s=>0)}},B=()=>{try{const m=M(E)*100/b[`harga_${_.kode_harga}`];S(R=>R=m),z()}catch{S(R=>0)}};n.useEffect(()=>{b&&B()},[E]);const z=()=>{const m=M($),R=b[`harga_${_.kode_harga}`]-M(E);O(J=>R);const s=b.ppn==1?R*ia/100:0;o(J=>s);const L=m*R+s*m;c(J=>L)};return n.useEffect(()=>{b&&z()},[$]),n.useEffect(()=>{if(C){U();const m=g.filter(R=>R.uuid==C.value);m.length>0&&(p(R=>0),P(R=>0),k(R=>0),S(R=>0),y(m[0]))}},[C]),n.useEffect(()=>{N({label:g[0].kode_jasa,value:g[0].uuid})},[]),a.jsx(a.Fragment,{children:a.jsxs("form",{className:"gap-x-2 py-3",onSubmit:m=>d(m),children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsx(q,{label:"Kode Jasa",optionsDataList:g,optionsLabel:"kode_jasa",optionsValue:"uuid",selectValue:C,onchange:m=>{N(m)},selectName:"kategoriHargaJasa"}),a.jsx(q,{label:"Cabang Asal",optionsDataList:H,optionsLabel:"cabang_name",optionsValue:"uuid",selectValue:A,onchange:m=>{h(m)},selectName:"CabangJasa"})]}),b?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"gap-x-2 bg-gray-300 my-4 rounded-md px-2 py-3",children:[a.jsx("p",{className:"text-xl font-extrabold",children:b.daftar_jasa_name}),a.jsx("p",{className:"text-sm mt-5",children:"Harga Jasa"}),a.jsxs("p",{className:"font-bold mt-1 text-xl",children:["Rp. ",u(b[`harga_${_.kode_harga}`])]}),b.ppn==1?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex gap-x-2 items-end mb-5",children:[a.jsx("p",{className:"text-sm",children:"PPN"}),a.jsxs("p",{className:"font-bold",children:["Rp. ",u(b[`harga_${_.kode_harga}`]*ia/100)]})]})}):a.jsx(a.Fragment,{}),a.jsx("p",{className:"font-bold bg-blue-800 px-2 text-white rounded-md w-max mt-2",children:b.satuan_jasa_name})]}),A?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex gap-x-2",children:a.jsx(G,{addClassInput:"w-max",label:"Jumlah",type:"text",onchange:m=>{X(m),p(m.target.value)},others:{value:$,name:"jumlah"}})}),a.jsx("div",{className:"mt-5",children:a.jsx(Ba,{label:"Gunakan Diskon ?",setToggleBox:P,toggleBox:r,toggleBoxList:[{label:"Tidak",value:0},{label:"Ya",value:1}]})}),r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mt-5 flex gap-x-2",children:[a.jsx(G,{label:"Diskon Angka",type:"text",onchange:m=>{X(m),k(m.target.value)},others:{value:E,name:"diskonAngka"}}),a.jsx(G,{label:"Diskon Persentase",type:"text",onchange:m=>{X(m),K(m)},others:{value:D,name:"diskonPersentase"}})]}),a.jsxs("div",{className:"mt-5 gap-x-2 px-1",children:[a.jsx("p",{className:"font-bold mt-2",children:"Harga Setelah Diskon"}),a.jsxs("p",{className:"font-bold mt-2 text-xl",children:["Rp. ",u(t)]}),b.ppn==1?a.jsx(a.Fragment,{children:a.jsxs("p",{className:"font-bold mb-5 mt-2",children:["PPN Rp. ",u(i)]})}):a.jsx(a.Fragment,{})]})]}):a.jsx(a.Fragment,{}),a.jsxs("div",{className:"mt-5 gap-x-2 px-1",children:[a.jsx("p",{className:"font-bold text-sm",children:"Total Harga"}),a.jsxs("p",{className:"font-bold text-4xl",children:["Rp. ",u(w)]})]})]}):a.jsx(a.Fragment,{})]}):a.jsx(a.Fragment,{}),A?a.jsx(a.Fragment,{children:a.jsxs("button",{className:"mt-3 btn w-full bg-green-800 text-white",children:[a.jsx(la,{})," Simpan Pesanan"]})}):a.jsx(a.Fragment,{})]})})},za=Pa.forwardRef((e,l)=>a.jsxs("div",{ref:l,children:[a.jsx(ya,{bulan:e.bulan,tahun:e.tahun,title:"PESANAN PENJUALAN JASA"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:"KEPADA :"}),a.jsx("p",{children:e.customer.name}),a.jsx("p",{children:e.customer.code}),a.jsxs("p",{children:["HP. ",e.customer.no_hp]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold",children:"TANGGAL :"}),a.jsx("p",{children:xa(e.tanggalPesananPenjualanJasa)})]})]}),a.jsx("div",{className:"flex justify-between",children:a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:"font-bold",children:"NO PESANAN PENJUALAN JASA :"}),a.jsx("p",{children:e.nomorPesananPenjualanJasa})]})}),a.jsxs("div",{className:"mt-4 grid grid-cols-12 text-sm gap-x-2 py-2 font-bold border-t-2",children:[a.jsx("div",{className:"col-span-1",children:a.jsx("p",{children:"No."})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{children:"Kode Jasa"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{children:"Nama Jasa"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{children:"Satuan Jasa"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{children:"Harga Jasa"})})]}),e.rincianPesananPenjualanJasa.map((g,_)=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"py-3  border-t-2",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 py-3 items-start font-bold",children:[a.jsx("div",{className:"col-span-1",children:a.jsxs("p",{className:"text-sm",children:[_+1,"."]})}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-sm",children:g.kategori_harga_Jasa_kode_Jasa}),a.jsx("p",{className:"text-sm my-1",children:g.daftar_gudang_name})]}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-sm",children:g.daftar_Jasa_name})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-sm",children:g.satuan_Jasa_name})}),a.jsxs("div",{className:"col-span-3",children:[a.jsxs("p",{className:"text-sm",children:["Rp. ",u(g.harga)]}),a.jsxs("p",{className:"text-sm",children:["PPN : Rp. ",u(g.ppn)]})]})]}),a.jsxs("div",{className:"grid grid-cols-12 text-sm gap-x-2 font-bold",children:[a.jsx("div",{className:"col-span-1"}),a.jsx("div",{className:"col-span-2",children:a.jsxs("p",{children:["Jumlah : ",u(g.jumlah)]})}),a.jsx("div",{className:"col-span-3",children:g.diskon_angka>0?a.jsxs(a.Fragment,{children:[a.jsx("p",{children:"Diskon"}),a.jsx("p",{children:"Harga Diskon"}),a.jsx("p",{children:"PPN Diskon"})]}):a.jsx(a.Fragment,{})}),a.jsx("div",{className:"col-span-3",children:g.diskon_angka>0?a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Rp. ",u(g.diskon_angka)," (",g.diskon_persentase," % )"]}),a.jsxs("p",{children:["Rp. ",u(g.harga_setelah_diskon)]}),a.jsxs("p",{children:["Rp. ",u(g.ppn_setelah_diskon)]})]}):a.jsx(a.Fragment,{})}),a.jsxs("div",{className:"col-span-3",children:["Total Harga ",a.jsxs("p",{children:["Rp. ",u(g.total_harga)]})]})]})]})})),a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 pt-5 items-start font-bold border-t-2",children:[a.jsx("div",{className:"col-span-9",children:a.jsx("p",{children:"PEMBAYARAN"})}),a.jsx("div",{className:"col-span-3",children:a.jsxs("p",{children:["TOTAL ",a.jsx("br",{})," Rp. ",u(e.total)]})})]}),a.jsxs("div",{className:"pb-5",children:[a.jsx("p",{className:"font-bold mt-5",children:"TERBILANG"}),a.jsxs("p",{className:"font-normal",children:[Ta(e.total).toString().toUpperCase()," RUPIAH"]})]})]})),Ga=({pesananPenjualanJasa:e,tanggalPesananPenjualanJasa:l,nomorPesananPenjualanJasa:g,customer:_,fakturStatus:r,setPPNStatus:P=()=>{},tanggalTransaksiAkhir:H,rincianPesananPenjualanJasa:F,setRincianPesananPenjualanJasa:b=()=>{}})=>{const[y,C]=n.useState([]),[N,A]=n.useState(!1),[h,$]=n.useState(0),p=n.useRef(),E=Ra.useReactToPrint({content:()=>p.current}),k=()=>{da.custom(`/${e.uuid}`,"GET").then(c=>{P(i=>!1),b(c.data),c.data.filter(i=>i.ppn>0).length>0&&P(i=>!0)}).catch(c=>T(c))},D=()=>{Sa.custom("/transaksi","GET").then(c=>{C(c.data)}).catch(c=>T(c))},S=c=>{da.custom(`/${c}`,"DELETE").then(i=>{k()}).catch(i=>T(i))},w=()=>{ca.custom("/pesanan_by_tanggal","POST",null,{data:{faktur_penjualan_jasa:r,tanggal:H}}).then(c=>{b(o=>c.data);const i=c.data.reduce((o,t)=>o+parseFloat(t.piutang),0);$(o=>i)})};return n.useEffect(()=>{D(),r?w():k()},[r,H,N]),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"grid grid-cols-12 gap-x-2",children:[a.jsx("div",{className:`${r?"hidden":"col-span-4"}`,children:y.length>0?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-white rounded-md my-4 py-6 px-6 shadow-2xl",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Detail Jasa Pesanan"}),a.jsx(Ua,{_getDataRincianDaftarPasananPenjualan:k,_hapusPesanan:()=>{},customer:_,kategoriHargaJasaList:y,pesananPenjualanJasa:e})]})}):a.jsx(a.Fragment,{})}),a.jsx("div",{className:`${r?"col-span-12":"col-span-8"}`,children:a.jsxs("div",{className:`bg-white my-4 rounded-md no-scrollbar relative ${r?"h-max max-h-[60vh]":"h-[70vh]"} overflow-y-scroll`,children:[a.jsxs("div",{className:"sticky top-0",children:[a.jsxs("div",{className:"bg-white py-4 px-6 rounded-md",children:[a.jsx("p",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Total Pesanan"}),a.jsxs("p",{className:"font-bold text-4xl",children:["Rp. ",u(F.reduce((c,i)=>c+parseFloat(i.total_harga),0))]}),r?a.jsx(a.Fragment,{children:h>0?a.jsxs("div",{className:"flex items-center gap-x-2 w-max my-2 px-2 py-1 rounded-md border-2 border-red-800",children:[a.jsx(V,{className:"text-red-800",size:13}),a.jsx("p",{className:"mb-0 text-red-800 font-bold",children:"Belum Lunas"})]}):a.jsxs("div",{className:"flex items-center gap-x-2 w-max my-2 px-2 py-1 rounded-md border-2 border-green-800",children:[a.jsx(ea,{className:"text-green-800",size:13}),a.jsx("p",{className:"mb-0 text-green-800 font-bold",children:"Lunas"})]})}):a.jsx(a.Fragment,{}),a.jsxs("div",{className:"mt-5 flex items-center gap-x-2",children:[r?a.jsx(a.Fragment,{children:N?a.jsx(a.Fragment,{children:a.jsx("button",{className:"btn bg-gray-100 text-red-500 btn-sm border-red-500",onClick:()=>{A(c=>c=!c)},children:"Tutup Daftar Pesanan"})}):a.jsx(a.Fragment,{children:a.jsx("button",{className:"btn bg-gray-100 btn-sm border-gray-500",onClick:()=>{A(c=>c=!c)},children:"Lihat Daftar Pesanan"})})}):a.jsx(a.Fragment,{}),a.jsx("div",{className:"hidden",children:a.jsx(za,{customer:_,ref:p,rincianPesananPenjualanJasa:F,pesananPenjualanJasa:e,tanggalPesananPenjualanJasa:l,nomorPesananPenjualanJasa:g,total:F.reduce((c,i)=>c+parseFloat(i.total_harga),0)})}),a.jsxs("button",{className:"btn bg-red-800 text-white btn-sm border-red",onClick:E,children:[a.jsx(Fa,{})," Cetak Pesanan Penjualan Jasa"]})]})]}),r&&!N?a.jsx(a.Fragment,{}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"grid grid-cols-12 text-sm gap-x-2 py-2 font-bold border-t-2 bg-gray-100 px-6",children:[a.jsx("div",{className:"col-span-1",children:a.jsx("p",{className:"text-gray-500",children:"No."})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{className:"text-gray-500 text-md",children:"Kode Jasa"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-gray-500 text-md",children:"Nama Jasa"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-gray-500 text-md",children:"Satuan Jasa"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-gray-500 text-md",children:"Harga Jasa"})})]})})]}),r&&!N?a.jsx(a.Fragment,{}):a.jsx(a.Fragment,{children:F.map((c,i)=>a.jsxs("div",{className:"py-3  border-t-2",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 px-6 items-start font-bold",children:[a.jsx("div",{className:"col-span-1",children:a.jsxs("p",{className:"text-sm",children:[i+1,"."]})}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-sm",children:c.kategori_harga_jasa_kode_jasa}),a.jsx("p",{className:"text-xs my-1 font-normal",children:c.daftar_gudang_name})]}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-sm",children:c.daftar_jasa_name})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-sm",children:c.satuan_jasa_name})}),a.jsxs("div",{className:"col-span-3",children:[a.jsxs("p",{className:"text-sm",children:["Rp. ",u(c.harga)]}),a.jsxs("p",{className:"text-xs font-normal",children:["PPN : Rp. ",u(c.ppn)]})]})]}),a.jsxs("div",{className:"grid grid-cols-12 text-xs gap-x-2 px-6 text-gray-500 font-bold",children:[a.jsx("div",{className:"col-span-1"}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs("p",{children:["Jumlah : ",u(c.jumlah)]}),r?a.jsx(a.Fragment,{children:a.jsxs("p",{children:["Retur : ",u(c.retur)]})}):a.jsx(a.Fragment,{})]}),a.jsx("div",{className:"col-span-3",children:c.diskon_angka>0?a.jsxs(a.Fragment,{children:[a.jsx("p",{children:"Diskon"}),a.jsx("p",{children:"Harga Diskon"}),a.jsx("p",{children:"PPN Diskon"})]}):a.jsx(a.Fragment,{})}),a.jsx("div",{className:"col-span-3",children:c.diskon_angka>0?a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Rp. ",u(c.diskon_angka)," (",c.diskon_persentase," % )"]}),a.jsxs("p",{children:["Rp. ",u(c.harga_setelah_diskon)]}),a.jsxs("p",{children:["Rp. ",u(c.ppn_setelah_diskon)]})]}):a.jsx(a.Fragment,{})}),a.jsxs("div",{className:"col-span-3",children:["Total Harga ",a.jsxs("p",{children:["Rp. ",u(c.total_harga)]}),r?a.jsxs(a.Fragment,{children:["Status ",a.jsx("p",{children:c.piutang!="0"?`Belum Lunas ( Rp. ${u(c.piutang)} )`:"Sudah Lunas"})]}):a.jsx(a.Fragment,{})]})]}),r?a.jsx(a.Fragment,{}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"grid grid-cols-12 gap-x-2 px-6",children:a.jsx("div",{className:"col-span-1 col-start-2 mb-3",children:a.jsxs("button",{className:"btn w-max btn-sm bg-red-700 text-white",onClick:o=>{S(c.uuid)},children:[a.jsx(sa,{})," Hapus"]})})})})]}))})]})})]})})},Ya=({riwayatPelunasanPenjualanJasa:e,edited:l,_getDaftarRiwayatTransaksi:g=()=>{}})=>{var z,m,R;const[_,r]=n.useState(e.nomor_transaksi!="EMPTY"?e.nomor_transaksi:""),[P,H]=n.useState(e.bukti_transaksi!="EMPTY"?e.bukti_transaksi:""),[F,b]=n.useState(e.keterangan!="EMPTY"?e.keterangan:"Tidak Ada"),[y,C]=n.useState(e.total),[N,A]=n.useState(!1),[h,$]=n.useState([]),[p,E]=n.useState([]),[k,D]=n.useState(!1),[S,w]=n.useState(l),c=()=>{aa.custom(`/cek_denda_pelunasan_penjualan/${e.uuid}`,"GET").then(s=>{A(L=>s.data)}).catch(s=>T(s))},i=()=>{ca.custom(`/pesanan/${e.uuid}`).then(s=>{$(s.data)}).catch(s=>T(s))},o=()=>{ba.custom(`/pesanan/${e.uuid}`).then(s=>{E(s.data)}).catch(s=>T(s))},t=(s,L)=>{let J=h,j=0;J=J.map(f=>(f.uuid==L&&(f.nilai_pelunasan=s),j+=M(f.nilai_pelunasan),f)),C(f=>j),$(f=>J)},O=(s,L)=>{let J=p,j=0;J=J.map(f=>(f.uuid==L&&(f.nilai_pelunasan=s),j+=M(f.nilai_pelunasan),f)),C(f=>j),E(f=>J)},U=async()=>{for(let s=0;s<p.length;s++)await ba.custom(`${p[s].rincian_pelunasan_penjualan_denda_jasa?`/${p[s].rincian_pelunasan_penjualan_denda_jasa}`:""}`,p[s].rincian_pelunasan_penjualan_denda_jasa?"PUT":"POST",null,{data:{pelunasan_penjualan_jasa:e.uuid,rincian_pesanan_penjualan_jasa:p[s].uuid,hari_terlewat:p[s].hari_terlewat,total_denda:p[s].total_denda,denda_sudah_dibayar:p[s].denda_sudah_dibayar,piutang_denda:p[s].total_denda-p[s].denda_sudah_dibayar,nilai_pelunasan:`${p[s].nilai_pelunasan}`}}).then(()=>{Z("Berhasil","Data Berhasil Disimpan")}).catch(L=>T(L));o()},d=async()=>{for(let s=0;s<h.length;s++)await ca.custom(`${h[s].rincian_pelunasan_penjualan_jasa?`/${h[s].rincian_pelunasan_penjualan_jasa}`:""}`,h[s].rincian_pelunasan_penjualan_jasa?"PUT":"POST",null,{data:{pelunasan_penjualan_jasa:e.uuid,rincian_pesanan_penjualan_jasa:h[s].uuid,sudah_dibayar:h[s].sudah_dibayar,piutang:h[s].piutang,nilai_pelunasan:`${h[s].nilai_pelunasan}`}}).then(()=>{Z("Berhasil","Data Berhasil Disimpan")}).catch(L=>T(L));i()},K=()=>{aa.custom("/"+e.uuid,"DELETE").then(()=>{g()}).catch(s=>T(s))},B=async()=>{await pa(),await Q()&&aa.custom("/"+e.uuid,"PUT",null,{data:{nomor_pelunasan_penjualan_jasa:_,bukti_transaksi:P,keterangan:F,faktur_penjualan_jasa:e.faktur_penjualan_jasa,tanggal:e.tanggal,kode_akun_perkiraan:e.kode_akun_perkiraan}}).then(()=>{Z("Berhasil","Data Berhasil Disimpan")}).catch(s=>T(s))};return n.useEffect(()=>{N==0?i():o()},[N]),n.useEffect(()=>{k&&c()},[k]),a.jsxs("div",{className:"border-b-2 py-2",children:[a.jsx("div",{className:"cursor-pointer",onClick:()=>{w(s=>s=!s)},children:a.jsxs("div",{className:"flex items-center justify-between gap-x-2 px-4",children:[a.jsxs("div",{className:"flex items-center gap-x-2",children:[a.jsx("p",{className:"text-sm pr-2 font-medium",children:ha(e.tanggal.split("T")[1])}),a.jsx("p",{className:"text-sm pr-2 font-medium px-3 border-l-2 border-black",children:"Pelunasan Penjualan Jasa"})]}),S?a.jsx(ja,{size:15}):a.jsx(ua,{size:15})]})}),S?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"ml-4 py-4 px-4",children:[((z=JSON.parse(e.perintah_stok_opname_nomor_surat_perintah))==null?void 0:z.hasil_stok_opname_count)==0?a.jsx(a.Fragment,{}):a.jsx("p",{className:"text-xs font-medium text-green-600 my-3",children:(m=JSON.parse(e.perintah_stok_opname_nomor_surat_perintah))!=null&&m.nomor_perintah_stok_opname?`Telah Terdaftar Pada Surat Perintah Stok Opname ${(R=JSON.parse(e.perintah_stok_opname_nomor_surat_perintah))==null?void 0:R.nomor_perintah_stok_opname}`:""}),S?a.jsxs(a.Fragment,{children:[a.jsxs("table",{className:"text-left text-sm",children:[a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-3":""}`,children:"Nomor Pelunasan Penjualan Jasa"}),a.jsx("td",{className:`px-5 ${l?"pb-3":""}`,children:":"}),a.jsx("td",{className:`${l?"pb-3":""}`,children:l?a.jsx(Y,{addClass:"px-0",name:"nomor_pelunasan_penjualan_jasa",value:_,onchange:s=>r(s.target.value)}):e.nomor_transaksi})]}),a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-3":""}`,children:"Bukti Transaksi"}),a.jsx("td",{className:`px-5 ${l?"pb-3":""}`,children:":"}),a.jsx("td",{className:`${l?"pb-3":""}`,children:l?a.jsx(Y,{addClass:"px-0",name:"bukti_transaksi",value:P,onchange:s=>H(s.target.value)}):e.bukti_transaksi})]}),a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-5":""}`,children:"Kode Akun"}),a.jsx("td",{className:`px-5 ${l?"pb-5":""}`,children:":"}),a.jsxs("td",{className:`${l?"pb-5":""}`,children:[e.kode_akun_perkiraan_code," - ",e.kode_akun_perkiraan_name]})]}),a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-3":""}`,children:"Total Pelunasan"}),a.jsx("td",{className:`px-5 ${l?"pb-3":""}`,children:":"}),a.jsxs("td",{className:`${l?"pb-3":""}`,children:["Rp. ",u(y)]})]})]}),a.jsx("p",{className:`text-sm mt-3 ${l?"mt-5":""}`,children:"Keterangan"}),a.jsx("p",{className:"text-sm mb-3",children:l?a.jsx(Y,{addClass:"mt-5",name:"keterangan",value:F,onchange:s=>b(s.target.value)}):e.keterangan}),a.jsxs("div",{className:"my-2 flex justify-between",children:[a.jsx("div",{children:l?a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"mr-2 btn btn-sm bg-green-900 text-white",onClick:()=>B(),children:[a.jsx(ea,{size:12}),"Simpan"]}),a.jsxs("button",{className:"mr-2 btn btn-sm bg-red-500 text-white",onClick:()=>K(),children:[a.jsx(sa,{size:12}),"Hapus"]})]}):a.jsx(a.Fragment,{})}),k?a.jsx(a.Fragment,{children:a.jsx("button",{className:"btn btn-sm border-red-500 text-red-500",onClick:()=>D(s=>s=!s),children:"Tutup Daftar Pelunasan"})}):a.jsx(a.Fragment,{children:a.jsx("button",{className:"btn btn-sm bg-white border-gray-400",onClick:()=>D(s=>s=!s),children:"Lihat Daftar Pelunasan"})})]}),k?a.jsx(a.Fragment,{children:N==1?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto mt-5 max-h-[20vh] no-scrollbar pb-4",children:a.jsxs("table",{className:"table table-sm table-zebra rounded-xl",children:[a.jsxs("thead",{className:"bg-blue-950 z-10 text-white sticky top-0",children:[a.jsx("th",{children:"No."}),a.jsx("th",{children:"Kode Jasa"}),a.jsx("th",{children:"Nama Jasa"}),a.jsx("th",{children:"Satuan Jasa"}),a.jsx("th",{children:"Gudang Asal"}),a.jsx("th",{children:"Hari Terlewat"}),a.jsx("th",{children:"Total Denda"}),a.jsx("th",{children:"Denda Sudah Dibayar"}),a.jsx("th",{children:"Piutang Denda"}),a.jsx("th",{width:200,children:"Nilai Pelunasan"})]}),a.jsx("tbody",{children:p.map((s,L)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsxs("td",{children:[L+1,"."]}),a.jsx("td",{children:s.kategori_harga_jasa_kode_jasa}),a.jsx("td",{children:s.daftar_jasa_name}),a.jsx("td",{children:s.satuan_jasa_name}),a.jsx("td",{children:s.daftar_gudang_name}),a.jsxs("td",{children:[s.hari_terlewat," Hari"]}),a.jsxs("td",{children:["Rp. ",u(s.total_denda)]}),a.jsxs("td",{children:["Rp. ",u(s.denda_sudah_dibayar)]}),a.jsxs("td",{children:["Rp. ",u(s.piutang_denda)]}),a.jsx("td",{children:l?a.jsx(a.Fragment,{children:a.jsx(Y,{name:"nilai_pelunasan",type:"text",other:{defaultValue:0},onchange:J=>{X(J,s.piutang_denda),O(J.target.value,s.uuid)},value:u(s.nilai_pelunasan)})}):a.jsxs(a.Fragment,{children:["Rp. ",u(s.nilai_pelunasan)]})})]})}))})]})}),l?a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{className:"btn btn-sm bg-green-900 text-white",onClick:()=>{U()},children:"Simpan"})})}):a.jsx(a.Fragment,{})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto mt-5 max-h-[20vh] no-scrollbar pb-4",children:a.jsxs("table",{className:"table table-sm table-zebra rounded-xl",children:[a.jsxs("thead",{className:"bg-blue-950 z-10 text-white sticky top-0",children:[a.jsx("th",{children:"No."}),a.jsx("th",{children:"Kode Jasa"}),a.jsx("th",{children:"Nama Jasa"}),a.jsx("th",{children:"Satuan Jasa"}),a.jsx("th",{children:"Gudang Asal"}),a.jsx("th",{children:"Pelunasan Sudah Dibayar"}),a.jsx("th",{children:"Piutang"}),a.jsx("th",{width:200,children:"Nilai Pelunasan"})]}),a.jsx("tbody",{children:h.map((s,L)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsxs("td",{children:[L+1,"."]}),a.jsx("td",{children:s.kategori_harga_jasa_kode_jasa}),a.jsx("td",{children:s.daftar_jasa_name}),a.jsx("td",{children:s.satuan_jasa_name}),a.jsx("td",{children:s.daftar_gudang_name}),a.jsxs("td",{children:["Rp. ",u(s.sudah_dibayar)]}),a.jsxs("td",{children:["Rp. ",u(s.piutang)]}),a.jsx("td",{children:l?a.jsx(a.Fragment,{children:a.jsx(Y,{name:"nilai_pelunasan",type:"text",other:{defaultValue:0},onchange:J=>{X(J,s.piutang),t(J.target.value,s.uuid)},value:u(s.nilai_pelunasan)})}):a.jsxs(a.Fragment,{children:["Rp. ",u(s.nilai_pelunasan)]})})]})}))})]})}),l?a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{className:"btn btn-sm bg-green-900 text-white",onClick:()=>{d()},children:"Simpan"})})}):a.jsx(a.Fragment,{})]})}):a.jsx(a.Fragment,{})]}):a.jsx(a.Fragment,{})]})}):a.jsx(a.Fragment,{})]})},Ia=({riwayatReturPenjualanJasa:e,edited:l,_getDaftarRiwayatTransaksi:g=()=>{}})=>{var t,O,U;const[_,r]=n.useState(e.nomor_transaksi!="EMPTY"?e.nomor_transaksi:""),[P,H]=n.useState(e.bukti_transaksi!="EMPTY"?e.bukti_transaksi:""),[F,b]=n.useState(e.keterangan!="EMPTY"?e.keterangan:"Tidak Ada"),[y,C]=n.useState(e.total),[N,A]=n.useState(!1),[h,$]=n.useState([]),[p,E]=n.useState(!1),[k,D]=n.useState(l),S=()=>{Na.custom(`/pesanan/${e.uuid}`).then(d=>{$(d.data)}).catch(d=>T(d))},w=(d,K)=>{let B=h,z=0;B=B.map(m=>(m.uuid==K&&(m.retur=d,m.nilai_retur=(m.harga_setelah_diskon+m.ppn_setelah_diskon)*M(d),m.nilai_retur>m.sudah_dibayar_fix&&(m.nilai_retur=m.sudah_dibayar_fix)),z+=M(m.nilai_retur),m)),C(m=>z),$(m=>B)},c=async()=>{for(let d=0;d<h.length;d++)await Na.custom(`${h[d].rincian_retur_penjualan_jasa?`/${h[d].rincian_retur_penjualan_jasa}`:""}`,h[d].rincian_retur_penjualan_jasa?"PUT":"POST",null,{data:{retur_penjualan_jasa:e.uuid,rincian_pesanan_penjualan_jasa:h[d].uuid,jumlah:`${h[d].jumlah_fix}`,denda_sudah_dibayar:`${h[d].denda_sudah_dibayar}`,sudah_dibayar:`${h[d].sudah_dibayar_fix}`,retur:`${h[d].retur}`,nilai_retur:`${h[d].nilai_retur}`,retur_sebelum:`${h[d].retur_sebelum}`,nilai_retur_sebelum:`${h[d].nilai_retur_sebelum}`}}).then(()=>Z("Berhasil","Data Berhasil Disimpan")).catch(K=>T(K));S()},i=()=>{oa.custom("/"+e.uuid,"DELETE").then(()=>{g()}).catch(d=>T(d))},o=async()=>{await pa(),await Q()&&oa.custom("/"+e.uuid,"PUT",null,{data:{nomor_retur_penjualan_jasa:_,bukti_transaksi:P,keterangan:F,faktur_penjualan_jasa:e.faktur_penjualan_jasa,tanggal:e.tanggal,kode_akun_perkiraan:e.kode_akun_perkiraan}}).then(()=>Z("Berhasil","Data Berhasil Disimpan")).catch(d=>T(d))};return n.useEffect(()=>{p&&!N&&(S(),A(d=>!0))},[p]),a.jsxs("div",{className:"border-b-2 py-2",children:[a.jsx("div",{className:"cursor-pointer",onClick:()=>{D(d=>d=!d)},children:a.jsxs("div",{className:"flex items-center justify-between gap-x-2 px-4",children:[a.jsxs("div",{className:"flex items-center gap-x-2",children:[a.jsx("p",{className:"text-sm pr-2 font-medium",children:ha(e.tanggal.split("T")[1])}),a.jsx("p",{className:"text-sm pr-2 font-medium px-4 border-l-2 border-black",children:"Retur Penjualan Jasa"})]}),k?a.jsx(ja,{size:15}):a.jsx(ua,{size:15})]})}),k?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"ml-4 py-4 px-4",children:[((t=JSON.parse(e.perintah_stok_opname_nomor_surat_perintah))==null?void 0:t.hasil_stok_opname_count)==0?a.jsx(a.Fragment,{}):a.jsx("p",{className:"text-xs font-medium text-green-600 my-3",children:(O=JSON.parse(e.perintah_stok_opname_nomor_surat_perintah))!=null&&O.nomor_perintah_stok_opname?`Telah Terdaftar Pada Surat Perintah Stok Opname ${(U=JSON.parse(e.perintah_stok_opname_nomor_surat_perintah))==null?void 0:U.nomor_perintah_stok_opname}`:""}),k?a.jsxs(a.Fragment,{children:[a.jsxs("table",{className:"text-left text-sm",children:[a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-3":""}`,children:"Nomor Retur Penjualan Jasa"}),a.jsx("td",{className:`px-5 ${l?"pb-3":""}`,children:":"}),a.jsx("td",{className:`${l?"pb-3":""}`,children:l?a.jsx(Y,{addClass:"px-0",name:"nomor_retur_penjualan_jasa",value:_,onchange:d=>r(d.target.value)}):e.nomor_transaksi})]}),a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-3":""}`,children:"Bukti Transaksi"}),a.jsx("td",{className:`px-5 ${l?"pb-3":""}`,children:":"}),a.jsx("td",{className:`${l?"pb-3":""}`,children:l?a.jsx(Y,{addClass:"px-0",name:"bukti_transaksi",value:P,onchange:d=>H(d.target.value)}):e.bukti_transaksi})]}),a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-5":""}`,children:"Kode Akun"}),a.jsx("td",{className:`px-5 ${l?"pb-5":""}`,children:":"}),a.jsxs("td",{className:`${l?"pb-5":""}`,children:[e.kode_akun_perkiraan_code," - ",e.kode_akun_perkiraan_name]})]}),a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-3":""}`,children:"Total Retur"}),a.jsx("td",{className:`px-5 ${l?"pb-3":""}`,children:":"}),a.jsxs("td",{className:`${l?"pb-3":""}`,children:["Rp. ",u(y)]})]})]}),a.jsx("p",{className:`text-sm mt-3 ${l?"mt-5":""}`,children:"Keterangan"}),a.jsx("p",{className:"text-sm mb-3",children:l?a.jsx(Y,{addClass:"mt-5",name:"keterangan",value:F,onchange:d=>b(d.target.value)}):e.keterangan}),a.jsxs("div",{className:"my-2 flex justify-between",children:[a.jsx("div",{children:l?a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"mr-2 btn btn-sm bg-green-900 text-white",onClick:()=>o(),children:[a.jsx(ea,{size:12}),"Simpan"]}),a.jsxs("button",{className:"mr-2 btn btn-sm bg-red-500 text-white",onClick:()=>i(),children:[a.jsx(sa,{size:12}),"Hapus"]})]}):a.jsx(a.Fragment,{})}),p?a.jsx(a.Fragment,{children:a.jsx("button",{className:"btn btn-sm border-red-500 text-red-500",onClick:()=>E(d=>d=!d),children:"Tutup Daftar Retur"})}):a.jsx(a.Fragment,{children:a.jsx("button",{className:"btn btn-sm bg-white border-gray-400",onClick:()=>E(d=>d=!d),children:"Lihat Daftar Retur"})})]}),p?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto mt-5 max-h-[20vh] no-scrollbar pb-4",children:a.jsxs("table",{className:"table table-sm table-zebra rounded-xl",children:[a.jsxs("thead",{className:"bg-blue-950 z-10 text-white sticky top-0",children:[a.jsx("th",{children:"No."}),a.jsx("th",{children:"Kode Jasa"}),a.jsx("th",{children:"Nama Jasa"}),a.jsx("th",{children:"Satuan Jasa"}),a.jsx("th",{children:"Gudang Asal"}),a.jsx("th",{children:"Pelunasan Sudah Dibayar"}),a.jsx("th",{width:150,children:"Retur Sebelumnya"}),a.jsx("th",{width:150,children:"Retur"}),a.jsx("th",{children:"Nilai Retur"})]}),a.jsx("tbody",{children:h.map((d,K)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsxs("td",{children:[K+1,"."]}),a.jsx("td",{children:d.kategori_harga_jasa_kode_jasa}),a.jsx("td",{children:d.daftar_jasa_name}),a.jsx("td",{children:d.satuan_jasa_name}),a.jsx("td",{children:d.daftar_gudang_name}),a.jsxs("td",{children:["Rp. ",u(d.sudah_dibayar_fix)]}),a.jsxs("td",{children:[u(d.retur_sebelum)," ",d.satuan_jasa_name]}),a.jsx("td",{children:l?a.jsx(a.Fragment,{children:a.jsx(Y,{name:"retur",type:"text",other:{defaultValue:0},onchange:B=>{X(B,d.jumlah_fix),w(B.target.value,d.uuid)},value:u(d.retur)})}):a.jsxs(a.Fragment,{children:[u(d.retur)," ",d.satuan_jasa_name]})}),a.jsxs("td",{children:["Rp. ",u(d.nilai_retur)]})]})}))})]})}),l?a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{className:"btn btn-sm bg-green-900 text-white",onClick:()=>{c()},children:"Simpan"})})}):a.jsx(a.Fragment,{})]}):a.jsx(a.Fragment,{})]}):a.jsx(a.Fragment,{})]})}):a.jsx(a.Fragment,{})]})},Ma=({riwayatPengembalianDendaPenjualanJasa:e,edited:l,_getDaftarRiwayatTransaksi:g=()=>{}})=>{var c,i,o;const[_,r]=n.useState(e.nomor_transaksi!="EMPTY"?e.nomor_transaksi:""),[P,H]=n.useState(e.bukti_transaksi!="EMPTY"?e.bukti_transaksi:""),[F,b]=n.useState(e.keterangan!="EMPTY"?e.keterangan:"Tidak Ada"),[y,C]=n.useState(e.total),[N,A]=n.useState([]),[h,$]=n.useState(l),[p,E]=n.useState(l),k=()=>{ka.custom(`/pesanan/${e.uuid}`).then(t=>{A(t.data),C(O=>t.data.reduce((U,d)=>d.denda_yang_dikembalikan+U,0))}).catch(t=>T(t))},D=async()=>{for(let t=0;t<N.length;t++)await ka.custom(`${N[t].rincian_pengembalian_denda_penjualan_jasa?`/${N[t].rincian_pengembalian_denda_penjualan_jasa}`:""}`,N[t].rincian_pengembalian_denda_penjualan_jasa?"PUT":"POST",null,{data:{pengembalian_denda_penjualan_jasa:e.uuid,rincian_pesanan_penjualan_jasa:N[t].uuid,denda_yang_dikembalikan:`${N[t].denda_yang_dikembalikan}`}}).then(()=>{Z("Berhasil","Data Berhasil Disimpan")});k()},S=()=>{ma.custom("/"+e.uuid,"DELETE").then(()=>{g()}).catch(t=>T(t))},w=async()=>{await pa(),await Q()&&ma.custom("/"+e.uuid,"PUT",null,{data:{nomor_pengembalian_denda_penjualan_jasa:_,bukti_transaksi:P,keterangan:F,faktur_penjualan_jasa:e.faktur_penjualan_jasa,tanggal:e.tanggal,kode_akun_perkiraan:e.kode_akun_perkiraan}}).then(()=>{D()}).catch(t=>T(t))};return n.useEffect(()=>{h&&k()},[h]),a.jsxs("div",{className:"border-b-2 py-2",children:[a.jsx("div",{className:"cursor-pointer",onClick:()=>{E(t=>t=!t)},children:a.jsxs("div",{className:"flex items-center justify-between gap-x-2 px-4",children:[a.jsxs("div",{className:"flex items-center gap-x-2",children:[a.jsx("p",{className:"text-sm pr-2 font-medium",children:ha(e.tanggal.split("T")[1])}),a.jsx("p",{className:"text-sm pr-2 font-medium px-3 border-l-2 border-black",children:"Pengembalian Denda Penjualan Jasa"})]}),p?a.jsx(ja,{size:15}):a.jsx(ua,{size:15})]})}),p?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"ml-4 py-4 px-4",children:[((c=JSON.parse(e.perintah_stok_opname_nomor_surat_perintah))==null?void 0:c.hasil_stok_opname_count)==0?a.jsx(a.Fragment,{}):a.jsx("p",{className:"text-xs font-medium text-green-600 my-3",children:(i=JSON.parse(e.perintah_stok_opname_nomor_surat_perintah))!=null&&i.nomor_perintah_stok_opname?`Telah Terdaftar Pada Surat Perintah Stok Opname ${(o=JSON.parse(e.perintah_stok_opname_nomor_surat_perintah))==null?void 0:o.nomor_perintah_stok_opname}`:""}),p?a.jsxs(a.Fragment,{children:[a.jsxs("table",{className:"text-left text-sm",children:[a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-3":""}`,children:"Nomor Pengembalian Denda Penjualan Jasa"}),a.jsx("td",{className:`px-5 ${l?"pb-3":""}`,children:":"}),a.jsx("td",{className:`${l?"pb-3":""}`,children:l?a.jsx(Y,{addClass:"px-0",name:"nomor_pengembalian_denda_penjualan_jasa",value:_,onchange:t=>r(t.target.value)}):e.nomor_transaksi})]}),a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-3":""}`,children:"Bukti Transaksi"}),a.jsx("td",{className:`px-5 ${l?"pb-3":""}`,children:":"}),a.jsx("td",{className:`${l?"pb-3":""}`,children:l?a.jsx(Y,{addClass:"px-0",name:"bukti_transaksi",value:P,onchange:t=>H(t.target.value)}):e.bukti_transaksi})]}),a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-5":""}`,children:"Kode Akun"}),a.jsx("td",{className:`px-5 ${l?"pb-5":""}`,children:":"}),a.jsxs("td",{className:`${l?"pb-5":""}`,children:[e.kode_akun_perkiraan_code," - ",e.kode_akun_perkiraan_name]})]}),a.jsxs("tr",{children:[a.jsx("td",{className:`${l?"pb-3":""}`,children:"Total PengembalianDenda"}),a.jsx("td",{className:`px-5 ${l?"pb-3":""}`,children:":"}),a.jsxs("td",{className:`${l?"pb-3":""}`,children:["Rp. ",u(y)]})]})]}),a.jsx("p",{className:`text-sm mt-3 ${l?"mt-5":""}`,children:"Keterangan"}),a.jsx("p",{className:"text-sm mb-3",children:l?a.jsx(Y,{addClass:"mt-5",name:"keterangan",value:F,onchange:t=>b(t.target.value)}):e.keterangan}),a.jsxs("div",{className:"my-2 flex justify-between",children:[a.jsx("div",{children:l?a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"mr-2 btn btn-sm bg-green-900 text-white",onClick:()=>w(),children:[a.jsx(ea,{size:12}),"Simpan"]}),a.jsxs("button",{className:"mr-2 btn btn-sm bg-red-500 text-white",onClick:()=>S(),children:[a.jsx(sa,{size:12}),"Hapus"]})]}):a.jsx(a.Fragment,{})}),h?a.jsx(a.Fragment,{children:a.jsx("button",{className:"btn btn-sm border-red-500 text-red-500",onClick:()=>$(t=>t=!t),children:"Tutup Daftar PengembalianDenda"})}):a.jsx(a.Fragment,{children:a.jsx("button",{className:"btn btn-sm bg-white border-gray-400",onClick:()=>$(t=>t=!t),children:"Lihat Daftar PengembalianDenda"})})]}),h?a.jsx(a.Fragment,{children:a.jsx("div",{className:"overflow-x-auto mt-5 max-h-[20vh] no-scrollbar pb-4",children:a.jsxs("table",{className:"table table-sm table-zebra rounded-xl",children:[a.jsxs("thead",{className:"bg-blue-950 z-10 text-white sticky top-0",children:[a.jsx("th",{children:"No."}),a.jsx("th",{children:"Kode Jasa"}),a.jsx("th",{children:"Nama Jasa"}),a.jsx("th",{children:"Satuan Jasa"}),a.jsx("th",{children:"Gudang Asal"}),a.jsx("th",{children:"Denda Yang Dikembalikan"})]}),a.jsx("tbody",{children:N.map((t,O)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsxs("td",{children:[O+1,"."]}),a.jsx("td",{children:t.kategori_harga_jasa_kode_jasa}),a.jsx("td",{children:t.daftar_jasa_name}),a.jsx("td",{children:t.satuan_jasa_name}),a.jsx("td",{children:t.daftar_gudang_name}),a.jsxs("td",{children:["Rp. ",u(t.denda_yang_dikembalikan)]})]})}))})]})})}):a.jsx(a.Fragment,{})]}):a.jsx(a.Fragment,{})]})}):a.jsx(a.Fragment,{})]})},Va=({fakturPenjualanJasa:e,setFakturCancel:l=()=>{},setTanggalTransaksiAkhir:g=()=>{}})=>{const[_,r]=n.useState(W()),[P,H]=n.useState({label:"Pelunasan",value:"Pelunasan"}),F=["Pelunasan","Retur","Pengembalian_Denda"],[b,y]=n.useState(),[C,N]=n.useState([]),[A,h]=n.useState([]),[$,p]=n.useState(!0),[E,k]=n.useState([]),D=()=>{p(i=>!1),l(i=>!0),k(i=>F.filter(o=>o!="Pengembalian_Denda").map(o=>({label:o.replace("_"," "),value:o}))),e&&ta.custom("/riwayat_transaksi/"+e.uuid).then(i=>{i.data.length>0&&(l(o=>!1),g(o=>i.data[0].tanggal),i.data.filter(o=>o.type=="retur_penjualan_jasa").length>0&&k(o=>F.map(t=>({label:t.replace("_"," "),value:t})))),h(o=>Ka(i.data))})},S=async i=>{if(i.preventDefault(),await Q(i.target)){let o=aa;P.value=="Retur"&&(o=oa),P.value=="Pengembalian_Denda"&&(o=ma);const t={faktur_penjualan_jasa:e.uuid,tanggal:_,bukti_transaksi:"EMPTY",kode_akun_perkiraan:b.value,keterangan:"EMPTY"};t[`nomor_${P.value.toLowerCase()}_penjualan_jasa`]="EMPTY",o.custom("","POST",null,{data:t}).then(()=>{Z("Berhasil","Data Berhasil Disimpan"),D(),r(W())}).catch(O=>T(O))}},w=()=>{fa.custom("/kas_bank","GET").then(i=>{N(o=>i.data),i.data.length>0&&y({label:`${i.data[0].code} - ${i.data[0].name}`,value:i.data[0].uuid})})},c=()=>{fa.custom("/piutang_usaha","GET").then(i=>{const o=[i.data];N(t=>o),o.length>0&&y({label:`${o[0].code} - ${o[0].name}`,value:o[0].uuid})})};return n.useEffect(()=>{p(i=>!0)},[A]),n.useEffect(()=>{if(N(i=>[]),y(i=>null),w(),P.value=="Retur"&&(c(),A.length>0)){const i=A.filter(o=>o.data.filter(t=>t.type=="pelunasan_penjualan_jasa").length>0);if(i.length>0){const o=i[0].data.filter(t=>t.type=="pelunasan_penjualan_jasa");o.length>0&&aa.custom(`/cek_denda_pelunasan_penjualan/${o[0].uuid}`,"GET").then(t=>{t.data==0&&w()}).catch(t=>T(t))}}},[P]),n.useEffect(()=>{D(),w()},[]),a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-white rounded-md mt-4 py-6 px-6 shadow-2xl",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Riwayat Transaksi Penjualan Jasa"}),a.jsxs("form",{className:"mb-5 border-[3px] rounded-md py-2 px-3",onSubmit:i=>S(i),children:[a.jsxs("div",{className:"flex gap-x-2",children:[a.jsx(G,{label:"Tanggal",type:"datetime-local",onchange:i=>{r(i.target.value)},others:{value:_,name:"tanggal"}}),a.jsx(q,{label:"Tipe Transaksi",addClass:"z-50",optionsDataList:E,onchange:i=>{H(i)},optionsLabel:"label",optionsValue:"value",selectName:"tipe_transaksi",selectValue:P}),a.jsx(q,{label:"Kode Akun",optionsDataList:C,optionsLabel:["code","name"],optionsValue:"uuid",addClass:"z-50",optionsLabelIsArray:!0,optionsDelimiter:"-",selectValue:b,onchange:i=>{y(i)},selectName:"kodeAkun"})]}),a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(la,{})," Simpan"]})]}),a.jsx("div",{className:"flex flex-col max-h-[60vh] overflow-scroll no-scrollbar relative",children:$?a.jsx(a.Fragment,{children:A.map((i,o)=>a.jsxs("div",{className:"mb-5",children:[a.jsx("p",{className:"font-bold mb-3 sticky top-0 bg-gray-300 p-2 z-20",children:Ca("/",xa(i.parent,!1))}),a.jsx("div",{className:"flex flex-col",children:i.data.map((t,O)=>{var U,d,K;return a.jsxs(a.Fragment,{children:[t.type=="pelunasan_penjualan_jasa"?a.jsx(a.Fragment,{children:a.jsx(Ya,{riwayatPelunasanPenjualanJasa:t,edited:((U=JSON.parse(t.perintah_stok_opname_nomor_surat_perintah))==null?void 0:U.hasil_stok_opname_count)>0?!1:o==0&&O==0,_getDaftarRiwayatTransaksi:D})}):a.jsx(a.Fragment,{}),t.type=="retur_penjualan_jasa"?a.jsx(a.Fragment,{children:a.jsx(Ia,{riwayatReturPenjualanJasa:t,edited:((d=JSON.parse(t.perintah_stok_opname_nomor_surat_perintah))==null?void 0:d.hasil_stok_opname_count)>0?!1:o==0&&O==0,_getDaftarRiwayatTransaksi:D})}):a.jsx(a.Fragment,{}),t.type=="pengembalian_denda_penjualan_jasa"?a.jsx(a.Fragment,{children:a.jsx(Ma,{riwayatPengembalianDendaPenjualanJasa:t,edited:((K=JSON.parse(t.perintah_stok_opname_nomor_surat_perintah))==null?void 0:K.hasil_stok_opname_count)>0?!1:o==0&&O==0,_getDaftarRiwayatTransaksi:D})}):a.jsx(a.Fragment,{})]})})})]}))}):a.jsx(a.Fragment,{children:a.jsx("p",{className:"font-bold",children:"Riwayat Transaksi Belum Ada."})})})]})})},Wa=Pa.forwardRef((e,l)=>{const[g,_]=n.useState(0);return n.useEffect(()=>{if(e.rincianPesananPenjualanJasa){const r=e.rincianPesananPenjualanJasa.reduce((P,H)=>P+H.total_harga,0);_(P=>r)}},[]),a.jsxs("div",{ref:l,children:[a.jsx(ya,{bulan:e.bulan,tahun:e.tahun,title:"INVOICE"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:"KEPADA :"}),a.jsx("p",{children:e.customer.name}),a.jsx("p",{children:e.customer.code}),a.jsxs("p",{children:["HP. ",e.customer.no_hp]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold",children:"TANGGAL :"}),a.jsx("p",{children:xa(e.tanggalFakturPenjualanJasa)})]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:"font-bold",children:"NO FAKTUR PENJUALAN Jasa :"}),a.jsx("p",{children:e.nomorFakturPenjualanJasa})]}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:"font-bold",children:"NO PESANAN PENJUALAN Jasa :"}),a.jsx("p",{children:e.pesananPenjualanJasa.nomor_pesanan_penjualan_jasa})]})})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-12 text-sm gap-x-2 py-2 font-bold border-t-2",children:[a.jsx("div",{className:"col-span-1",children:a.jsx("p",{children:"No."})}),a.jsx("div",{className:"col-span-2",children:a.jsx("p",{children:"Kode Jasa"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{children:"Nama Jasa"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{children:"Satuan Jasa"})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{children:"Harga Jasa"})})]}),e.rincianPesananPenjualanJasa.map((r,P)=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"py-3  border-t-2",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 py-3 items-start font-bold",children:[a.jsx("div",{className:"col-span-1",children:a.jsxs("p",{className:"text-sm",children:[P+1,"."]})}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("p",{className:"text-sm",children:r.kategori_harga_jasa_kode_jasa}),a.jsx("p",{className:"text-sm my-1",children:r.daftar_gudang_name})]}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-sm",children:r.daftar_jasa_name})}),a.jsx("div",{className:"col-span-3",children:a.jsx("p",{className:"text-sm",children:r.satuan_jasa_name})}),a.jsxs("div",{className:"col-span-3",children:[a.jsxs("p",{className:"text-sm",children:["Rp. ",u(r.harga)]}),a.jsxs("p",{className:"text-sm",children:["PPN : Rp. ",u(r.ppn)]})]})]}),a.jsxs("div",{className:"grid grid-cols-12 text-sm gap-x-2 font-bold",children:[a.jsx("div",{className:"col-span-1"}),a.jsx("div",{className:"col-span-2",children:a.jsxs("p",{children:["Jumlah : ",u(r.jumlah)]})}),a.jsx("div",{className:"col-span-3",children:r.diskon_angka>0?a.jsxs(a.Fragment,{children:[a.jsx("p",{children:"Diskon"}),a.jsx("p",{children:"Harga Diskon"}),a.jsx("p",{children:"PPN Diskon"})]}):a.jsx(a.Fragment,{})}),a.jsx("div",{className:"col-span-3",children:r.diskon_angka>0?a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["Rp. ",u(r.diskon_angka)," (",r.diskon_persentase," % )"]}),a.jsxs("p",{children:["Rp. ",u(r.harga_setelah_diskon)]}),a.jsxs("p",{children:["Rp. ",u(r.ppn_setelah_diskon)]})]}):a.jsx(a.Fragment,{})}),a.jsxs("div",{className:"col-span-3",children:["Total Harga ",a.jsxs("p",{children:["Rp. ",u(r.total_harga)]})]})]})]})})),a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 pt-5 items-start font-bold border-t-2",children:[a.jsx("div",{className:"col-span-9",children:a.jsx("p",{children:"PEMBAYARAN"})}),a.jsx("div",{className:"col-span-3",children:a.jsxs("p",{children:["TOTAL ",a.jsx("br",{})," Rp. ",u(g)]})})]}),a.jsxs("div",{className:"pb-5",children:[a.jsx("p",{className:"font-bold mt-5",children:"TERBILANG"}),a.jsxs("p",{className:"font-normal",children:[Ta(g).toString().toUpperCase()," RUPIAH"]})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 pt-5 items-start font-bold",children:[a.jsx("div",{className:"col-span-3",children:a.jsx("p",{children:"TIPE PEMBAYARAN"})}),a.jsx("div",{className:"col-span-8",children:a.jsxs("p",{children:[":   ",e.tipePembayaran]})})]}),a.jsxs("div",{className:"grid grid-cols-12 gap-x-2 pb-5 items-start font-bold",children:[a.jsx("div",{className:"col-span-3",children:a.jsx("p",{children:"SYARAT PEMBAYARAN"})}),a.jsx("div",{className:"col-span-8",children:a.jsxs("p",{children:[":   ",e.syaratPembayaran]})})]}),a.jsx("div",{className:"grid grid-cols-12 gap-x-2 py-5 items-start font-bold",children:a.jsxs("div",{className:"col-span-12",children:[a.jsx("p",{className:"mb-2",children:"KETERANGAN"}),a.jsx("p",{className:"font-normal",children:e.keteranganFakturPenjualanJasa})]})})]})}),Za=({pesananPenjualanJasa:e,rincianPesananPenjualanJasa:l,customer:g,setFakturStatus:_=()=>{},fakturStatus:r,ppnStatus:P,setTanggalTransaksiAkhir:H=()=>{}})=>{const[F,b]=n.useState(),[y,C]=n.useState(!0),[N,A]=n.useState([]),[h,$]=n.useState([]),[p,E]=n.useState(W()),[k,D]=n.useState(),[S,w]=n.useState(),[c,i]=n.useState(),[o,t]=n.useState(),[O,U]=n.useState(),[d,K]=n.useState(""),B=n.useRef(),z=Ra.useReactToPrint({content:()=>B.current}),m=()=>{Aa.custom("","GET").then(j=>{A(f=>j.data.entry),j.data.entry.length>0&&i(f=>({label:j.data.entry[0].name,value:j.data.entry[0].uuid}))})},R=()=>{$a.custom("/type/"+c.value,"GET").then(j=>{$(f=>j.data),j.data.length>0&&t(f=>({label:j.data[0].name,value:j.data[0].uuid}))})},s=async j=>{j.preventDefault(),await Q(j.target)&&ta.custom("","POST",null,{data:{pesanan_penjualan_jasa:e.uuid,tanggal:p,nomor_faktur_penjualan_jasa:k,bukti_transaksi:S,tipe_pembayaran:c.value,syarat_pembayaran:o.value,keterangan:O,nomor_faktur_pajak_penjualan_jasa:d||"EMPTY"}}).then(f=>{J()}).catch(f=>T(f))},L=()=>{ta.custom(`/${r}`,"DELETE").then(()=>{_(j=>null)}).catch(j=>T(j))};n.useEffect(()=>{c!=null&&c.value&&!r&&R()},[c]);const J=()=>{ta.custom(`/pesanan_penjualan_jasa/${e.uuid}`,"GET").then(j=>{j.data?(b(f=>j.data),D(f=>j.data.nomor_faktur_penjualan_jasa),w(f=>j.data.bukti_transaksi),E(f=>j.data.tanggal),i(f=>j.data.tipe_pembayaran_name),t(f=>j.data.syarat_pembayaran_name),U(f=>j.data.keterangan),_(f=>j.data.uuid),K(f=>j.data.nomor_faktur_pajak_penjualan_jasa!="EMPTY"?j.data.nomor_faktur_pajak_penjualan_jasa:"")):m()}).catch(j=>{_(f=>null)})};return n.useEffect(()=>{r!=null&&J()},[r]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-md py-6 px-6 shadow-2xl",children:[a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Faktur Penjualan Jasa"}),a.jsxs("form",{onSubmit:j=>s(j),children:[a.jsxs("div",{className:"flex gap-x-2",children:[a.jsx(G,{label:"Tanggal Faktur Penjualan Jasa",type:"datetime-local",onchange:j=>{E(j.target.value)},disabled:r,addClassInput:r?"border-none px-1":"",others:{value:p,name:"tanggalFakturPenjualanJasa",disabled:r}}),a.jsx(G,{label:"Nomor Faktur Penjualan Jasa",type:"text",onchange:j=>{D(j.target.value)},disabled:r,addClassInput:r?"border-none px-1":"",others:{value:k,name:"nomorFakturPenjualanJasa",disabled:r}}),a.jsx(G,{label:"Bukti Transaksi",type:"text",disabled:r,addClassInput:r?"border-none px-1":"",onchange:j=>{w(j.target.value)},others:{value:S,name:"buktiTransaksi",disabled:r}}),r?a.jsxs(a.Fragment,{children:[a.jsx(G,{label:"Tipe Pembayaran",type:"text",disabled:r,addClassInput:r?"border-none px-1":"",others:{value:c,name:"tipePembayaran",disabled:r}}),a.jsx(G,{label:"Syarat Pembayaran",type:"text",disabled:r,addClassInput:r?"border-none px-1":"",others:{value:o,name:"syaratPembayaran",disabled:r}})]}):a.jsxs(a.Fragment,{children:[a.jsx(q,{label:"Tipe Pembayaran",optionsDataList:N,optionsLabel:"name",optionsValue:"uuid",selectValue:c,onchange:j=>{i(j)},selectName:"tipePembayaran"}),a.jsx(q,{label:"Syarat Pembayaran",optionsDataList:h,optionsLabel:"name",optionsValue:"uuid",selectValue:o,onchange:j=>{t(j)},selectName:"syaratPembayaran"})]})]}),a.jsx("div",{className:"flex gap-x-2",children:a.jsx(G,{label:"Keterangan",type:"text",disabled:r,addClassInput:r?"border-none px-1":"",onchange:j=>{U(j.target.value)},others:{value:O,name:"keteranganFakturPenjualanJasa",disabled:r}})}),P?a.jsx(a.Fragment,{children:a.jsx("div",{className:"flex gap-x-2",children:a.jsx(G,{label:"Nomor Faktur Pajak",type:"text",disabled:r,addClassInput:r?"border-none px-1":"",onchange:j=>{K(j.target.value)},others:{value:d,name:"nomorFakturPajakFakturPenjualanJasa",disabled:r}})})}):a.jsx(a.Fragment,{}),r?a.jsxs(a.Fragment,{children:[y?a.jsx(a.Fragment,{children:a.jsxs("button",{className:"btn btn-sm bg-red-800 mt-4 text-white",type:"button",onClick:()=>L(),children:[a.jsx(V,{})," Batalkan Faktur"]})}):a.jsx(a.Fragment,{}),a.jsx("div",{className:"hidden",children:a.jsx(Wa,{customer:g,ref:B,rincianPesananPenjualanJasa:l,pesananPenjualanJasa:e,nomorFakturPenjualanJasa:k,tanggalFakturPenjualanJasa:p,keteranganFakturPenjualanJasa:O,tipePembayaran:c,syaratPembayaran:o})}),a.jsxs("button",{className:"btn btn-sm bg-red-800 mt-4 text-white",type:"button",onClick:z,children:[a.jsx(Fa,{})," Cetak Faktur"]})]}):a.jsx(a.Fragment,{children:a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(la,{})," Simpan"]})})]})]}),r?a.jsx(a.Fragment,{children:a.jsx(Va,{fakturPenjualanJasa:F,setFakturCancel:C,setTanggalTransaksiAkhir:H})}):a.jsx(a.Fragment,{})]})},qa=({setAddPenjualanJasa:e=()=>{}})=>{Ea();const[l,g]=n.useState(W()),[_,r]=n.useState(!1),[P,H]=n.useState(!1),[F,b]=n.useState(!1),[y,C]=n.useState(!1),[N,A]=n.useState([]),[h,$]=n.useState(!0),[p,E]=n.useState([]),[k,D]=n.useState([]),[S,w]=n.useState(""),[c,i]=n.useState(W()),[o,t]=n.useState(),[O,U]=n.useState(!1),[d,K]=n.useState(""),[B,z]=n.useState({page:1,size:2,count:118,lastPage:12}),m=({selected:x})=>{let v=B;v.page=x+1,z(v),J()},R=x=>{let v=B;v.size=x,v.page=1,z(v),J()},[s,L]=n.useState(),J=(x="")=>{x==""&&K(x),wa.custom(`?search=${x}&page=${B.page}&size=${B.size}`,"GET").then(v=>{var I,na;U(x.length<1),D((I=v==null?void 0:v.data)==null?void 0:I.entry),z((na=v==null?void 0:v.data)==null?void 0:na.pagination)}).catch(v=>{T(v)})},j=()=>{ra.custom(`/${s.uuid}`,"DELETE").then(x=>{L(null),_a()}).catch(x=>T(x))},f=async x=>{x.preventDefault(),await Q(x.target)&&ra.custom(h?`/${h.value}`:"",h?"PUT":"POST",null,{data:{nomor_pesanan_penjualan_jasa:S,tanggal_pesanan_penjualan_jasa:c,customer:o.uuid}}).then(v=>{if(h){const I=N.filter(na=>na.uuid==h.value);L(I[0])}else L(v.data);C(I=>!0)}).catch(v=>{T(v),h&&(ga(),C(I=>!0),L(N.filter(I=>I.uuid==h.value)[0]))})},ga=()=>{t(v=>null),i(v=>W()),w(v=>null);const x=N.filter(v=>v.uuid==h.value);if(x.length>0){const v=k.filter(I=>I.uuid==x[0].customer);v.length>0&&(t(I=>v[0]),i(x[0].tanggal_pesanan_penjualan_jasa),w(x[0].nomor_pesanan_penjualan_jasa))}};n.useEffect(()=>{h&&ga()},[h]);const _a=()=>{ra.custom("","GET").then(x=>{A(v=>x.data.entry),x.data.entry.length>0&&$(v=>({label:x.data.entry[0].nomor_pesanan_penjualan_jasa,value:x.data.entry[0].uuid}))}).catch(x=>T(x))};return n.useEffect(()=>{F?_a():(w(x=>""),$(x=>!1),i(x=>W()),t(x=>null))},[F]),n.useEffect(()=>{J()},[]),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-md shadow-sm h-max",children:a.jsxs("div",{className:"py-5 px-6 h-max w-full z-10",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-2",children:"Pesanan Penjualan Jasa"})}),a.jsxs("form",{onSubmit:x=>f(x),children:[a.jsxs("div",{className:"flex items-end gap-x-2",children:[a.jsxs("div",{className:"flex items-end gap-x-2 w-full",children:[F&&!s?a.jsx(a.Fragment,{children:a.jsx(q,{label:"Nomor Pesanan Penjualan Jasa",optionsDataList:N,optionsLabel:"nomor_pesanan_penjualan_jasa",optionsValue:"uuid",selectValue:h,onchange:x=>{$(x)},selectName:"pesananPenjualanJasaSelected"})}):a.jsx(a.Fragment,{children:a.jsx(G,{label:"Nomor Pesanan Penjualan Jasa",type:"text",disabled:s&&y,addClassInput:s&&y?"border-none px-1":"",onchange:x=>{w(x.target.value)},others:{value:S,name:"nomorPesananPenjualanJasa",disabled:s&&y}})}),s?a.jsx(a.Fragment,{children:p.length!=0||_?a.jsx(a.Fragment,{}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",className:`btn btn-sm ${y?"bg-yellow-400 hover:bg-yellow-400":""}`,onClick:()=>{C(x=>x=!x)},children:[y?a.jsx(Da,{}):a.jsx(V,{})," ",y?"Edit":"Batal Edit"," Nomor Pesanan"]}),a.jsxs("button",{type:"button",onClick:()=>j(),className:"btn btn-sm bg-red-700 text-white",children:[a.jsx(sa,{})," Hapus Nomor Pesanan"]})]})}):a.jsx(a.Fragment,{children:a.jsxs("button",{type:"button",className:`btn btn-sm ${F?"bg-red-900":"bg-blue-900"} text-white border-none`,onClick:()=>{b(x=>x=!x)},children:[F?a.jsx(V,{}):a.jsx(va,{}),F?"Batal Pesanan Penjualan":"Pilih Pesanan Penjualan"]})})]}),a.jsx(G,{label:"Tanggal Pesanan Penjualan Jasa",type:"datetime-local",onchange:x=>{i(x.target.value)},disabled:s,addClassInput:s?"border-none px-1":"",others:{value:c,name:"tanggalPesananPenjualanJasa",disabled:s}})]}),o?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"mt-5 relative px-1",children:[a.jsx("p",{className:"font-bold text-sm mb-3",children:"Customer Terpilih"}),a.jsxs("p",{className:"text-xl font-bold",children:[o.code," - ",o.name]}),a.jsxs("div",{className:"mt-3 flex gap-x-10",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold mb-1",children:"Alamat Rumah"}),a.jsx("p",{className:"text-sm",children:o.alamat_rumah})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold mb-1",children:"Alamat Kantor"}),a.jsx("p",{className:"text-sm",children:o.alamat_kantor})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold mb-1",children:"NPWP"}),a.jsx("p",{className:"text-sm",children:o.npwp})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold mb-1",children:"Nomor Telepon"}),a.jsx("p",{className:"text-sm",children:o.no_telp})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold mb-1",children:"Nomor Handphone"}),a.jsx("p",{className:"text-sm",children:o.no_hp})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold mb-1",children:"Kode Harga"}),a.jsxs("p",{className:"text-sm",children:["Harga ",o.kode_harga]})]})]}),s?a.jsx(a.Fragment,{}):a.jsx(a.Fragment,{children:a.jsx("button",{className:"absolute top-0 right-3 flex mt-3 py-1 px-2 gap-x-2 items-center font-bold text-xs rounded-md bg-red-800 text-white",onClick:()=>{t(null)},type:"button",children:a.jsx(V,{})})})]})}):a.jsx(a.Fragment,{}),o?a.jsx(a.Fragment,{children:s&&y?a.jsx(a.Fragment,{children:a.jsxs("button",{type:"button",onClick:()=>{L(x=>null),t(x=>null),b(x=>!1),r(x=>!1)},className:"btn btn-sm bg-red-800 mt-4 text-white",children:[a.jsx(V,{})," Reset Pesanan Penjualan"]})}):a.jsx(a.Fragment,{children:a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",children:[a.jsx(la,{})," Simpan"]})})}):a.jsx(a.Fragment,{})]}),o?a.jsx(a.Fragment,{}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"mt-5",children:[a.jsxs("div",{className:"flex w-full items-center gap-x-2 mb-5",children:[a.jsx(Y,{value:d,onchange:x=>K(x.target.value),other:{placeholder:"Cari Customer"}}),O?a.jsx(va,{onClick:()=>{J(d)},className:"cursor-pointer"}):a.jsx(V,{onClick:()=>J(""),className:"cursor-pointer"})]}),a.jsxs("table",{className:"table table-zebra",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[a.jsx("th",{width:12,children:"No"}),a.jsx("th",{children:"Kode Customer"}),a.jsx("th",{children:"Nama Customer"}),a.jsx("th",{children:"Kode Harga"}),a.jsx("th",{children:"Aksi"})]})}),a.jsx("tbody",{children:k==null?void 0:k.map((x,v)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsxs("td",{children:[v+1,"."]}),a.jsx("td",{width:400,children:x.code}),a.jsx("td",{width:400,children:x.name}),a.jsxs("td",{width:400,children:["Harga ",x.kode_harga]}),a.jsx("td",{children:a.jsxs("button",{className:"flex py-1 px-5 gap-x-2 items-center rounded-xl bg-green-800 text-white",onClick:()=>{t(I=>x)},type:"button",children:[a.jsx(ea,{size:12.5}),a.jsx("p",{children:"Pilih"})]})})]},v)}))})]}),a.jsx(Ha,{paginateUpdatePage:m,paginate:B,setSize:R,shadow:"",sizeList:[2,4,6]})]})})]})}),s&&y?a.jsxs(a.Fragment,{children:[a.jsx(Ga,{pesananPenjualanJasa:s,customer:o,tanggalPesananPenjualanJasa:c,nomorPesananPenjualanJasa:S,fakturStatus:_,setPPNStatus:H,tanggalTransaksiAkhir:l,rincianPesananPenjualanJasa:p,setRincianPesananPenjualanJasa:E}),a.jsx(Za,{pesananPenjualanJasa:s,rincianPesananPenjualanJasa:p,setFakturStatus:r,customer:o,fakturStatus:_,ppnStatus:P,setTanggalTransaksiAkhir:g})]}):a.jsx(a.Fragment,{})]})},xe=()=>{const[e,l]=n.useState(!1),[g,_]=n.useState(!1);return n.useState(""),n.useState(!0),a.jsx(Oa,{isLoading:e,children:a.jsxs("div",{children:[a.jsx(La,{title:"Penjualan Jasa"}),a.jsx(qa,{setAddPenjualanJasa:_})]})})};export{xe as default};
