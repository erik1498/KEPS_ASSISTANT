import{j as a,R as p,u as k,r,p as f,i as T,x as v}from"./index-BFtBgOrg.js";import{W as R}from"./Wrap-Dk-wg8kL.js";import{P as B}from"./PageTitle-Hc-YSVDI.js";import{B as w}from"./BulanSelectedListCard-CzSL4UYq.js";import{p as s,a as d}from"./number.helper-efe0YCx6.js";import{R as e}from"./RowCard-BJd8l1b7.js";import{P as N,l as y}from"./PDFHeader-BGA35-Z9.js";import"./index-BKNjMPK8.js";const g=({labaRugi:t,forPrint:i})=>a.jsx(a.Fragment,{children:Object.keys(t).length>0&&t.laba_rugi.loss!=0?a.jsx(a.Fragment,{children:a.jsx("div",{children:a.jsx("div",{className:`stats stats-vertical rounded-md ${i?"":"shadow-2xl"} text-white w-full ${t.laba_rugi.gain!=null?"bg-green-900":"bg-red-900"}`,children:a.jsxs("div",{className:"stat",children:[a.jsx("div",{className:"stat-title text-white text-[20px] font-bold",children:t.laba_rugi.gain!=null?"Gain":"Loss"}),a.jsx("div",{className:"stat-value text-sm",children:t.laba_rugi.gain!=null?`Rp. ${s(t.laba_rugi.gain)}`:`Rp. ${s(t.laba_rugi.loss.toString().replace("-",""))}`})]})})})}):a.jsx(a.Fragment,{})}),x=t=>{try{return t.toString().indexOf("(")>=0?"Rugi Kotor":"Laba Kotor"}catch{return"Laba Kotor"}},C=p.forwardRef((t,i)=>a.jsxs("div",{ref:i,children:[a.jsx(N,{bulan:t.bulan,tahun:t.tahun,title:"Laba Rugi"}),a.jsx(g,{labaRugi:t.labaRugi,forPrint:!0}),Object.keys(t.data).length>0?a.jsxs(a.Fragment,{children:[a.jsx(e,{dataList:t.data.pendapatan,title:"Pendapatan",totalTitle:"Total Pendapatan",forPrint:!0}),a.jsx(e,{dataList:t.data.harga_pokok_penjualan,title:"Harga Pokok Penjualan",totalTitle:"Total Harga Pokok Penjualan",addingContent:[{title:x(t.data.laba_rugi.laba_kotor),value:s(d(t.data.laba_rugi.laba_kotor))}],forPrint:!0}),a.jsx(e,{dataList:t.data.beban_operasional,title:"Beban Operasional",totalTitle:"Total Beban Operasional",forPrint:!0}),a.jsx(e,{dataList:t.data.beban_lainnya,title:"Beban Lainnya",totalTitle:"Total Beban Lainnya",forPrint:!0}),a.jsx(e,{dataList:t.data.pendapatanLainLain,title:"Pendapatan Lain - Lain",totalTitle:"Total Pendapatan Lain - Lain",forPrint:!0})]}):a.jsx(a.Fragment,{})]})),A=()=>{const t=k(),{data:i,setData:j}=t,[h,u]=r.useState(!1),[o,L]=r.useState(new Date().getMonth()),[n,m]=r.useState([]),b=r.useRef(),_=y.useReactToPrint({content:()=>b.current}),P=()=>{u(!0),v.custom(`/${o+1}/${i.tahun}`,"GET").then(l=>{let c=i;c.dashboard.overview[o].labaRugi=l==null?void 0:l.data,j(c),m(l==null?void 0:l.data),u(!1)}).catch(l=>{showError(l)})};return r.useEffect(()=>{P()},[o]),a.jsx(R,{isLoading:h,children:a.jsxs("div",{children:[a.jsx(B,{title:"Laba Rugi"}),a.jsxs("div",{className:"grid grid-cols-6",children:[a.jsxs("div",{className:"col-span-1",children:[a.jsx(w,{bulan:o,setBulan:L}),a.jsx(g,{labaRugi:n}),a.jsx("div",{className:"hidden",children:a.jsx(C,{data:n,ref:b,bulan:f(o),tahun:i.tahun,labaRugi:n})}),a.jsxs("button",{onClick:_,className:"btn btn-sm bg-red-600 hover:bg-red-600 mt-2 text-white border-red-600",children:[a.jsx(T,{})," Cetak Laba Rugi"]})]}),a.jsx("div",{className:"col-span-5",children:a.jsx("div",{className:"h-[65vh] pl-2",children:a.jsx("div",{className:"flex flex-col h-full overflow-y-scroll no-scrollbar w-full rounded-md",children:Object.keys(n).length>0?a.jsxs(a.Fragment,{children:[a.jsx(e,{dataList:n.pendapatan,title:"Pendapatan",totalTitle:"Total Pendapatan"}),a.jsx(e,{dataList:n.beban_pokok_penjualan,title:"Beban Pokok Penjualan",totalTitle:"Total Beban Pokok Penjualan",addingContent:[{title:"Laba Kotor Jasa",value:s(d(n.laba_rugi.laba_kotor_jasa))}]}),a.jsx(e,{dataList:n.harga_pokok_penjualan,title:"Harga Pokok Penjualan",totalTitle:"Total Harga Pokok Penjualan",addingContent:[{title:"Laba Kotor Barang",value:s(d(n.laba_rugi.laba_kotor_barang))},{title:x(n.laba_rugi.laba_kotor),value:s(d(n.laba_rugi.laba_kotor))}]}),a.jsx(e,{dataList:n.beban_operasional_dan_administrasi,title:"Beban Operasional Dan Administrasi",totalTitle:"Total Beban Operasional Dan Administrasi"}),a.jsx(e,{dataList:n.pendapatan_lain_lain,title:"Pendapatan Lain - Lain",totalTitle:"Total Pendapatan Lain - Lain"}),a.jsx(e,{dataList:n.beban_lain_lain,title:"Beban Lain - Lain",totalTitle:"Total Beban Lain - Lain"}),a.jsx(e,{dataList:n.beban_bunga_dan_pajak,title:"Beban Bunga Dan Pajak",totalTitle:"Total Beban Bunga Dan Pajak"})]}):a.jsx(a.Fragment,{})})})})]})]})})};export{A as default};
