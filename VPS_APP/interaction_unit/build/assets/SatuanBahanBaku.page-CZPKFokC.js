import{r as l,j as a,b as w,h as $,k as L,aH as b,n as p,s as g,R as _,u as A,o as H,e as I,p as U,i as W,a as D,F as q,q as G}from"./index-BFtBgOrg.js";import{P as M}from"./PageTitle-Hc-YSVDI.js";import{W as O}from"./Wrap-Dk-wg8kL.js";import{P as V}from"./Pagination-CNke5GoU.js";import{F as Y}from"./FormInputWithLabel-zEsdZ3IQ.js";import{P as J,l as K}from"./PDFHeader-BGA35-Z9.js";import"./react-paginate-C1eAq6Tf.js";import"./index-BKNjMPK8.js";const Q=({setAddSatuanBahanBakuEvent:i=()=>{},satuanBahanBakuEdit:s,getData:n=()=>{}})=>{const[h,o]=l.useState(s!=null&&s.name?s.name:""),u=async()=>{await L()&&b.custom(`${s!=null&&s.uuid?`/${s.uuid}`:""}`,s?"PUT":"POST",null,{data:{name:h}}).then(()=>{s?p("Berhasil","Data berhasil diupdate"):p("Berhasil","Data berhasil disimpan"),i(),n()}).catch(r=>{g(r)})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[a.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[a.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[s?"Edit":"Tambahkan"," Satuan Bahan Baku"]}),a.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>i(),children:[a.jsx(w,{})," Batalkan Satuan Bahan Baku"]})]}),a.jsx("div",{className:"flex gap-x-2",children:a.jsx(Y,{label:"Nama Satuan Bahan Baku",type:"text",onchange:r=>{o(r.target.value)},others:{value:h,name:"namaSatuanBahanBaku"}})}),a.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{u()},children:[a.jsx($,{})," Simpan"]})]})})},X=_.forwardRef((i,s)=>{var n;return a.jsxs("div",{ref:s,children:[a.jsx(J,{bulan:i.bulan,tahun:i.tahun,title:"Satuan Bahan Baku"}),a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[a.jsx("th",{width:12,children:"No"}),a.jsx("th",{children:"Nama Satuan Bahan Baku"})]})}),a.jsx("tbody",{children:(n=i==null?void 0:i.data)==null?void 0:n.map((h,o)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsx("td",{children:o+1}),a.jsx("td",{children:h.name})]},o)}))})]})]})}),la=()=>{const i=A(),{data:s}=i,[n,h]=l.useState([]),[o,u]=l.useState(!1),[r,m]=l.useState(!1),[y,S]=l.useState({name:""}),[v,C]=l.useState(!1),[f,k]=l.useState(""),B=l.useRef(),F=K.useReactToPrint({content:()=>B.current}),[d,j]=l.useState({page:1,size:10,count:118,lastPage:12}),c=(t="")=>{t==""&&k(t),u(!0),b.custom(`?search=${t}&page=${d.page}&size=${d.size}`,"GET").then(e=>{var x,N;C(t.length<1),h((x=e==null?void 0:e.data)==null?void 0:x.entry),j((N=e==null?void 0:e.data)==null?void 0:N.pagination),u(!1)}).catch(e=>{g(e)})},P=t=>{let e=n[t];S(e),m(!r)},T=async t=>{if(await G("Hapus","Yakin ingin hapus data ini ?")){let e=n[t];b.custom(`/${e.uuid}`,"DELETE").then(()=>{p("Berhasil","Data berhasil dihapus"),c()}).catch(x=>{g(x)})}},R=({selected:t})=>{let e=d;e.page=t+1,j(e),c()},z=t=>{let e=d;e.size=t,e.page=1,j(e),c()};return l.useEffect(()=>{c()},[]),a.jsx(O,{isLoading:o,children:a.jsxs("div",{children:[a.jsx(M,{title:"Satuan Bahan Baku"}),r?a.jsx(Q,{setAddSatuanBahanBakuEvent:()=>m(!1),getData:c,satuanBahanBakuEdit:y}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[a.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[a.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:f,onChange:t=>k(t.target.value)}),v?a.jsx(H,{onClick:()=>{c(f)},className:"cursor-pointer"}):a.jsx(w,{onClick:()=>c(""),className:"cursor-pointer"})]}),a.jsxs("div",{className:"flex gap-x-2 items-center",children:[a.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{S(null),m(!r)},children:[a.jsx(I,{})," Tambah Satuan Bahan Baku"]}),a.jsx("div",{className:"hidden",children:a.jsx(X,{data:n,ref:B,bulan:U(new Date().getMonth()),tahun:s.tahun})}),a.jsxs("button",{onClick:F,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[a.jsx(W,{})," Cetak Satuan Bahan Baku"]})]})]}),a.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[a.jsx("th",{width:12,children:"No"}),a.jsx("th",{children:"Nama Satuan Bahan Baku"}),a.jsx("th",{children:"Aksi"})]})}),a.jsx("tbody",{children:n==null?void 0:n.map((t,e)=>a.jsx(a.Fragment,{children:a.jsxs("tr",{children:[a.jsxs("td",{children:[e+1,"."]}),a.jsx("td",{children:t.name}),a.jsxs("td",{className:"flex gap-x-2",children:[a.jsx(D,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{P(e)}}),a.jsx(q,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{T(e)}})]})]},e)}))})]})}),a.jsx(V,{paginateUpdatePage:R,paginate:d,setSize:z})]})]})})};export{la as default};
