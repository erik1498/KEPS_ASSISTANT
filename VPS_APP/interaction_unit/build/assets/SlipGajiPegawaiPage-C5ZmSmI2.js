import{j as e,p as a,R as G,z as R,bk as P,w as J,r as d,n as L,bb as $,t as y,be as v,W as H,x as K,Q as C,d as E,M as F,a3 as I}from"./index-Da9CN-uw.js";import{T as S}from"./ToggleBox-mUTY2Y7T.js";import{P as U,l as z}from"./PDFHeader-C185_4R7.js";import"./index-BKNjMPK8.js";const k=({_getDataBySumber:s=()=>{},total:l,forPrint:n})=>e.jsx("div",{className:"bg-white rounded-md col-span-6",children:e.jsxs("div",{className:`mt-7 flex flex-col justify-between pb-6 h-full ${n?"":"px-6"}`,children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Rincian Pendapatan Pegawai"}),e.jsxs("div",{className:`${n?"":"px-3"}`,children:[e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"Gaji"}),e.jsx("p",{children:a(s("gaji","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"Bonus"}),e.jsx("p",{children:a(s("bonus","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"Insentif"}),e.jsx("p",{children:a(s("insentif","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"THR"}),e.jsx("p",{children:a(s("thr","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"BPJS Kesehatan ( Perusahaan )"}),e.jsx("p",{children:a(s("bpjs_kesehatan","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"JKK ( Perusahaan )"}),e.jsx("p",{children:a(s("jkk","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"JKM ( Perusahaan )"}),e.jsx("p",{children:a(s("jkm","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"JHT ( Perusahaan )"}),e.jsx("p",{children:a(s("jht","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"JP ( Perusahaan )"}),e.jsx("p",{children:a(s("jp","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"Lembur"}),e.jsx("p",{children:a(s("lembur","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"Hadiah"}),e.jsx("p",{children:a(s("hadiah","pendapatan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"Tunjangan Uang"}),e.jsx("p",{children:a(s("tunjangan_uang","pendapatan"))})]})]})]}),e.jsxs("div",{className:`flex text-xl font-bold justify-between items-end gap-x-4 ${n?"":"px-3"} pb-6`,children:[e.jsx("p",{children:"Total Pendapatan"}),e.jsx("p",{children:a(l.pendapatan)})]})]})}),T=({_getDataBySumber:s=()=>{},total:l,forPrint:n})=>e.jsx("div",{className:"bg-white rounded-md col-span-6",children:e.jsxs("div",{className:`mt-7 flex flex-col justify-between pb-6 h-full ${n?"":"px-6"}`,children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-extrabold w-max text-white px-2 rounded-md bg-blue-900 mb-4",children:"Rincian Potongan Pegawai"}),e.jsxs("div",{className:`${n?"":"px-3"}`,children:[e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"BPJS Kesehatan ( Pegawai )"}),e.jsx("p",{children:a(s("bpjs_karyawan","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"JP Pegawai"}),e.jsx("p",{children:a(s("jp_karyawan","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"JHT Pegawai"}),e.jsx("p",{children:a(s("jht_karyawan","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"Piutang Pegawai"}),e.jsx("p",{children:a(s("piutang_karyawan","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"PPH 21/26"}),e.jsx("p",{children:a(s("pph2126","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"Kerugian"}),e.jsx("p",{children:a(s("kerugian_karyawan","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"Lain - Lain"}),e.jsx("p",{children:a(s("lain_lain","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"BPJS Kesehatan ( Perusahaan )"}),e.jsx("p",{children:a(s("bpjs_kesehatan","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"JKK ( Perusahaan )"}),e.jsx("p",{children:a(s("jkk","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"JKM ( Perusahaan )"}),e.jsx("p",{children:a(s("jkm","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"JHT ( Perusahaan )"}),e.jsx("p",{children:a(s("jht","potongan"))})]}),e.jsxs("div",{className:"flex justify-between border-b-2 py-1",children:[e.jsx("p",{children:"JP ( Perusahaan )"}),e.jsx("p",{children:a(s("jp","potongan"))})]})]})]}),e.jsxs("div",{className:`flex text-xl font-bold justify-between items-end gap-x-4 ${n?"":"px-3"} pb-6`,children:[e.jsx("p",{children:"Total Potongan"}),e.jsx("p",{children:a(l.potongan)})]})]})}),A=G.forwardRef((s,l)=>e.jsxs("div",{ref:l,children:[e.jsx(U,{bulan:s.bulan,tahun:s.tahun,title:"Slip Gaji Pegawai"}),e.jsxs("div",{className:"mt-16 py-6 border-y-2 border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("p",{className:"col-span-3",children:"Nama"}),e.jsxs("p",{className:"col-span-9",children:[":   ",s.pegawai.name]})]}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("p",{className:"col-span-3",children:"NIK"}),e.jsxs("p",{className:"col-span-9",children:[":   ",s.pegawai.nik]})]}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("p",{className:"col-span-3",children:"Divisi"}),e.jsxs("p",{className:"col-span-9",children:[":   ",s.pegawai.divisi_name]})]}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("p",{className:"col-span-3",children:"Jabatan"}),e.jsxs("p",{className:"col-span-9",children:[":   ",s.pegawai.jabatan_name]})]}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("p",{className:"col-span-3",children:"Alamat"}),e.jsxs("p",{className:"col-span-9",children:[":   ",s.pegawai.alamat]})]}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("p",{className:"col-span-3",children:"Handphone"}),e.jsxs("p",{className:"col-span-9",children:[":   ",s.pegawai.no_hp]})]}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("p",{className:"col-span-3",children:"Periode"}),e.jsxs("p",{className:"col-span-9",children:[":   ",R(s.periode-1)]})]}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("p",{className:"col-span-3",children:"Status Tanggungan"}),e.jsxs("p",{className:"col-span-9",children:[":   ",s.pegawai.status_tanggungan_name]})]}),e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("p",{className:"col-span-3",children:"Status Kerja"}),e.jsxs("p",{className:"col-span-9",children:[":   ",s.pegawai.status_kerja]})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-x-4",children:[e.jsx(k,{slipGaji:s.data,_getDataBySumber:s._getDataBySumber,total:s.total,forPrint:!0}),e.jsx(T,{slipGaji:s.data,_getDataBySumber:s._getDataBySumber,total:s.total,forPrint:!0})]}),e.jsxs("div",{className:"flex justify-between text-2xl font-bold border-y-2 border-gray-200 pt-4 py-2",children:[e.jsx("p",{children:"Jumlah Diterima"}),e.jsxs("p",{children:["Rp. ",a(s.takeHomePay)]})]}),e.jsxs("p",{className:"text-right mt-5",children:[e.jsx("b",{children:"TERBILANG"})," : ",P(s.takeHomePay).toUpperCase()]})]})),M=({idPegawai:s,periode:l,pegawaiList:n=[]})=>{var N;const{data:j}=J();let t={pendapatan:0,potongan:0},p=[];const[c,h]=d.useState(0),[x,b]=d.useState(),m=()=>{$.custom(`/slip_gaji/${s}?bulan=${l}&tahun=${j.tahun}`).then(r=>{b(r.data)}).catch(r=>y(r))},i=d.useRef(),w=z.useReactToPrint({content:()=>i.current}),g=(r,u)=>{try{const o=x.filter(f=>f.sumber==r).at(0);return o.nilai?(p.includes(`${r}_${u}`)||(p.push(`${r}_${u}`),t[u]+=o.nilai),h(f=>f=t.pendapatan-t.potongan),o.nilai):0}catch{return 0}};return d.useEffect(()=>{m()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"my-6 grid grid-cols-12 gap-x-4",children:[e.jsx(k,{slipGaji:x,_getDataBySumber:g,total:t}),e.jsx(T,{slipGaji:x,_getDataBySumber:g,total:t})]}),e.jsxs("div",{className:"p-6 bg-green-800 text-white rounded-md",children:[e.jsx("p",{className:"font-bold",children:"Jumlah Diterima"}),e.jsxs("h1",{className:"text-4xl font-bold",children:["Rp. ",a(c)]}),e.jsxs("p",{className:"mt-3",children:[e.jsx("b",{children:"TERBILANG"})," : ",P(c).toUpperCase()]})]}),e.jsx("div",{className:"hidden",children:e.jsx(A,{data:x,_getDataBySumber:g,total:t,periode:l,tahun:j.tahun,takeHomePay:c,pegawai:(N=n.filter(r=>r.uuid==s))==null?void 0:N.at(0),ref:i})}),e.jsxs("button",{onClick:w,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600 mt-4",children:[e.jsx(L,{})," Cetak Slip Gaji"]})]})},q=()=>{const[s,l]=d.useState(!1),[n,j]=d.useState(),[t,p]=d.useState([]),[c,h]=d.useState(),[x,b]=d.useState(v()[new Date().getMonth()].value),m=()=>{l(i=>!0),I.custom("","GET").then(i=>{l(w=>!1),p(i.data.entry),i.data.entry.length>0&&j({label:i.data.entry[0].name,value:i.data.entry[0].uuid})}).catch(i=>y(i))};return d.useEffect(()=>{m()},[]),e.jsx(H,{isLoading:s,children:e.jsxs("div",{children:[e.jsx(K,{title:"Slip Gaji Pegawai"}),e.jsx("div",{className:"bg-white rounded-md shadow-2xl h-max overflow-scroll no-scrollbar relative",children:e.jsxs("div",{className:"sticky top-0 py-5 px-6 h-max bg-white w-full z-10",children:[e.jsx("div",{className:"flex items-end gap-x-2",children:e.jsx(C,{label:"Pilih Pegawai",optionsDataList:t,optionsLabel:"name",optionsValue:"uuid",disabled:c,selectValue:n,onchange:i=>{j(i)},selectName:"pegawai"})}),e.jsx("div",{className:"mt-5 flex gap-x-2",children:e.jsx(S,{disabled:c,label:"Periode",labelTextSize:"text-sm",toggleBox:x,textSize:"text-xs",setToggleBox:b,toggleBoxList:v()})}),c?e.jsxs("button",{className:"btn btn-sm bg-red-800 text-white",onClick:()=>h(null),children:[e.jsx(E,{})," Reset Pegawai Dan Periode"]}):e.jsxs("button",{className:"btn btn-sm bg-green-800 text-white",onClick:()=>h(n.value),children:[e.jsx(F,{})," Pilih Pegawai Dan Periode"]})]})}),c?e.jsx(M,{idPegawai:c,periode:x,pegawaiList:t}):e.jsx(e.Fragment,{})]})})};export{q as default};
