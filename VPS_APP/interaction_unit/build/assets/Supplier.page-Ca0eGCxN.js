import{r as s,j as e,d as L,Q as z,m as K,o as W,ao as T,v as B,t as y,ap as $,R as A,w as H,W as D,x as J,y as U,l as I,z as V,n as G,b as M,F as O,D as Q}from"./index-mkcrex3p.js";import{P as Y}from"./Pagination-DDYZBZnE.js";import{F as h}from"./FormInputWithLabel-DoXAVSaq.js";import{P as q,l as X}from"./PDFHeader-BGRASuEm.js";import"./react-paginate-C-_d3zjA.js";import"./index-BKNjMPK8.js";const Z=({setAddSupplierEvent:o=()=>{},supplierEdit:a,getData:l=()=>{}})=>{const[i,m]=s.useState([]),[d,g]=s.useState(a!=null&&a.name?a.name:""),[x,P]=s.useState(a!=null&&a.code?a.code:""),[j,k]=s.useState(a!=null&&a.npwp?a.npwp:""),[p,b]=s.useState(a!=null&&a.alamat_rumah?a.alamat_rumah:""),[S,N]=s.useState(a!=null&&a.alamat_kantor?a.alamat_kantor:""),[f,c]=s.useState(a!=null&&a.no_telp?a.no_telp:""),[u,r]=s.useState(a!=null&&a.no_hp?a.no_hp:""),[v,_]=s.useState(a!=null&&a.jenis_barang?{label:`Harga ${a.jenis_barang}`,value:a.jenis_barang}:""),C=async()=>{await W()&&T.custom(`${a!=null&&a.uuid?`/${a.uuid}`:""}`,a?"PUT":"POST",null,{data:{name:d,code:x,npwp:j,alamat_rumah:p,alamat_kantor:S,no_telp:f,no_hp:u,jenis_barang:`${v.value}`}}).then(()=>{a?B("Berhasil","Data berhasil diupdate"):B("Berhasil","Data berhasil disimpan"),o(),l()}).catch(t=>{y(t)})},F=()=>{$.custom("","GET").then(t=>{m(t.data.entry)}).catch(t=>{y(t)})};return s.useEffect(()=>{F()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-white px-6 py-3 rounded-md shadow-2xl",children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[e.jsxs("h1",{className:"uppercase text-gray-600 font-bold",children:[a?"Edit":"Tambahkan"," Supplier"]}),e.jsxs("button",{className:"btn btn-sm bg-red-900 text-white border-none",onClick:()=>o(),children:[e.jsx(L,{})," Batalkan Supplier"]})]}),e.jsx("div",{className:"flex gap-x-2",children:e.jsx(h,{label:"Nama Supplier",type:"text",onchange:t=>{g(t.target.value)},others:{value:d,name:"namaSupplier"}})}),e.jsxs("div",{className:"mt-5 flex gap-x-2",children:[e.jsx(h,{label:"Kode Supplier",type:"text",onchange:t=>{P(t.target.value)},others:{value:x,name:"kodeSupplier"}}),e.jsx(h,{label:"NPWP Supplier",type:"text",onchange:t=>{k(t.target.value)},others:{value:j,name:"NPWPSupplier"}})]}),e.jsxs("div",{className:"mt-5 flex gap-x-2",children:[e.jsx(h,{label:"Alamat Rumah",type:"text",onchange:t=>{b(t.target.value)},others:{value:p,name:"alamatRumahSupplier"}}),e.jsx(h,{label:"Alamat Kantor",type:"text",onchange:t=>{N(t.target.value)},others:{value:S,name:"alamatKantorSupplier"}}),e.jsx(h,{label:"Nomor Telepon",type:"text",onchange:t=>{c(t.target.value)},others:{value:f,name:"nomorTeleponSupplier"}}),e.jsx(h,{label:"Nomor Handphone",type:"text",onchange:t=>{r(t.target.value)},others:{value:u,name:"nomorHandphoneSupplier"}})]}),e.jsx("div",{className:"mt-5 flex gap-x-2",children:e.jsx(z,{label:"Jenis Barang",optionsDataList:i,optionsLabel:"name",optionsValue:"uuid",selectValue:v,onchange:t=>{_(t)},selectName:"jenisBarangSupplier"})}),e.jsxs("button",{className:"btn btn-sm bg-green-800 mt-4 text-white",onClick:()=>{C()},children:[e.jsx(K,{})," Simpan"]})]})})},E=A.forwardRef((o,a)=>{var l;return e.jsxs("div",{ref:a,children:[e.jsx(q,{bulan:o.bulan,tahun:o.tahun,title:"Supplier"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Supplier"}),e.jsx("th",{children:"Kode Supplier"})]})}),e.jsx("tbody",{children:(l=o==null?void 0:o.data)==null?void 0:l.map((i,m)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{children:m+1}),e.jsx("td",{children:i.name}),e.jsx("td",{children:i.code})]},m)}))})]})]})}),oe=()=>{const o=H(),{data:a}=o,[l,i]=s.useState([]),[m,d]=s.useState(!1),[g,x]=s.useState(!1),[P,j]=s.useState({name:""}),[k,p]=s.useState(!1),[b,S]=s.useState(""),N=s.useRef(),f=X.useReactToPrint({content:()=>N.current}),[c,u]=s.useState({page:1,size:10,count:118,lastPage:12}),r=(t="")=>{t==""&&S(t),d(!0),T.custom(`?search=${t}&page=${c.page}&size=${c.size}`,"GET").then(n=>{var w,R;p(t.length<1),i((w=n==null?void 0:n.data)==null?void 0:w.entry),u((R=n==null?void 0:n.data)==null?void 0:R.pagination),d(!1)}).catch(n=>{y(n)})},v=t=>{let n=l[t];j(n),x(!g)},_=async t=>{if(await Q("Hapus","Yakin ingin hapus data ini ?")){let n=l[t];T.custom(`/${n.uuid}`,"DELETE").then(()=>{B("Berhasil","Data berhasil dihapus"),r()}).catch(w=>{y(w)})}},C=({selected:t})=>{let n=c;n.page=t+1,u(n),r()},F=t=>{let n=c;n.size=t,n.page=1,u(n),r()};return s.useEffect(()=>{r()},[]),e.jsx(D,{isLoading:m,children:e.jsxs("div",{children:[e.jsx(J,{title:"Supplier"}),g?e.jsx(Z,{setAddSupplierEvent:()=>x(!1),getData:r,supplierEdit:P}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white py-3 px-6 mb-3 rounded-md flex justify-between shadow-2xl",children:[e.jsxs("label",{className:"input input-sm input-bordered flex items-center gap-2 bg-white",children:[e.jsx("input",{type:"text",className:"grow bg-transparent",placeholder:"Cari",value:b,onChange:t=>S(t.target.value)}),k?e.jsx(U,{onClick:()=>{r(b)},className:"cursor-pointer"}):e.jsx(L,{onClick:()=>r(""),className:"cursor-pointer"})]}),e.jsxs("div",{className:"flex gap-x-2 items-center",children:[e.jsxs("button",{className:"btn btn-sm bg-blue-900 text-white border-none",onClick:()=>{j(null),x(!g)},children:[e.jsx(I,{})," Tambah Supplier"]}),e.jsx("div",{className:"hidden",children:e.jsx(E,{data:l,ref:N,bulan:V(new Date().getMonth()),tahun:a.tahun})}),e.jsxs("button",{onClick:f,className:"btn btn-sm bg-red-600 hover:bg-red-600 text-white border-red-600",children:[e.jsx(G,{})," Cetak Supplier"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white shadow-xl rounded-md h-[50vh] no-scrollbar px-6 pb-4",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"sticky top-0 bg-white py-4 text-black",children:[e.jsx("th",{width:12,children:"No"}),e.jsx("th",{children:"Nama Supplier"}),e.jsx("th",{children:"Kode Supplier"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((t,n)=>e.jsx(e.Fragment,{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[n+1,"."]}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.code}),e.jsxs("td",{className:"flex gap-x-2",children:[e.jsx(M,{size:12,className:"text-yellow-500 cursor-pointer",onClick:()=>{v(n)}}),e.jsx(O,{size:12,className:"text-red-500 cursor-pointer",onClick:()=>{_(n)}})]})]},n)}))})]})}),e.jsx(Y,{paginateUpdatePage:C,paginate:c,setSize:F})]})]})})};export{oe as default};
